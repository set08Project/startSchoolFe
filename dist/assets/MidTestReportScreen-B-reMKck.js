import{r as h,q as me,cl as se,c3 as pe,c2 as le,c4 as re,J as je,c5 as Ne,b0 as he,fp as fe,aq as N,c6 as oe,x as T,e1 as ue,j as s,I as be,e as ve,Y as ge}from"./index-gGbhD9zv.js";const ye=()=>{var E,F,k,P,A,B,L,_,K,O,q,H,U,W,J,V,Y,z,Q,X,Z,D,M;const C=h.useRef(null),te=()=>{const r=C.current;if(!r)return;r.querySelectorAll("*").forEach(n=>{window.getComputedStyle(n).color.includes("oklch")&&(n.style.color="#000000")})},{studentInfo:t}=me(),{gradeMidData:x}=se(t==null?void 0:t._id),{schoolAnnouncement:ae}=pe(t==null?void 0:t.schoolIDs),{gradeData:u}=le(t==null?void 0:t._id);let e=ae,b=(E=u==null?void 0:u.reportCard)==null?void 0:E.find(r=>r.classInfo===`${t==null?void 0:t.classAssigned} session: ${e==null?void 0:e.presentSession}(${e==null?void 0:e.presentTerm})`);const{oneClass:p}=re(t==null?void 0:t.presentClassID),{teacherDetail:d}=je(p==null?void 0:p.teacherID),{subjectData:v}=Ne(t==null?void 0:t.presentClassID),{schoolInfo:S}=he(t==null?void 0:t.schoolIDs),{midTestPerformace:ce}=fe(t==null?void 0:t._id),G=e==null?void 0:e.schoolName,$=e==null?void 0:e.address;let xe=((k=(F=x==null?void 0:x.midReportCard[0])==null?void 0:F.result)==null?void 0:k.length)-((A=N.filter((P=x==null?void 0:x.midReportCard[0])==null?void 0:P.result,{grade:"F"}))==null?void 0:A.length),ie=((L=(B=x==null?void 0:x.midReportCard[0])==null?void 0:B.result)==null?void 0:L.map(r=>isNaN(r.exam)?0:r.exam).reduce((r,a)=>r+a,0))/(((K=(_=x==null?void 0:x.midReportCard[0])==null?void 0:_.result)==null?void 0:K.length)*100)*100,g=[],f={},o={};for(let r of(v==null?void 0:v.students)||[]){const{gradeMidData:a}=se(r);let n=(O=a==null?void 0:a.midReportCard)==null?void 0:O.find(c=>{var I,ee;return c.classInfo===`${t==null?void 0:t.classAssigned} session: ${(I=S[0])==null?void 0:I.year}(${(ee=S[0])==null?void 0:ee.presentTerm})`});g.push((q=n==null?void 0:n.result)==null?void 0:q.map(c=>({[`${c==null?void 0:c.subject}`]:(c==null?void 0:c.test2)+(c==null?void 0:c.test1)+(c==null?void 0:c.test3)+(c==null?void 0:c.test4)+(c==null?void 0:c.exam)})))}(H=N.sortBy(g,"subject"))==null||H.forEach(r=>{r==null||r.forEach(a=>{for(let n in a){let c=n.trim();(!f[c]||f[c]<a[n])&&(f[c]=a[n])}})}),(U=N.sortBy(g,"subject"))==null||U.forEach(r=>{r==null||r.forEach(a=>{for(let n in a){let c=n.trim();(!o[c]||o[c]>a[n])&&(o[c]=a[n])}})});let l=N.sortBy(Object.entries(f).map(([r,a])=>({subject:r,score:a})),"subject"),i=N.sortBy(Object.entries(o).map(([r,a])=>({subject:r,score:a})),"subject");h.useEffect(()=>{const r=a=>{(a.ctrlKey&&a.key==="r"||a.key==="F5")&&(a.preventDefault(),alert("Refresh is disabled on this page."))};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[]),h.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const[w,R]=h.useState(!1),{toPDF:ne,targetRef:de}=oe({filename:`${t==null?void 0:t.studentFirstName}-${t==null?void 0:t.classAssigned}-${e==null?void 0:e.presentSession}-${e==null?void 0:e.presentTerm}-${T(Date.now()).format("lll")}.pdf`}),{oneClass:j}=re(t==null?void 0:t.presentClassID),{schoolInfo:y}=ue(t==null?void 0:t.schoolName);let m=(W=x==null?void 0:x.midReportCard)==null?void 0:W.find(r=>(r==null?void 0:r.classInfo)===`${j==null?void 0:j.className} session: ${y==null?void 0:y.presentSession}(${j==null?void 0:j.presentTerm})`);return h.useEffect(()=>{te()},[]),s.jsxs("div",{ref:C,className:"overflow-hidden",children:[s.jsx(be,{}),s.jsx("button",{disabled:w,className:`text-[12px] tracking-widest transistion-all duration-300 hover:bg-red-100 px-8 py-2 rounded-md bg-red-50 ${w&&"cursor-not-allowed bg-red-200 animate-pulse"}`,onClick:()=>{R(!0),ne().finally(()=>{R(!1),ve.success("Result downloaded")})},children:w?s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(ge,{className:"animate-spin"}),s.jsx("span",{children:"downloading..."})]}):"Print Result"}),s.jsxs("div",{ref:de,children:[s.jsxs("h1",{className:"text-[10px] md:text-[12px] text-center mt-10 uppercase font-medium mb-10 italic",children:[t==null?void 0:t.classAssigned," ",e==null?void 0:e.presentSession,s.jsx("span",{className:"mx-1",children:e==null?void 0:e.presentTerm})," Mid Report"]}),s.jsx("div",{className:"relative ",children:s.jsx("main",{className:"flex justify-center mt-10",children:s.jsxs("div",{className:"p-4 overflow-hidden border",style:{width:`${(e==null?void 0:e.presentTerm)==="1st Term"?"994px":(e==null?void 0:e.presentTerm)==="2nd Term"?"1072px":(e==null?void 0:e.presentTerm)==="3rd Term"?"1150px":null}`},children:[s.jsxs("div",{className:"absolute overflow-hidden inset-0 text-gray-300 text-opacity-20 text-[5vw] font-bold tracking-widest uppercase flex justify-center items-center",style:{lineHeight:"5.5em",whiteSpace:"pre-wrap",userSelect:"none",pointerEvents:"none",rotate:"30deg"},children:[e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName," ",s.jsx("br",{}),e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName," ",s.jsx("br",{}),e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName," ",s.jsx("br",{}),e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName,e==null?void 0:e.schoolName," ",s.jsx("br",{}),e==null?void 0:e.schoolName," ",e==null?void 0:e.schoolName]}),s.jsxs("div",{className:"hidden md:flex items-center justify-between w-auto",children:[s.jsx("div",{className:"border h-28 w-28 ",children:e!=null&&e.avatar?s.jsx("img",{src:e==null?void 0:e.avatar,className:" w-full h-full object-contain"}):s.jsx("div",{className:"bg-blue-50 font-semibold uppercase text-[30px] w-full h-full flex justify-center items-center",children:(J=e==null?void 0:e.schoolName)==null?void 0:J.charAt(0)})}),s.jsxs("div",{className:"flex justify-center items-center flex-col",children:[s.jsx("h1",{className:"font-bold uppercase text-[25px]",children:G}),s.jsx("h1",{className:"text-[12px] font-semibold tracking-[0.6rem]",children:$})]}),s.jsx("div",{className:"border h-28 w-28 ",children:t!=null&&t.avatar?s.jsx("img",{src:t==null?void 0:t.avatar,className:"bg-blue-50 w-full h-full object-cover"}):s.jsx("div",{className:"bg-blue-50 font-semibold uppercase text-[30px] w-full h-full flex justify-center items-center",children:(V=t==null?void 0:t.studentFirstName)==null?void 0:V.charAt(0)})})]}),s.jsxs("div",{className:"flex flex-col md:hidden ",children:[s.jsxs("div",{className:"flex items-center justify-between w-auto",children:[s.jsx("div",{className:"border h-28 w-28 ",children:e!=null&&e.avatar?s.jsx("img",{src:e==null?void 0:e.avatar,className:" w-full h-full object-contain"}):s.jsx("div",{className:"bg-blue-50 font-semibold uppercase text-[30px] w-full h-full flex justify-center items-center",children:(Y=e==null?void 0:e.schoolName)==null?void 0:Y.charAt(0)})}),s.jsx("div",{className:"border h-28 w-28 ",children:t!=null&&t.avatar?s.jsx("img",{src:t==null?void 0:t.avatar,className:"bg-blue-50 w-full h-full object-cover"}):s.jsx("div",{className:"bg-blue-50 font-semibold uppercase text-[30px] w-full h-full flex justify-center items-center",children:(z=t==null?void 0:t.studentFirstName)==null?void 0:z.charAt(0)})})]}),s.jsxs("div",{className:"mt-5 flex justify-center items-center flex-col",children:[s.jsx("h1",{className:"font-bold uppercase text-[25px]",children:G}),s.jsx("h1",{className:"text-[12px] font-semibold tracking-[0.6rem]",children:$})]})]}),s.jsxs("div",{className:"text-[12px] md:text-[15px] h-14 my-5 uppercase bg-blue-950 text-white flex justify-center items-center",children:[e==null?void 0:e.presentSession,s.jsx("span",{className:"mx-1",children:e==null?void 0:e.presentTerm})," Mid Report"]}),s.jsxs("main",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 mb-10",children:[s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Surname"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:t==null?void 0:t.studentLastName})]}),s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Other Names"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:t==null?void 0:t.studentFirstName})]}),s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"sex"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:t==null?void 0:t.gender})]}),s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Class"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:t==null?void 0:t.classAssigned})]}),s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Academic Session"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:e==null?void 0:e.presentSession})]}),s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Student Type"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:"Day"})]}),s.jsxs("div",{className:" border p-2",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Session Number"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:t==null?void 0:t.enrollmentID})]}),s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Class Population"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:(Q=p==null?void 0:p.students)==null?void 0:Q.length})]}),s.jsxs("div",{className:" border p-2",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Class Teacher"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:d==null?void 0:d.staffName})]}),s.jsxs("div",{className:" border p-2",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Report Case"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:"Mid Test Report"})]})]}),s.jsx("main",{className:"overflow-auto uppercase text-[12px]",children:s.jsxs("section",{className:`min-w-[${(e==null?void 0:e.presentTerm)==="1st Term"?"994px":(e==null?void 0:e.presentTerm)==="2nd Term"?"1072px":(e==null?void 0:e.presentTerm)==="3rd Term"?"1150px":null}] flex flex-col mt-4 `,style:{width:`${(e==null?void 0:e.presentTerm)==="1st Term"?"994px":(e==null?void 0:e.presentTerm)==="2nd Term"?"1072px":(e==null?void 0:e.presentTerm)==="3rd Term"?"1150px":null}`},children:[s.jsxs("main",{className:"flex  bg-blue-50",children:[s.jsx("div",{className:"p-2 w-[40px]",children:"S/N"}),s.jsx("div",{className:"p-2 w-[180px] border-x ",children:"subject"}),s.jsxs("div",{className:" w-[78px] border-r flex flex-col justify-center items-center ",children:[s.jsx("p",{className:"text",children:"Exam"}),s.jsx("p",{className:"text-[12px]",children:"(100)"})]}),s.jsxs("div",{className:" w-[78px] border-r flex flex-col justify-center items-center ",children:[s.jsx("p",{className:"text",children:"Total"}),s.jsx("p",{className:"text-[12px]",children:"(100)"})]}),s.jsx("div",{className:" w-[78px] text-[12px] px-2 leading-tight font-medium border-r flex flex-col justify-center items-center ",children:s.jsx("p",{className:"text",children:"Class Highest Score"})}),s.jsx("div",{className:" w-[78px] text-[12px] px-2 leading-tight font-medium border-r flex flex-col justify-center items-center ",children:s.jsx("p",{className:"text",children:"Class lowest Score"})}),s.jsx("div",{className:" w-[78px] text-[12px] px-2 leading-tight font-medium border-r flex flex-col justify-center items-center ",children:s.jsx("p",{className:"text",children:"Grade"})}),s.jsx("div",{className:" flex-1 text-[12px] px-2 leading-tight font-medium border-r flex flex-col justify-center items-center ",children:s.jsx("p",{className:"text",children:"Remark"})})]}),s.jsx("main",{className:"flex flex-col mt-1",children:(X=N.sortBy(ce,"subjectTitle"))==null?void 0:X.map((r,a)=>s.jsxs("section",{className:`min-w-[${(e==null?void 0:e.presentTerm)==="1st Term"?"994px":(e==null?void 0:e.presentTerm)==="2nd Term"?"1072px":(e==null?void 0:e.presentTerm)==="3rd Term"?"1150px":null}] flex my-1 bg-blue-50 h-[40px]`,style:{width:`${(e==null?void 0:e.presentTerm)==="1st Term"?"994px":(e==null?void 0:e.presentTerm)==="2nd Term"?"1072px":(e==null?void 0:e.presentTerm)==="3rd Term"?"1150px":null}`},children:[s.jsx("div",{className:"p-2 w-[40px]",children:a+1}),s.jsx("div",{className:"p-2 w-[180px] border-x ",children:r==null?void 0:r.subjectTitle}),s.jsx("div",{className:" w-[78px] border-r flex flex-col justify-center items-center ",children:s.jsx("p",{className:"text-[12px]",children:r==null?void 0:r.performanceRating})}),s.jsx("div",{className:" w-[78px] border-r flex flex-col justify-center items-center ",children:s.jsx("p",{className:"text-[12px]",children:r==null?void 0:r.performanceRating})}),s.jsx("div",{className:" w-[78px] border-r flex flex-col justify-center items-center ",children:s.jsxs("p",{className:"text-[12px]",children:[" ",r==null?void 0:r.performanceRating]})}),s.jsx("div",{className:" w-[78px] text-[12px] px-2 leading-tight font-medium border-r flex flex-col justify-center items-center ",children:s.jsx("p",{className:"text",children:0})}),s.jsx("div",{className:" w-[78px] text-[12px] px-2 leading-tight font-medium border-r flex flex-col justify-center items-center ",children:s.jsx("p",{className:"text-[18px]",children:r==null?void 0:r.studentGrade})}),s.jsx("div",{className:" w-[110px]  text-[12px] px-2 leading-tight font-medium border-r flex flex-col justify-center items-center ",children:s.jsx("p",{className:"text-[12px] w-[110px] pl-4",children:(r==null?void 0:r.studentGrade)==="A1"?"Execellent":(r==null?void 0:r.studentGrade)==="B2"||(r==null?void 0:r.studentGrade)==="B3"?"Very Good":(r==null?void 0:r.studentGrade)==="C4"||(r==null?void 0:r.studentGrade)==="C5"||(r==null?void 0:r.studentGrade)==="C6"?"Credit":(r==null?void 0:r.studentGrade)==="D7"?"Pass":(r==null?void 0:r.studentGrade)==="E8"?"Poor Pass":(r==null?void 0:r.studentGrade)==="F9"||(r==null?void 0:r.studentGrade)==="F"?"Fail":null})}),s.jsx("div",{className:" flex-1 text-[12px] px-2 leading-tight font-medium border-r pt-1 normal-case flex justify-start items-center",children:s.jsx("p",{className:`
                          ${(r==null?void 0:r.studentGrade)==="A1"?"text-green-600":(r==null?void 0:r.studentGrade)==="B2"||(r==null?void 0:r.studentGrade)==="B3"?"text-purple-800":(r==null?void 0:r.studentGrade)==="C4"||(r==null?void 0:r.studentGrade)==="C5"||(r==null?void 0:r.studentGrade)==="C6"?"text-gray-600":(r==null?void 0:r.studentGrade)==="D7"?"text-purple-600":(r==null?void 0:r.studentGrade)==="E8"?"Poor Pass":(r==null?void 0:r.studentGrade)==="F9"||(r==null?void 0:r.studentGrade)==="F"?"text-red-500":null} 
                          `,children:r==null?void 0:r.remark})})]},a-(r==null?void 0:r._id)))})]})}),s.jsxs("main",{className:"grid grid-cols-1 sm:grid-cols-4 my-10",children:[s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"No. of subject taken"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:(D=(Z=x==null?void 0:x.midReportCard[0])==null?void 0:Z.result)==null?void 0:D.length})]}),s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"No. of subject passed"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:xe})]}),s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Attendance Performance"}),s.jsx("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:((M=x==null?void 0:x.midReportCard[0])==null?void 0:M.attendance)||"95%"})]}),s.jsxs("div",{className:" border p-2 ",children:[s.jsx("h1",{className:"uppercase text-[12px] font-semibold",children:"Percenatge score"}),s.jsxs("h1",{className:"uppercase text-[12px] font-normal -mt-[2px]",children:[ie.toFixed(2),"%"]})]})]}),s.jsxs("main",{className:"flex justify-center text-[12px] gap-2",children:[s.jsx("div",{className:"border-r pr-2 ",children:s.jsxs("h1",{children:["Class Avarage:"," ",s.jsxs("span",{className:"font-semibold",children:[(((l==null?void 0:l.map(r=>r==null?void 0:r.score).reduce((r,a)=>r+a,0))/((i==null?void 0:i.length)*100)*100+(i==null?void 0:i.map(r=>r==null?void 0:r.score).reduce((r,a)=>r+a,0))/((i==null?void 0:i.length)*100)*100)/2).toFixed(2),"%"]})]})}),s.jsx("div",{className:"border-r pr-2 ",children:s.jsxs("h1",{children:["Class Highest:"," ",s.jsxs("span",{className:"font-semibold",children:[((l==null?void 0:l.map(r=>r==null?void 0:r.score).reduce((r,a)=>r+a,0))/((i==null?void 0:i.length)*100)*100).toFixed(2),"%"]})]})}),s.jsx("div",{className:"border-r pr-2 ",children:s.jsxs("h1",{children:["Class lowest:"," ",s.jsxs("span",{className:"font-semibold",children:[((i==null?void 0:i.map(r=>r==null?void 0:r.score).reduce((r,a)=>r+a,0))/(i.length*100)*100).toFixed(2),"%"]})]})})]}),s.jsxs("div",{className:" grid grid-cols-1 md:grid-cols-2 text-[12px] mt-10",children:[s.jsxs("div",{className:"border mr-3 p-2",children:[s.jsx("p",{children:"Principal's Comment"}),s.jsx("p",{className:"my-2 border h-[120px] p-2 mb-5",children:m==null?void 0:m.adminComment}),s.jsxs("div",{className:"flex w-full",children:[s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("p",{className:"font-semibold",children:[e==null?void 0:e.name," ",e==null?void 0:e.name2]}),s.jsx("p",{className:"text-[10px]",children:"Principal"}),s.jsx("div",{className:"flex-1"}),s.jsx("p",{children:T(b==null?void 0:b.createdAt).format("lll")})]}),s.jsx("div",{className:"w-[160px] h-[80px] border",children:s.jsx("img",{src:e==null?void 0:e.signature,className:"w-full h-full object-contain"})})]})]}),s.jsxs("div",{className:"border mr-3 p-2",children:[s.jsx("p",{children:"Class Teacher's Comment"}),s.jsxs("p",{className:"my-2 border h-[120px] p-2 mb-5",children:[" ",m==null?void 0:m.classTeacherComment]}),s.jsxs("div",{className:"flex w-full",children:[s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsx("p",{className:"font-semibold",children:d==null?void 0:d.staffName}),s.jsx("p",{className:"text-[10px]",children:"Class Teacher"}),s.jsx("div",{className:"flex-1"}),s.jsx("p",{children:T(m==null?void 0:m.createdAt).format("lll")})]}),s.jsx("div",{className:"w-[160px] h-[80px] border",children:s.jsx("img",{src:d==null?void 0:d.signature,className:"w-full h-full object-contain"})})]})]})]})]})})})]})]})};export{ye as default};
