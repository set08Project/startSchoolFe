import{u as Y,b as R,r as t,j as e,I as O,B as j,_ as g,c as b,d as G,e as o,m as v,f as H,g as M,h as q,i as J}from"./index-C_ozXG6-.js";import{I as m}from"./Input-C4lfnqzh.js";import{C as K}from"./ClipLoader-ARcdzJNf.js";const Z=()=>{const{data:s}=Y(),V=R().dataID,[I,N]=t.useState(!1),[n,i]=t.useState(!1),[E,w]=t.useState(null),[x,y]=t.useState(!1),[h,r]=t.useState(!1),[p,S]=t.useState(!1),[d,a]=t.useState(!1),[f,C]=t.useState(!1);t.useState(!1);const[T,L]=t.useState(""),[k,z]=t.useState(`${s!=null&&s.name?s==null?void 0:s.name:""}`),[$,_]=t.useState(`${s!=null&&s.name2?s==null?void 0:s.name2:""}`),[c,A]=t.useState(`${s!=null&&s.phone?s==null?void 0:s.phone:""}`),P=()=>{document.startViewTransition?document.startViewTransition(()=>{a(!1),r(!h)}):(r(!h),a(!1))},F=()=>{document.startViewTransition?document.startViewTransition(()=>{S(!p),a(!1)}):(S(!p),a(!1))},B=()=>{document.startViewTransition?document.startViewTransition(()=>{a(!d),r(!1)}):(a(!d),r(!1))},D=()=>{document.startViewTransition?document.startViewTransition(()=>{C(!f),r(!1)}):(C(!f),r(!1))},U=()=>{N(!0),setTimeout(()=>{try{J(V).then(l=>{var u;if(l.status===200)return((u=l==null?void 0:l.data)==null?void 0:u.length)<1?(o.error("There Are No Students Registered"),l.data):(o.success("All Student Has Been Successfully Deleted"),l.data)})}catch(l){o.error("Error In Deleting All Student"),console.log(l)}finally{N(!1)}},2e3)};return e.jsxs("div",{className:"grid col-span-6 lg:col-span-3 pr-0 h-[100px] text-blue-950",children:[e.jsx(O,{position:"top-center"}),e.jsx("div",{children:e.jsxs("div",{className:"flex w-[100%] justify-between h-[100px] relative ",children:[e.jsxs("div",{children:[e.jsx("div",{children:"Legal Name"}),h?e.jsx("div",{className:`absolute top-6 z-10 -left-1\r
                h-[200px] w-[100%] sm:w-[120%] md:w-[105%] lg:w-[110%]  bg-blue-500 py-4\r
                `,style:{background:"rgba(252, 254, 255, 0.25)",backdropFilter:" blur( 4px )"},children:e.jsxs("div",{className:"z-20",children:[e.jsxs("div",{className:"flex w-full",children:[e.jsx(m,{className:"flex-1 mr-1 placeholder:text-gray-400 ",placeholder:s!=null&&s.name?"":"Enter First Name",defaultValue:s==null?void 0:s.name,value:k,onChange:l=>{z(l.target.value)}}),e.jsx(m,{className:"flex-1 ml-1",placeholder:s!=null&&s.name2?"":"Enter Last Name",defaultValue:s==null?void 0:s.name2,value:$,onChange:l=>{_(l.target.value)}})]}),e.jsx("div",{children:e.jsx(j,{name:`${n?" Loading":"save name"}`,icon:n?e.jsx(g,{color:"color",size:18,className:"mb-[0.12rem]"}):e.jsx(b,{}),className:` bg-blue-950 transition-all duration-300 ${n&&"h-12"}`,onClick:()=>{i(!0),G(s==null?void 0:s._id,{name:k,name2:$}).then(l=>{i(!1),r(!1),o.success("Legal Name updated successfully"),v(`api/view-school/${s==null?void 0:s._id}`)})}})})]})}):e.jsx("div",{children:s!=null&&s.name||s!=null&&s.name2?e.jsxs("div",{children:[s==null?void 0:s.name," ",s==null?void 0:s.name2]}):e.jsx("div",{children:"No Legal Name yet"})})]}),e.jsx("div",{className:"text-[12px] underline font-[500] hover:cursor-pointer  ml-10",onClick:P,children:"Change"})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex w-full justify-between h-[100px] relative ",children:[" ",e.jsxs("div",{children:[e.jsx("div",{children:"Email address"}),e.jsx("div",{className:"text-[12px] leading-4 text-[gray] mb-4 ",children:"Use an address youâ€™ll always have access to."}),e.jsx("div",{className:"font-[400] mt-3",children:p?e.jsx("div",{children:s==null?void 0:s.email}):e.jsxs("div",{children:[s==null?void 0:s.email.substring(0,2),"****@",s==null?void 0:s.email.split("@")[1]]})})]}),e.jsx("div",{className:"text-[12px] underline font-[500] hover:cursor-pointer ",onClick:F,children:"View"})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex w-full justify-between h-[100px] relative mt-10 ",children:[" ",e.jsxs("div",{children:[e.jsx("div",{children:"Phone numbers"}),d?e.jsx("div",{className:`absolute top-5 z-10 \r
                h-[200px] w-[100%] sm:w-[120%] md:w-[90%]   bg-blue-500 py-4\r
                `,style:{background:"rgba(252, 254, 255, 0.25)",backdropFilter:" blur( 4px )"},children:e.jsxs("div",{className:"z-20",children:[e.jsx("div",{className:"flex w-full",children:e.jsx(m,{className:"flex-1 mr-1 placeholder:text-gray-400 ",placeholder:s!=null&&s.phone?"":"Enter your contact mobile number ",defaultValue:c,value:c,onChange:l=>{A(l.target.value)}})}),e.jsx("div",{children:e.jsx(j,{name:`${n?" Loading":"save number"}`,icon:n?e.jsx(g,{color:"color",size:18,className:"mb-[0.12rem]"}):e.jsx(b,{}),className:` bg-blue-950 transition-all duration-300 ${n&&"h-12"}`,onClick:()=>{i(!0),H(s==null?void 0:s._id,c).then(()=>{o.success("Phone Number Updated successfully"),i(!1),a(!1)})}})})]})}):e.jsxs("div",{className:"text-[12px] leading-4 text-[gray] mb-4 mr-8 ",children:["Add a your contact phone Number: ",s==null?void 0:s.phoneNumber]}),e.jsx("div",{children:e.jsx("div",{className:"font-[400] mt-3",children:d?e.jsx("div",{children:s==null?void 0:s.phoneNumber}):e.jsx("div",{children:s!=null&&s.phone?e.jsx("div",{children:s==null?void 0:s.phone}):e.jsx("div",{children:"No phone contact yet"})})})})]}),e.jsx("div",{className:"text-[12px] underline font-[500] hover:cursor-pointer ",onClick:B,children:"Change"})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex w-full justify-between h-[70px] relative mt-10 ",children:[" ",e.jsxs("div",{children:[e.jsx("div",{children:"Change School Name"}),f?e.jsx("div",{className:`absolute top-8 z-10 \r
                h-[200px] w-[100%] sm:w-[120%] md:w-[90%] bg-blue-500 py-4\r
                `,style:{background:"rgba(252, 254, 255, 0.25)",backdropFilter:" blur( 4px )"},children:e.jsxs("div",{className:"z-20",children:[e.jsx("div",{className:"flex w-full",children:e.jsx(m,{className:"flex-1 mr-1 placeholder:text-gray-400 ",value:c,defaultValue:s==null?void 0:s.schoolName,onChange:l=>{A(l.target.value)}})}),e.jsx("div",{children:e.jsx(j,{name:`${n?" Loading":"save school name"}`,icon:n?e.jsx(g,{color:"color",size:18,className:"mb-[0.12rem]"}):e.jsx(b,{}),className:` bg-blue-950 transition-all duration-300 ${n&&"h-12"}`,onClick:()=>{i(!0),M(s==null?void 0:s._id,{schoolName:c}).then(()=>{i(!1),D(),v(`api/view-school/${s==null?void 0:s._id}`)})}})})]})}):e.jsxs("div",{className:"text-[12px] leading-4 text-[gray] mb-4 mr-8 ",children:["You can always update your school name here:"," ",e.jsx("span",{className:"font-medium",children:s==null?void 0:s.schoolName})]}),e.jsx("div",{children:e.jsx("div",{className:"font-[400] mt-3",children:e.jsxs("div",{className:"mt-40  p-5 uppercase",children:[s!=null&&s.signature?e.jsx("img",{src:s==null?void 0:s.signature,className:"w-[200px] h-[120px] border mb-10 object-contain"}):e.jsx("div",{className:"w-[200px] h-[120px] border mb-10 flex justify-center items-center text-[12px] font-semibold italic",children:e.jsx("p",{children:"NO SIGNATURE YET"})}),e.jsx("div",{children:T?e.jsx("button",{className:`bg-red-500 ${n?"cursor-not-allowed bg-red-400 animate-pulse":"cursor-pointer"} text-white px-[45px] py-4 rounded-md text-[12px]`,disabled:n,onClick:()=>{i(!0);const l=new FormData;l.append("avatar",T),q(s==null?void 0:s._id,l).then(u=>{u.status===201?(o.success("signature updated successfully"),v(`api/api/view-school/${s==null?void 0:s._id}`)):o.error("signature updated Error")}).finally(()=>{i(!1)})},children:n?"Loading...":"upload Signature"}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"signature-upload",className:"mt-4 bg-blue-950 text-white px-12 py-4 rounded-md text-[12px] cursor-pointer",children:"Update Signature"}),e.jsx("input",{className:"hidden",type:"file",id:"signature-upload",onChange:l=>{L(l.target.files[0])}})]})})]})})})]}),e.jsx("div",{className:"text-[12px] underline font-[500] hover:cursor-pointer ",onClick:D,children:"Change"})]})}),e.jsxs("div",{className:"w-full flex justify-between items-center smallphon relative",children:[e.jsxs("div",{className:"w-[280px] ",children:[e.jsx("h1",{className:"font-medium text-[16px]",children:"Delete All Students In your School"}),e.jsx("h3",{className:"text-[12px] font-extrabold",children:"This is an irreversible action, All students and associated data's about each student will be wiped off. Be absolutely sure about taking this action."})]}),e.jsxs("div",{children:[e.jsx("div",{children:e.jsx("div",{className:" w-full",children:e.jsx("div",{className:"underline font-medium py-3 px-3 rounded-lg cursor-pointer transition-all duration-300 hover:scale-105",onClick:()=>{w("Delete")},children:"Proceed"})})}),E==="Delete"&&e.jsx("div",{className:"absolute freshh py-[30px] mb-3 w-full flex justify-center items-center backdrop-blur-sm bg-blue-50 top-0 left-0 rounded-lg",children:e.jsxs("div",{className:"p-4 w-[400px] sm:w-[470px] min-h-[300px] bg-white rounded-lg smallphone",children:[e.jsx("div",{className:"mb-3 text-center",children:e.jsx("h3",{className:"font-bold text-lg text-center text-blue-950",children:"All Student Deletion Notice"})}),e.jsxs("div",{className:"mb text-blue-950",children:[e.jsxs("p",{className:"mb-3 text-[14px]",children:["You are about to permanently delete"," ",e.jsx("span",{className:"font-extrabold",children:"All students "})," record from your database. This action is irreversible and cannot be undone, and will result in the complete removal of all associated data, including academic history, contact information, and every other students detail."," "]}),e.jsx("p",{className:"ml-3 mb-3 font-extrabold",children:"Be Absolutely Sure of this decision"}),e.jsxs("div",{className:"mb-3 flex items-center justify-center gap-3 font-semibold  text-[15px]",children:[e.jsxs("p",{children:["If ",e.jsx("span",{className:"text-red-500 text-[20px]",children:"YES"})," ","continue,"]}),e.jsxs("p",{className:"",children:["If ",e.jsx("span",{className:"text-[20px]",children:"NO"})," cancel."]})]}),e.jsxs("div",{className:"pt-2 flex justify-between items-center sm:justify-center sm:gap-5",children:[I?e.jsx("div",{className:"",children:e.jsxs("button",{className:`text-white font-medium flex justify-center items-center gap-3 bg-red-600 py-3 px-3 rounded-lg cursor-pointer transition-all duration-300 hover:scale-105 ${x?"hidden":"block"}`,children:[e.jsx(K,{color:"#fff",loading:n,size:20}),"Deleting..."]})}):e.jsx("div",{className:"",children:e.jsx("button",{className:`text-white font-medium flex justify-center items-center gap-3 bg-red-600 py-3 px-3 rounded-lg cursor-pointer transition-all duration-300 hover:scale-105 ${x?"hidden":"block"}`,onClick:()=>{U(),y(!0)},children:"Delete All Students(Not Active)"})}),e.jsx("button",{className:"btn text-white py-4 px-6 bg-blue-950 border hover:bg-blue-950 scale-105 cursor-pointer",onClick:()=>{w(null),y(!1)},children:x?"Close":"Cancel"})]})]})]})})]})]})]})};export{Z as default};
