import{bP as o,bQ as N,bR as f,aq as v,u as w,b0 as g,j as e,k as y,t as S,ay as j,bz as b,L as k,B as p}from"./index-BomD4pl1.js";const R=({props:c})=>{var r,a,d;const{sessionTermData:s}=j(c);return b(c),e.jsx(k,{to:`${c}/${(r=s==null?void 0:s.data)==null?void 0:r.year.replace("/","-")}/${(a=s==null?void 0:s.data)==null?void 0:a.presentTerm.replace(" ","-")}`,className:"w-[150px] border-r text-black font-bold flex justify-start",children:e.jsx(p,{name:`View ${(d=s==null?void 0:s.data)==null?void 0:d.presentTerm} session `,className:"bg-blue-950 py-4 text-white text-[12px] font-normal rounded-lg -ml-2"})})},H=({props:c})=>e.jsx("div",{className:" ",children:"View Details"}),V=({props:c})=>{var r,a;const{termData:s}=b(c);return j(c),e.jsx("div",{className:"flex text-[10px] font-extrabold mt-3 italic gap-5 text-blue-900 ",children:e.jsx("p",{className:"text-[14px] font-bold pl-2",children:((r=s==null?void 0:s.classResult)==null?void 0:r.length)>0&&((a=s==null?void 0:s.classResult.map(d=>{var l;return(l=d==null?void 0:d.students)==null?void 0:l.length}))==null?void 0:a.reduce((d,l)=>d+l))})})},F=({props:c})=>{var a,d,l,i,m,u,h,n;const{sessionTermData:s}=j(c),{termData:r}=b(c);return console.log("FEE: ",r),e.jsx("div",{className:"w-12",children:(r==null?void 0:r.classResult.length)>0?e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase",children:"Paid"}),e.jsxs("p",{className:"text-[12px] font-bold text-green-500",children:[((d=(a=s==null?void 0:s.data)==null?void 0:a.classResult.map(t=>{var x;return(x=t==null?void 0:t.schoolFeesHistory)==null?void 0:x.length}))==null?void 0:d.reduce((t,x)=>t+x))/((i=(l=s==null?void 0:s.data)==null?void 0:l.classResult.map(t=>t.students.length))==null?void 0:i.reduce((t,x)=>t+x))*100,"%"]}),e.jsx("p",{className:"text-[10px] mt-2 uppercase",children:"unPaid"}),e.jsxs("p",{className:"text-[12px] font-bold text-red-500",children:[((u=(m=s==null?void 0:s.data)==null?void 0:m.classResult.map(t=>{var x;return t.students.length-((x=t==null?void 0:t.schoolFeesHistory)==null?void 0:x.length)}))==null?void 0:u.reduce((t,x)=>t+x))/((n=(h=s==null?void 0:s.data)==null?void 0:h.classResult.map(t=>t.students.length))==null?void 0:n.reduce((t,x)=>t+x))*100,"%"]})]}):null})},A=()=>{const{teacherInfo:c}=o(),{state:s}=N(c==null?void 0:c.classesAssigned),{classAcademicHistory:r}=f(s==null?void 0:s._id);v.groupBy(r==null?void 0:r.classHistory,"session");const{data:a}=w(),{schoolInfo:d}=g(a==null?void 0:a._id);return console.log(d),e.jsxs("div",{className:"",children:[e.jsx(y,{name:"Viewing School Academic History"}),e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle w-12 h-12",children:e.jsx("img",{src:a!=null&&a.avatar?a==null?void 0:a.avatar:S,alt:"Avatar"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:a==null?void 0:a.schoolName}),e.jsx("div",{className:"text-[12px] opacity-50 ",children:"View Academic History"})]}),e.jsx("div",{className:" w-full overflow-x-auto",children:e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[600px] overflow-y-hidden mt-9",children:[e.jsxs("div",{className:" w-[1200px] text-[gray] flex gap-9 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[150px] border-r",children:"Session"}),e.jsx("div",{className:"w-[150px] border-r",children:"Number of Terms"}),e.jsx("div",{className:"w-[150px] border-r",children:"Number of Tearcher"}),e.jsxs("div",{className:"w-[150px] border-r flex flex-col",children:[e.jsx("p",{children:"Number of Student"}),e.jsxs("div",{className:"flex  text-[10px] font-extrabold mt-3 italic gap-5 text-blue-900",children:[e.jsx("p",{className:"w-12",children:"1st Term"}),e.jsx("p",{className:"w-12",children:"2nd Term"}),e.jsx("p",{className:"w-12",children:"3rd Term"})]})]}),e.jsxs("div",{className:"w-[220px] border-r flex flex-col",children:[e.jsx("p",{children:"Number of SchoolFee Stat"}),e.jsxs("div",{className:"flex  text-[10px] font-extrabold mt-3 italic gap-5 text-blue-900",children:[e.jsx("p",{className:"w-12",children:"1st Term"}),e.jsx("p",{className:"w-12",children:"2nd Term"}),e.jsx("p",{className:"w-12",children:"3rd Term"})]})]}),e.jsx(H,{})]}),e.jsx("div",{children:e.jsx("div",{className:"",children:d==null?void 0:d.map(l=>{var i,m,u,h;return e.jsxs("div",{className:"w-[1200px] flex items-center gap-9 text-[12px] font-medium  h-22 px-4 my-2 overflow-hidden",style:{width:`${1200+((i=l==null?void 0:l.term)==null?void 0:i.length)*170}px`},children:[e.jsx("div",{className:"w-[150px] border-r-2 border-blur-950 text-black",children:l==null?void 0:l.year}),e.jsx("div",{className:"w-[150px] border-r text-black",children:l==null?void 0:l.term.length}),e.jsx("div",{className:"w-[150px] border-r text-black flex",children:l==null?void 0:l.numberOfTeachers}),e.jsx("div",{className:"w-[150px] flex border-r text-black",children:(m=l==null?void 0:l.term)==null?void 0:m.map((n,t)=>e.jsxs("div",{className:"w-12",children:[" ",e.jsx(V,{props:n})]},t))}),e.jsx("div",{className:"w-[220px] gap-5 border-r text-black flex",children:(u=l==null?void 0:l.term)==null?void 0:u.map(n=>e.jsx(F,{props:n}))}),(h=l==null?void 0:l.term)==null?void 0:h.map(n=>e.jsx(R,{props:n}))]})})})})]})})]})};export{A as default};
