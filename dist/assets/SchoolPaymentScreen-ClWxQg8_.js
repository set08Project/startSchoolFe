import{N as h,u as o,ax as j,r as m,j as a,Q as b,t as v,E as u,cn as N}from"./index-CqzGoYxY.js";const w=()=>{h();const{data:s}=o(),{schoolFeeRecord:d,mutate:x}=j(s==null?void 0:s._id),[f,t]=m.useState([]),[c,n]=m.useState(null);console.log(d);const r=async e=>{n(e);try{await N(e),x(l=>l&&l.map(i=>i._id===e?{...i,confirm:!0}:i)),t([])}catch(l){console.error("Error updating school fee:",l)}finally{n(null)}};return a.jsxs("div",{children:[a.jsx(b,{name:"School Fees History"}),a.jsx("div",{className:"mb-28"}),a.jsx("div",{className:"mb-28"}),a.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",children:[a.jsxs("div",{className:"text-[gray] w-[900px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[a.jsx("div",{className:"w-[180px] border-r",children:"Payment Date"}),a.jsx("div",{className:"w-[250px] border-r",children:"Student Info"}),a.jsx("div",{className:"w-[130px] border-r",children:"School Fee Paid"}),a.jsx("div",{className:"w-[150px] border-r ml-1",children:"Payment Receipt Code"}),a.jsx("div",{className:"w-[150px] border-r",children:"confirm"}),a.jsx("div",{className:"w-[80px] border-r",children:"Remark"})]}),d&&d.length>0?a.jsx("div",{className:" w-[900px] overflow-hidden ",children:d.map((e,l)=>{var i;return a.jsxs("div",{children:[" ",a.jsx("div",{children:a.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  min-h-16 px-4 my-2  overflow-hidden ${l%2===0?"bg-slate-50":"bg-white"}`,children:[a.jsx("div",{className:"w-[180px] border-r",children:e==null?void 0:e.date}),a.jsx("div",{className:"w-[250px] border-r ",children:a.jsx("div",{className:"",children:a.jsxs("div",{className:"flex items-center gap-3 my-2",children:[a.jsx("div",{className:"avatar",children:a.jsx("div",{className:"mask mask-squircle w-12 h-12",children:a.jsx("img",{src:e!=null&&e.avatar?e==null?void 0:e.avatar:v,alt:"Avatar"})})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold",children:e.studentName}),a.jsxs("div",{className:"text-[12px] opacity-50 ",children:[e.studentClass," - ",e==null?void 0:e.term]})]})]})})}),a.jsxs("div",{className:"w-[130px] border-r ml-1",children:["â‚¦",(i=e==null?void 0:e.amount)==null?void 0:i.toLocaleString()]}),a.jsx("div",{className:"w-[145px] border-r ml-1 uppercase font-bold",children:e==null?void 0:e.reference}),a.jsx("div",{className:"w-[150px] border-r pl-1 ",onClick:()=>{t([e==null?void 0:e._id])},children:a.jsxs("div",{children:[a.jsx("label",{htmlFor:`modal_${e._id}`,className:`btn text-[12px] font-medium text-white 
                          ${e.confirm?"bg-blue-950":"bg-red-600"}
                          ${e.confirm?"hover:bg-blue-900":"hover:bg-red-500"}
                          w-[95%] capitalize
                          ${c===e._id?"loading":""}
                          `,children:c===e._id?"Updating...":e.confirm?"confirmed":"not yet confirmed"}),a.jsx("input",{type:"checkbox",id:`modal_${e._id}`,className:"modal-toggle"}),a.jsx("div",{className:"modal",role:"dialog",children:a.jsxs("div",{className:"modal-box",children:[a.jsx("h3",{className:"font-bold text-lg",children:"Confirm this payment"}),a.jsxs("p",{className:"py-4",children:["Are you sure you want to confirm this payment?",a.jsx("br",{}),"Payment ID: ",e._id]}),a.jsxs("div",{className:"modal-action",children:[a.jsx("label",{htmlFor:`modal_${e._id}`,className:"btn px-8 bg-green-500 text-white hover:bg-green-600 ",onClick:()=>r(e._id),children:c===e._id?"Updating...":"Yes"}),a.jsx("label",{htmlFor:`modal_${e._id}`,className:"btn px-8 bg-red-500 text-white hover:bg-red-600 ",onClick:()=>t([]),children:"No"})]})]})})]})}),a.jsx("div",{className:"w-[80px] border-r pl-6 ",children:a.jsx("input",{checked:e==null?void 0:e.confirm,type:"checkbox",className:`checkbox ${e!=null&&e.confirm?"checkbox-success":"checkbox-error"}`,disabled:c===e._id,onChange:()=>r(e._id)})})]})})]},e._id)})}):a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(u,{}),a.jsx("p",{className:"mt-2 text-[15px]",children:d==null?"Loading payment records...":"You haven't reported any payments yet"})]})]})]})};export{w as default};
