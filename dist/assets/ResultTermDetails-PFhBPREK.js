import{bP as N,o as u,bQ as b,ci as y,c5 as v,bR as $,aq as o,j as s,I as S,Q as T,c2 as w,b0 as f,t as I,z as R}from"./index-CpMs4x3j.js";document.title="View  Result History";const _=({props:d,el:c})=>{var i,t;const{gradeData:l}=w(d==null?void 0:d._id),{schoolInfo:a}=f(d==null?void 0:d.schoolIDs);let e=(t=(i=l==null?void 0:l.reportCard.find(x=>{var n,r;return x.classInfo===`${d==null?void 0:d.classAssigned} session: ${(n=a[0])==null?void 0:n.year}(${(r=a[0])==null?void 0:r.presentTerm})`}))==null?void 0:i.result)==null?void 0:t.find(x=>x.subject===(c==null?void 0:c.subjectTitle));return s.jsx("div",{className:"w-[260px] border-r-2 border-blue-950 ",children:s.jsxs("div",{className:"pl-1 flex gap-1 mt-2 text-[12px] ",children:[s.jsx("p",{className:"w-[30px] border-r",children:e!=null&&e.test1?e==null?void 0:e.test1:0}),s.jsx("p",{className:"w-[30px] border-r",children:e!=null&&e.test2?e==null?void 0:e.test2:0}),s.jsx("p",{className:"w-[30px] border-r",children:e!=null&&e.test3?e==null?void 0:e.test3:0}),s.jsx("p",{className:"w-[30px] border-r",children:e!=null&&e.test4?e==null?void 0:e.test4:0}),s.jsx("p",{className:"w-[35px] border-r",children:e!=null&&e.exam?e==null?void 0:e.exam:0}),s.jsx("p",{className:"w-[35px] font-bold border-r",children:e!=null&&e.mark?e==null?void 0:e.mark:0}),s.jsx("p",{className:"w-[35px] font-bold",children:e!=null&&e.grade?e==null?void 0:e.grade:"Nill"})]})})},C=({props:d,i:c})=>{var n;const{teacherInfo:l}=N(),{gradeData:a}=w(d==null?void 0:d._id),{state:e}=b(l==null?void 0:l.classesAssigned),{subjectData:i}=v(e==null?void 0:e._id),{schoolInfo:t}=f(d==null?void 0:d.schoolIDs);let x=a==null?void 0:a.reportCard.find(r=>{var h,j;return r.classInfo===`${d==null?void 0:d.classAssigned} session: ${(h=t[0])==null?void 0:h.year}(${(j=t[0])==null?void 0:j.presentTerm})`});return s.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  h-16 px-4 my-2  overflow-hidden ${c%2===0?"bg-slate-50":"bg-white"}`,children:[s.jsx("div",{className:"w-[100px] border-r font-bold",children:c+1}),s.jsx("div",{className:"w-[250px] flex border-r",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("img",{className:" mask mask-squircle w-14 h-14 rounded-md border object-cover",src:d!=null&&d.avatar?d==null?void 0:d.avatar:I}),s.jsxs("div",{className:"w-[180px] ",children:[" ",d==null?void 0:d.studentFirstName," ",d==null?void 0:d.studentLastName]})]})}),s.jsx("div",{className:"w-[100px] border-r",children:s.jsx(H,{props:d})}),s.jsx("div",{className:"w-[100px] border-r",children:x==null?void 0:x.points}),s.jsx("div",{className:"w-[100px] border-r",children:x==null?void 0:x.grade}),s.jsx("div",{className:`w-[${(i==null?void 0:i.classSubjects.length)*260}px]  border-r items-center flex`,children:s.jsx("div",{className:"flex gap-4 ",children:(n=o.sortBy(i==null?void 0:i.classSubjects,"subjectTitle"))==null?void 0:n.map(r=>s.jsx(_,{props:d,el:r}))})})]})},H=({props:d})=>{var l,a;const{mainStudentAttendance:c}=R(d==null?void 0:d._id);return s.jsxs("div",{children:[(((l=c==null?void 0:c.data)==null?void 0:l.attendance.filter(e=>e.present===!0).length)/((a=c==null?void 0:c.data)==null?void 0:a.attendance.length)*100).toFixed(2),"%"]})},k=({props:d})=>s.jsxs("div",{className:"w-[260px] border-r ",children:[s.jsx("p",{className:"pl-3 font-bold text-[15px]",children:d==null?void 0:d.subjectTitle}),s.jsxs("div",{className:"pl-1 flex gap-1 mt-2 text-[10px] ",children:[s.jsx("p",{className:"w-[30px] border-r",children:"1st"}),s.jsx("p",{className:"w-[30px] border-r",children:"2nd"}),s.jsx("p",{className:"w-[30px] border-r",children:"3rd"}),s.jsx("p",{className:"w-[30px] border-r",children:"4th"}),s.jsx("p",{className:"w-[35px] border-r",children:"Exam"}),s.jsx("p",{className:"w-[35px] ",children:"Total"}),s.jsx("p",{className:"w-[35px] ",children:"Grade"})]})]}),q=()=>{var r,h,j;const{teacherInfo:d}=N(),{session:c,term:l}=u(),{state:a}=b(d==null?void 0:d.classesAssigned);y(a==null?void 0:a._id);const{subjectData:e}=v(a==null?void 0:a._id),{classAcademicHistory:i}=$(a==null?void 0:a._id);let t=o.groupBy(i==null?void 0:i.classHistory,"session");const n=Object.values(t).flat().find(m=>m.term===l.replace("-"," ")&&m.session===c.replace("-","/"));return console.log("subject:: ",n),s.jsxs("div",{className:"",children:[s.jsx(S,{position:"top-center",reverseOrder:!0}),s.jsx("div",{className:"mb-0"}),s.jsx(T,{name:`${c.replace("-","/")}: ${l.replace("-"," ")} Result`}),s.jsx("div",{className:"mt-10"}),s.jsx("div",{className:"flex w-full justify-end"}),s.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",children:[s.jsxs("div",{className:"text-[gray] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",style:{width:`${800+(e==null?void 0:e.classSubjects.length)*260}px`},children:[s.jsx("div",{className:"w-[100px] border-r",children:"Sequence"}),s.jsx("div",{className:"w-[250px] border-r",children:"student Info"}),s.jsx("div",{className:"w-[100px] border-r",children:"Student's Attendance Ratio"}),s.jsx("div",{className:"w-[100px] border-r",children:"Total Points"}),s.jsx("div",{className:"w-[100px] border-r",children:"Grade"}),s.jsx("div",{className:`w-[${(e==null?void 0:e.classSubjects.length)*260}px] border-r`,children:s.jsx("div",{className:" flex ",children:s.jsx("div",{className:"flex gap-4",children:(r=o.sortBy(e==null?void 0:e.classSubjects,"subjectTitle"))==null?void 0:r.map(m=>s.jsx(k,{props:m}))})})})]}),s.jsx("div",{className:" overflow-hidden",style:{width:`${800+(e==null?void 0:e.classSubjects.length)*260}px`},children:((h=n==null?void 0:n.resultHistory)==null?void 0:h.length)>0?s.jsx("div",{children:(j=n==null?void 0:n.resultHistory)==null?void 0:j.map((m,g)=>s.jsx("div",{children:s.jsx(C,{props:m,i:g})},m))}):s.jsx("div",{children:"No student yet"})})]})]})};export{q as default};
