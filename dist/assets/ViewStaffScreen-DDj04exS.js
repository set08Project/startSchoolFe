import{N as R,r as m,b as F,P as V,j as e,Q as L,B as h,t as T,x as Y,L as B,_ as E,R as $,T as y,U as S,V as H,e as A}from"./index-C_ozXG6-.js";import{I as P}from"./Input-C4lfnqzh.js";document.title="View Staff";const z=({props:i})=>{var r;const{teacherNote:c}=$(i);let t=(r=c==null?void 0:c.lessonNotes)==null?void 0:r.map(l=>l==null?void 0:l.rateData).flat().map(l=>parseInt(l==null?void 0:l.rate));return e.jsx("div",{children:parseFloat(((t==null?void 0:t.reduce((l,n)=>l+n,0))/(t==null?void 0:t.length)).toFixed(2))?parseFloat(((t==null?void 0:t.reduce((l,n)=>l+n,0))/(t==null?void 0:t.length)).toFixed(2)):0})},O=()=>{var N;const i=R(),[c,t]=m.useState(!1),[r,l]=m.useState(!1),[n,C]=m.useState(""),_=()=>{document.startViewTransition?document.startViewTransition(()=>{i(S(!0)),i(y(!0))}):(i(y(!0)),i(S(!0)))},k=F().dataID,I=a=>{try{l(!0),t(!0),H(k,a).then(s=>{s.status===200&&(console.log(s),A.success("Staff Has Been Successfully Deleted"))})}catch(s){A.error("Error In Deleting Staff"),console.log(s)}finally{l(!1),t(!1)}},{schoolTeacher:o}=V(),D=a=>{C(a.target.value)},f=(N=o==null?void 0:o.staff)==null?void 0:N.sort((a,s)=>{var x;return(x=a.staffName)==null?void 0:x.localeCompare(s.staffName)}),u=f==null?void 0:f.filter(a=>`${a.staffName}`.toLowerCase().includes(n.toLowerCase())),[b,j]=m.useState([]);return m.useEffect(()=>{},[b]),e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mb-0"}),e.jsx(L,{name:"viewing all Staff"}),e.jsx("div",{className:"mt-10"}),e.jsxs("div",{className:"flex w-full justify-between items-start",children:[e.jsx(P,{placeholder:"Search Staff Name",className:"ml-0",value:n,onChange:D}),e.jsx(h,{name:"Add a new Recruit",className:"lg:uppercase lg:text-[12px] text text-[10px] font-medium bg-blue-950 py-2 px-2 sm:py-4 md:py-2 lg:py-4 md:px-8 hover:bg-blue-900 cursor-pointer transition-all duration-300",onClick:_})]}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",style:{color:"var(--secondary)"},children:[e.jsxs("div",{className:"text-[gray] w-[2060px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[50px] border-r",children:"S/N"}),e.jsx("div",{className:"w-[90px] border-r",children:"Staff Image"}),e.jsx("div",{className:"w-[200px] border-r",children:"Staff Name"}),e.jsx("div",{className:"w-[130px] border-r",children:"Reg. Date"}),e.jsx("div",{className:"w-[80px] border-r",children:"Status"}),e.jsx("div",{className:"w-[100px] border-r",children:"Gender"}),e.jsx("div",{className:"w-[100px] border-r",children:"Attendance Ratio"}),e.jsx("div",{className:"w-[100px] border-r",children:"Staff Role"}),e.jsx("div",{className:"w-[150px] border-r",children:"Phone"}),e.jsx("div",{className:"w-[200px] border-r",children:"Contact "}),e.jsx("div",{className:"w-[200px] border-r",children:"Subjects Taking"}),e.jsx("div",{className:"w-[200px] border-r",children:"Class Handle"}),e.jsx("div",{className:"w-[80px] border-r",children:"Rate"}),e.jsx("div",{className:"w-[180px] border-r",children:"Action"}),e.jsx("div",{className:"w-[180px] border-r",children:"Staff Action"})]}),e.jsx("div",{className:" w-[2060px] overflow-hidden",children:u==null?void 0:u.map((a,s)=>{var x,v,w,g;return e.jsx("div",{className:"transition-all duration-300",children:e.jsx("div",{children:e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  min-h-16 px-4 py-2 my-2  overflow-hidden ${s%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[50px] border-r",children:s+1}),e.jsx("div",{className:"w-[90px] flex justify-start border-r",children:e.jsx("img",{className:"w-14 h-14 rounded-md border object-cover",src:a!=null&&a.avatar?a==null?void 0:a.avatar:T})}),e.jsxs("div",{className:"w-[200px] border-r",children:[a==null?void 0:a.staffName,e.jsxs("div",{className:"text-slate-500",children:["ID: ",a==null?void 0:a.enrollmentID]})]}),e.jsx("div",{className:"w-[130px] border-r",children:(x=Y(a==null?void 0:a.createdAt))==null?void 0:x.format("ll")}),e.jsx("div",{className:`w-[80px] border-r ${a!=null&&a.activeStatus?"text-green-600":"text-red-600"}`,children:a!=null&&a.activeStatus?"Active":"Idle"}),e.jsx("div",{className:"w-[100px] border-r",children:a!=null&&a.gender?e.jsx("div",{children:a==null?void 0:a.gender}):e.jsx("div",{children:"gender not added"})}),e.jsx("div",{className:"w-[100px] border-r",children:"2:10"}),e.jsx("div",{className:"w-[100px] border-r  ",children:a==null?void 0:a.staffRole}),e.jsx("div",{className:"w-[150px] border-r  ",children:a!=null&&a.phone?a==null?void 0:a.phone:"Phone Number Not Yet Assigned"}),e.jsx("div",{className:"w-[200px] border-r  ",children:a!=null&&a.staffAddress?a==null?void 0:a.staffAddress:"Address Not Yet Assigned"}),e.jsx("div",{className:"w-[200px] border-r h-16 py-4 overflow-x-auto",children:((v=a==null?void 0:a.subjectAssigned)==null?void 0:v.length)>0?e.jsx("div",{className:"",children:(w=a==null?void 0:a.subjectAssigned)==null?void 0:w.map(d=>e.jsx("div",{className:"gap-2",children:e.jsxs("p",{children:[d==null?void 0:d.title,": ",d==null?void 0:d.classMeant]})}))}):"Not Yet Assigned"}),e.jsx("div",{className:"w-[200px] border-r",children:a!=null&&a.classesAssigned?e.jsx("div",{className:"",children:e.jsx("p",{className:"flex flex-wrap",children:(g=a==null?void 0:a.classesAssigned)==null?void 0:g.map(d=>e.jsx("div",{className:" m-1 px-2 text-[10px] font-semibold text-white bg-blue-950 py-1 border rounded-full",children:d.className}))})}):"Not Yet Assigned"}),e.jsx("div",{className:"w-[80px] border-r",children:e.jsx(z,{props:a==null?void 0:a._id})}),e.jsx(B,{to:`staff-details/${a==null?void 0:a._id}`,className:"w-[180px] border-r",children:e.jsx(h,{name:"View Detail",className:"py-3 w-[85%] hover:scale-105 bg-black text-white  hover:bg-neutral-800 transition-all duration-300",onClick:()=>{}})}),e.jsxs("div",{className:"w-[180px] border-r",onClick:()=>{b.push(a==null?void 0:a._id)},children:[e.jsx("div",{children:e.jsx("label",{htmlFor:"my_modal_delete",className:"py-3 px-1 w-[85%] border rounded-md bg-red-500 text-[12px] text-white transition-all duration-300 hover:scale-105 cursor-pointer inline-block text-center",children:"Delete Staff"})}),e.jsx("input",{type:"checkbox",id:"my_modal_delete",className:"modal-toggle"}),e.jsx("div",{className:"modal modal-middle",children:e.jsxs("div",{className:"modal-box bg-white",children:[e.jsx("h3",{className:"font-bold mb-3 text-lg text-center text-blue-950",children:"Staff Deletion Notice"}),e.jsxs("div",{className:"mb text-blue-950",children:[e.jsx("p",{className:"mb-3",children:"You are about to permanently delete a staff record from your database. This action is irreversible and cannot be undone, and will result in the complete removal of all associated data, including employment history, contact information, and every other staff detail"}),e.jsxs("div",{className:"flex items-center justify-center gap-3 font-semibold  text-[15px]",children:[e.jsxs("p",{children:["If"," ",e.jsx("span",{className:"text-red-500 text-[20px]",children:"YES"})," ","continue,"]}),e.jsxs("p",{className:"",children:["If ",e.jsx("span",{className:"text-[20px]",children:"NO"})," cancel."]})]})]}),e.jsxs("div",{className:"modal-action flex items-center",children:[r?e.jsx(h,{name:"Deleting Staff..",className:"px-3 py-1  bg-red-500 text-[15px] text-white transition-all duration-300 hover:scale-105",icon:r&&e.jsx(E,{color:"white",size:18})}):c&&e.jsx(h,{name:"Delete Staff",className:"px-3 py-3 bg-red-500 text-[15px] text-white transition-all duration-300 hover:scale-105",onClick:()=>I(b[1])}),c?e.jsx("label",{htmlFor:"my_modal_delete",className:"btn text-white py-4 px-6 bg-blue-950 border hover:bg-blue-950 scale-105",onClick:()=>{j([])},children:"Cancel"}):e.jsx("label",{htmlFor:"my_modal_delete",className:"btn text-white py-4 px-6 bg-blue-950 border hover:bg-blue-950 scale-105",onClick:()=>{j([]),t(!0)},children:"Close"})]})]})})]})]})})},a)})})]})]})};export{O as default};
