import{N as P,bP as k,aC as g,eq as D,r as C,er as E,es as R,x as T,m as _,et as H,eu as L,d5 as q,j as e,Q as A,t as Q,E as Y}from"./index-CqzGoYxY.js";const F=()=>{const x=P(),{teacherInfo:s}=k(),r=g(a=>a.payRef),n=g(a=>a.cart),{purchasedData:t}=D(s==null?void 0:s._id);return console.log(),C.useEffect(()=>{r!==""&&E(r).then(a=>{var i,c,d,l,m,h,v,j,o,u,f,N,b,w,y;((d=(c=(i=a==null?void 0:a.data)==null?void 0:i.data)==null?void 0:c.data)==null?void 0:d.gateway_response)==="Successful"&&n.length>0&&R(s==null?void 0:s._id,{date:T((h=(m=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:m.data)==null?void 0:h.createdAt).format("lll"),cart:n,reference:(o=(j=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:j.data)==null?void 0:o.reference,amount:((N=(f=(u=a==null?void 0:a.data)==null?void 0:u.data)==null?void 0:f.data)==null?void 0:N.amount)/100,id:(y=(w=(b=a==null?void 0:a.data)==null?void 0:b.data)==null?void 0:w.data)==null?void 0:y.id,delievered:!1}).then(()=>{_(`api/view-teacher-purchase/${s==null?void 0:s._id}`),x(H(null)),x(L()),x(q(!1))})})},[]),e.jsxs("div",{children:[e.jsx(A,{name:"Purchase History "}),e.jsx("div",{className:"mb-28"}),e.jsx("div",{className:"mb-28"}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",style:{color:"var(--secondary)"},children:[e.jsxs("div",{className:"text-[gray] w-[900px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[180px] border-r",children:"Date Purchased"}),e.jsx("div",{className:"w-[250px] border-r",children:"Items Purchased"}),e.jsx("div",{className:"w-[100px] border-r",children:"Total cost paid"}),e.jsx("div",{className:"w-[150px] border-r",children:"Paid Receipt"}),e.jsx("div",{className:"w-[80px] border-r",children:"delievered"})]}),(t==null?void 0:t.length)>0?e.jsx("div",{className:" w-[900px] overflow-hidden ",children:t==null?void 0:t.map((a,i)=>{var c;return e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  min-h-16 px-4 my-2  overflow-hidden ${i%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[180px] border-r",children:a==null?void 0:a.date}),e.jsx("div",{className:"w-[250px] border-r ",children:(c=a==null?void 0:a.cart)==null?void 0:c.map((d,l)=>e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex items-center gap-3 my-2",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle w-12 h-12",children:e.jsx("img",{src:d!=null&&d.avatar?d==null?void 0:d.avatar:Q,alt:"Avatar"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:d.title}),e.jsxs("div",{className:"text-[12px] opacity-50 ",children:["₦",d.cost.toLocaleString()," * ",d.QTY]})]})]})},l))}),e.jsxs("div",{className:"w-[100px] border-r ml-1",children:["₦",(a==null?void 0:a.amount).toLocaleString()]}),e.jsx("div",{className:"w-[150px] border-r ml-1",children:a==null?void 0:a.reference}),e.jsx("div",{className:"w-[80px] border-r pl-6 ",children:e.jsx("label",{children:e.jsx("input",{checked:a==null?void 0:a.delievered,type:"checkbox",className:"checkbox checkbox-error"})})})]},a)})})})}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Y,{}),e.jsx("p",{className:"mt-2 text-[15px]",children:"You haven't reported any complains yet"})]})]})]})};export{F as default};
