import{N as L,q as A,f9 as C,aC as k,fa as D,bL as H,r as R,e4 as S,fb as q,x as Q,m as T,j as e,Q as Y,t as $,E as F}from"./index-BomD4pl1.js";const B=()=>{L(),Array.from({length:7});const{studentInfo:d}=A();C(d==null?void 0:d._id),k(a=>a.payRef);const P=k(a=>a.cart),{purchasedStore:i}=D(d==null?void 0:d._id),{search:_}=H();let x=_.split("reference=")[1];return console.log(x),R.useEffect(()=>{x!==""&&S(x).then(a=>{var t,s,c,l,r,n,m,h,o,v,j,f,N,b,u,w,g,y;console.log("reading: ",(c=(s=(t=a==null?void 0:a.data)==null?void 0:t.data)==null?void 0:s.data)==null?void 0:c.gateway_response),((n=(r=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:r.data)==null?void 0:n.gateway_response)==="Successful"&&(console.log("running: "),q(d==null?void 0:d._id,{date:Q((o=(h=(m=a==null?void 0:a.data)==null?void 0:m.data)==null?void 0:h.data)==null?void 0:o.createdAt).format("lll"),cart:P,reference:(f=(j=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:j.data)==null?void 0:f.reference,amount:((u=(b=(N=a==null?void 0:a.data)==null?void 0:N.data)==null?void 0:b.data)==null?void 0:u.amount)/100,id:(y=(g=(w=a==null?void 0:a.data)==null?void 0:w.data)==null?void 0:g.data)==null?void 0:y.id,delievered:!1}).then(E=>{console.log("",E),T(`api/view-purchase/${d==null?void 0:d._id}`)}))})},[]),e.jsxs("div",{children:[e.jsx(Y,{name:"Purchase History"}),e.jsx("div",{className:"mb-28"}),e.jsx("div",{className:"mb-28"}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",style:{color:"var(--secondary)"},children:[e.jsxs("div",{className:"text-[gray] w-[900px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[180px] border-r",children:"Date Purchased"}),e.jsx("div",{className:"w-[250px] border-r",children:"Items Purchased"}),e.jsx("div",{className:"w-[100px] border-r",children:"Total cost paid"}),e.jsx("div",{className:"w-[150px] border-r",children:"Paid Receipt"}),e.jsx("div",{className:"w-[80px] border-r",children:"delievered"})]}),(i==null?void 0:i.length)>0?e.jsx("div",{className:" w-[900px] overflow-hidden ",children:i==null?void 0:i.map((a,t)=>{var s;return e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  min-h-16 px-4 my-2  overflow-hidden ${t%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[180px] border-r",children:a==null?void 0:a.date}),e.jsx("div",{className:"w-[250px] border-r ",children:(s=a==null?void 0:a.cart)==null?void 0:s.map((c,l)=>e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex items-center gap-3 my-2",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle w-12 h-12",children:e.jsx("img",{src:c!=null&&c.avatar?c==null?void 0:c.avatar:$,alt:"Avatar"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:c.title}),e.jsxs("div",{className:"text-[12px] opacity-50 ",children:["₦",c.cost.toLocaleString()," * ",c.QTY]})]})]})},l))}),e.jsxs("div",{className:"w-[100px] border-r ml-1",children:["₦",(a==null?void 0:a.amount).toLocaleString()]}),e.jsx("div",{className:"w-[150px] border-r ml-1",children:a==null?void 0:a.reference}),e.jsx("div",{className:"w-[80px] border-r pl-6 ",children:e.jsx("label",{children:e.jsx("input",{checked:a==null?void 0:a.delievered,type:"checkbox",className:"checkbox checkbox-error"})})})]},a)})})})}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(F,{}),e.jsx("p",{className:"mt-2 text-[15px]",children:"You haven't reported any complains yet"})]})]})]})};export{B as default};
