import{aT as j,r as x,bL as N,q as v,N as y,aC as b,dc as w,dd as g,j as t,bW as S,bV as C,x as o,L as P,bS as D,Z as E,a9 as L}from"./index-CpMs4x3j.js";import{h as R}from"./html2canvas-pro.esm-wieJzgtM.js";import{a as k}from"./index-S-ycHTU4.js";const F=()=>{j();const d=x.useRef(null),[i,r]=x.useState({}),f=()=>{const s=d.current;if(!s)return;s.querySelectorAll("*").forEach(c=>{window.getComputedStyle(c).color.includes("oklch")&&(c.style.color="#000000")})};x.useEffect(()=>{f()},[]);const{search:m}=N(),{studentInfo:l}=v();let[h,u]=x.useState("");y();const e=b(s=>s.otherPay);console.log(e),x.useEffect(()=>{console.log(e);let s=setTimeout(()=>{m!==""?(u(m.split("reference=")[1]),m.split("reference=")[1]!==""&&w((l==null?void 0:l._id)||(e==null?void 0:e.studentID),m.split("reference=")[1],e==null?void 0:e.paymentName).then(n=>{var c,a;n.status===200&&r((a=(c=n==null?void 0:n.data)==null?void 0:c.data)==null?void 0:a.data)})):g((l==null?void 0:l._id)||(e==null?void 0:e.studentID),{paymentName:e==null?void 0:e.paymentName,paymentAmount:e==null?void 0:e.amount}).then(n=>{var c;n.status===200&&r((c=n==null?void 0:n.data)==null?void 0:c.data)}),clearTimeout(s)},500)},[h]);const p=()=>{const s=d.current;s&&R(s).then(n=>{const c=n.toDataURL("image/png"),a=new L;a.addImage(c,"PNG",30,10),a.save(`receipt-${o(Date.now()).format("llll")}.pdf`)}).catch(n=>n)};return t.jsx("div",{children:t.jsxs("div",{className:"h-screen w-full flex justify-center items-center flex-col bg-gray-100",children:[t.jsxs("div",{className:"min-h-[72%] w-[88%] md:w-[60%] lg:w-[50%]  bg-white border p-[30px] md:p-[50px] rounded-[3px] ",ref:d,children:[t.jsx("div",{className:"w-full mb-[30px] flex justify-center items-center",children:t.jsx(S,{size:100,className:"text-green-500"})}),t.jsxs("div",{className:"w-full flex justify-center items-center flex-col",children:[t.jsxs("div",{className:"w-full mb-[25px] flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsxs("h1",{className:"text-[25px] md:text-[28px] lg:text-[34px] font-bold",children:[e==null?void 0:e.paymentName," Reciept"]}),t.jsxs("h4",{className:"font-medium italic",children:["Your ",e==null?void 0:e.paymentName,t.jsx("br",{}),t.jsx("span",{className:"text-green-500",children:"payment confirmed"})]})]}),t.jsx("div",{children:t.jsx(C,{className:"text-[25px]"})})]}),t.jsxs("div",{className:"w-full mb-[10px] flex items-center flex-col",children:[t.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[t.jsx("div",{children:"Name"}),t.jsx("div",{className:"font-bold text-end",children:e!=null&&e.name?e==null?void 0:e.name:`${l==null?void 0:l.studentFirstName} ${l==null?void 0:l.studentLastName}`})]}),t.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[t.jsx("div",{children:"Reference number"}),t.jsx("div",{className:"font-bold text-end",children:i==null?void 0:i.reference})]}),t.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[t.jsx("div",{children:"Payment Channel"}),t.jsx("div",{className:"font-bold text-end  capitalize",children:e!=null&&e.channel?e==null?void 0:e.channel:i==null?void 0:i.channel})]}),t.jsxs("div",{className:"w-full flex justify-between items-center",children:[t.jsx("div",{children:"Currency"}),t.jsx("div",{className:"font-bold text-end capitalize",children:e!=null&&e.currency?e==null?void 0:e.currency:i==null?void 0:i.currency})]})]}),t.jsx("div",{className:"w-full border my-[10px]"}),t.jsx("div",{className:"w-full mb-[10px] flex justify-end items-center",children:t.jsxs("div",{children:[t.jsx("div",{className:"text-end",children:"Paid at"}),t.jsx("div",{className:"font-bold text-end",children:o(i==null?void 0:i.createdAt).format("lll")})]})}),t.jsx("div",{className:"w-full border my-[10px]"}),t.jsxs("div",{className:"w-full my-[10px] flex items-center flex-col",children:[t.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[t.jsx("div",{children:"Email"}),t.jsx("div",{className:"font-bold text-end",children:e!=null&&e.email?e==null?void 0:e.email:l==null?void 0:l.email})]}),t.jsxs("div",{className:"w-full flex justify-between items-center",children:[t.jsx("div",{children:"School Name"}),t.jsx("div",{className:"font-bold text-end",children:e!=null&&e.schoolName?e==null?void 0:e.schoolName:l==null?void 0:l.schoolName})]}),t.jsxs("div",{className:"w-full mt-[40px] flex justify-between items-center",children:[t.jsx("div",{className:"font-bold text-[22px] uppercase ",children:"Amount"}),t.jsxs("div",{className:"font-bold text-[22px] text-green-500 text-end",children:["â‚¦",e!=null&&e.amount?parseFloat(e==null?void 0:e.amount).toLocaleString():((i==null?void 0:i.amount)/100).toLocaleString()]})]})]})]})]}),t.jsx("br",{}),t.jsx("br",{}),t.jsxs("div",{className:"w-full mt-[20px] flex justify-center items-center gap-10",children:[t.jsxs("div",{className:"py-3 px-6 bg-blue-950 text-white flex items-center gap-2 rounded-md cursor-pointer",onClick:p,children:[t.jsx("div",{children:"Download Reciept"}),t.jsx(k,{className:"mb-1"})]}),t.jsx(P,{to:"/dashboard",className:"i underline text-blue-950 text-[18px] text-",onClick:()=>{m.split("reference=")[1]!==""&&D(m.split("reference=")[1]).then(s=>{var n,c,a;s.status&&E(l==null?void 0:l._id,{date:o((n=s==null?void 0:s.data)==null?void 0:n.createdAt).format("lll"),amount:((c=s==null?void 0:s.data)==null?void 0:c.amount)/1e3,reference:(a=s==null?void 0:s.data)==null?void 0:a.reference,purchasedID:s==null?void 0:s.data.id})})},children:t.jsx("div",{children:"Back to dashboard"})})]})]})})};export{F as default};
