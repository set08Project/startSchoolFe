import{bP as T,o as b,ay as _,bR as k,c5 as I,aq as o,j as e,I as F,Q as R,E as V,c2 as S,c4 as q,t as B,z as E}from"./index-CqzGoYxY.js";document.title="View  Result History";const G=({props:d,el:l})=>{var i,c,r;const{gradeData:n}=S(d==null?void 0:d._id),{session:t,term:a}=b();let s=(r=(c=(i=n==null?void 0:n.reportCard)==null?void 0:i.find(m=>m.classInfo===`${d==null?void 0:d.classAssigned} session: ${t.replace("-","/")}(${a.replace("-"," ")})`))==null?void 0:c.result)==null?void 0:r.find(m=>m.subject===(l==null?void 0:l.subjectTitle));return e.jsx("div",{className:"w-[260px] border-r-2 border-blue-950 ",children:e.jsxs("div",{className:"pl-1 flex gap-1 mt-2 text-[12px] ",children:[e.jsx("p",{className:"w-[30px] border-r",children:s!=null&&s.test1?s==null?void 0:s.test1:0}),e.jsx("p",{className:"w-[30px] border-r",children:s!=null&&s.test2?s==null?void 0:s.test2:0}),e.jsx("p",{className:"w-[30px] border-r",children:s!=null&&s.test3?s==null?void 0:s.test3:0}),e.jsx("p",{className:"w-[30px] border-r",children:s!=null&&s.test4?s==null?void 0:s.test4:0}),e.jsx("p",{className:"w-[35px] border-r",children:s!=null&&s.exam?s==null?void 0:s.exam:0}),e.jsx("p",{className:"w-[35px] font-bold border-r",children:s!=null&&s.mark?s==null?void 0:s.mark:0}),e.jsx("p",{className:"w-[35px] font-bold",children:s!=null&&s.grade?s==null?void 0:s.grade:"Nill"})]})})},H=({props:d,i:l,getClass:n})=>{var m;const{gradeData:t}=S(d==null?void 0:d._id),{oneClass:a}=q(d==null?void 0:d.presentClassID),{subjectData:s}=I(a==null?void 0:a._id),{session:i,term:c}=b();let r=t==null?void 0:t.reportCard.find(x=>x.classInfo===`${n} session: ${i.replace("-","/")}(${c.replace("-"," ")})`);return e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  h-16 px-4 my-2  overflow-hidden ${l%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[100px] border-r font-bold",children:l+1}),e.jsx("div",{className:"w-[250px] flex border-r",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{className:" mask mask-squircle w-14 h-14 rounded-md border object-cover",src:d!=null&&d.avatar?d==null?void 0:d.avatar:B}),e.jsxs("div",{className:"w-[180px] ",children:[" ",d==null?void 0:d.studentFirstName," ",d==null?void 0:d.studentLastName]})]})}),e.jsx("div",{className:"uppercase",children:c==="1st-Term"?d!=null&&d.feesPaid1st?e.jsx("div",{className:"w-[100px] border-r",children:"Paid"}):e.jsx("div",{className:"w-[100px] border-r text-red-500 uppercase",children:"Unpaid"}):c==="2nd-Term"?d!=null&&d.feesPaid2nd?e.jsx("div",{className:"w-[100px] border-r",children:"Paid"}):e.jsx("div",{className:"w-[100px] border-r text-red-500",children:"UnPaid"}):c==="3rd-Term"?d!=null&&d.feesPaid3rd?e.jsx("div",{className:"w-[100px] border-r",children:"Paid"}):e.jsx("div",{className:"w-[100px] border-r text-red-500",children:"UnPaid"}):null}),e.jsx("div",{className:"w-[100px] border-r",children:e.jsx(O,{props:d})}),e.jsx("div",{className:"w-[100px] border-r",children:r==null?void 0:r.grade}),e.jsx("div",{className:`w-[${(s==null?void 0:s.classSubjects.length)*260}px]  border-r items-center flex`,children:e.jsx("div",{className:"flex gap-4 ",children:(m=o.sortBy(s==null?void 0:s.classSubjects,"subjectTitle"))==null?void 0:m.map((x,j)=>e.jsx(G,{props:d,el:x},j))})}),e.jsx("div",{className:"w-2 border-r"}),e.jsx("div",{className:"w-[300px] border-r",children:r==null?void 0:r.classTeacherComment}),e.jsx("div",{className:"w-[300px] border-r",children:r==null?void 0:r.adminComment})]})},O=({props:d})=>{var n,t,a,s,i,c,r,m;const{mainStudentAttendance:l}=E(d==null?void 0:d._id);return e.jsxs("div",{children:[isNaN(((t=(n=l==null?void 0:l.data)==null?void 0:n.attendance)==null?void 0:t.filter(x=>x.present===!0).length)/((s=(a=l==null?void 0:l.data)==null?void 0:a.attendance)==null?void 0:s.length)*100)?0:(((c=(i=l==null?void 0:l.data)==null?void 0:i.attendance)==null?void 0:c.filter(x=>x.present===!0).length)/((m=(r=l==null?void 0:l.data)==null?void 0:r.attendance)==null?void 0:m.length)*100).toFixed(2),"%"]})},U=({props:d})=>e.jsxs("div",{className:"w-[260px] border-r ",children:[e.jsx("p",{className:"pl-3 font-bold text-[15px]",children:d==null?void 0:d.subjectTitle}),e.jsxs("div",{className:"pl-1 flex gap-1 mt-2 text-[10px] ",children:[e.jsx("p",{className:"w-[30px] border-r",children:"1st"}),e.jsx("p",{className:"w-[30px] border-r",children:"2nd"}),e.jsx("p",{className:"w-[30px] border-r",children:"3rd"}),e.jsx("p",{className:"w-[30px] border-r",children:"4th"}),e.jsx("p",{className:"w-[35px] border-r",children:"Exam"}),e.jsx("p",{className:"w-[35px] ",children:"Total"}),e.jsx("p",{className:"w-[35px] ",children:"Grade"})]})]}),M=()=>{var j,w,v,f,g,y,u,$,C,P;T();const{termID:d,ID:l,term:n,session:t}=b(),{sessionTermData:a}=_(d);document.title=`Viewing ${(j=a==null?void 0:a.data)==null?void 0:j.year} session of ${(w=a==null?void 0:a.data)==null?void 0:w.presentTerm}`;const s=(f=(v=a==null?void 0:a.data)==null?void 0:v.classResult)==null?void 0:f.find(h=>h._id===l),{classAcademicHistory:i}=k(s==null?void 0:s._id),{subjectData:c}=I(i==null?void 0:i._id);let r=o.groupBy(i==null?void 0:i.classHistory,"session");const x=Object.values(r).flat().find(h=>h.term===n.replace("-"," ")&&h.session===t.replace("-","/"));return e.jsxs("div",{className:"",children:[e.jsx(F,{position:"top-center",reverseOrder:!0}),e.jsx("div",{className:"mb-0"}),e.jsx(R,{name:`Viewing ${s==null?void 0:s.className} ${(g=a==null?void 0:a.data)==null?void 0:g.year} session of ${(y=a==null?void 0:a.data)==null?void 0:y.presentTerm}`}),e.jsx("div",{className:"mt-10"}),e.jsx("div",{className:"flex w-full justify-end"}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",children:[e.jsxs("div",{className:"text-[gray] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",style:{width:`${1372+(c==null?void 0:c.classSubjects.length)*260}px`},children:[e.jsx("div",{className:"w-[100px] border-r",children:"Sequence"}),e.jsx("div",{className:"w-[250px] border-r",children:"student Info"}),e.jsxs("div",{className:"w-[100px] border-r",children:["SchoolFee ",e.jsx("br",{}),"Info"]}),e.jsx("div",{className:"w-[100px] border-r",children:"Student's Attendance Ratio"}),e.jsx("div",{className:"w-[100px] border-r",children:"Total Points"}),e.jsx("div",{className:`w-[${((u=c==null?void 0:c.classSubjects)==null?void 0:u.length)*260}px] border-r`,children:e.jsxs("div",{className:" flex flex-col",children:[e.jsx("div",{className:"mb-2 font-bold text-blue-950",children:"Grades"}),e.jsx("div",{className:"flex gap-4",children:($=o.sortBy(c==null?void 0:c.classSubjects,"subjectTitle"))==null?void 0:$.map((h,N)=>e.jsx(U,{props:h},N))})]})}),e.jsx("div",{className:"w-2 "}),e.jsx("div",{className:"w-[300px] border-r",children:"Class Teacher's Comment"}),e.jsx("div",{className:"w-[300px] border-r",children:"Principal's Teacher's Comment"})]}),e.jsx("div",{className:" overflow-hidden w-[2000px] ",style:{width:`${1372+(c==null?void 0:c.classSubjects.length)*260}px`},children:((C=x==null?void 0:x.resultHistory)==null?void 0:C.length)>0?e.jsx("div",{children:(P=x==null?void 0:x.resultHistory)==null?void 0:P.map((h,N)=>e.jsx("div",{children:e.jsx(H,{props:h,i:N,getClass:s==null?void 0:s.className})},N))}):e.jsxs("div",{className:"flex items-center justify-center flex-col w-[20%] font-semibold",children:[e.jsx(V,{className:"my-2"}),e.jsx("p",{children:"No student Data Captured yet"})]})})]})]})};export{M as default};
