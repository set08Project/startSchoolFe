import{aT as N,r as d,bL as b,q as w,bS as o,Z as f,x as r,j as e,bW as y,bV as g,L as S,a9 as C}from"./index-C_ozXG6-.js";import{h as P}from"./html2canvas-pro.esm-wieJzgtM.js";import{a as D}from"./index-CztZPaTQ.js";const L=()=>{N();const x=d.useRef(null),[a,u]=d.useState({}),h=()=>{const l=x.current;if(!l)return;l.querySelectorAll("*").forEach(i=>{window.getComputedStyle(i).color.includes("oklch")&&(i.style.color="#000000")})};d.useEffect(()=>{h()},[]);const{search:n}=b(),{studentInfo:s}=w();let[p,j]=d.useState("");d.useEffect(()=>{let l=setTimeout(()=>{j(n.split("reference=")[1]),n.split("reference=")[1]!==""&&o(n.split("reference=")[1]).then(t=>{var i,c,m;t.status===!0&&(u(t==null?void 0:t.data),f(s==null?void 0:s._id,{date:r((i=t==null?void 0:t.data)==null?void 0:i.createdAt).format("lll"),amount:((c=t==null?void 0:t.data)==null?void 0:c.amount)/100,reference:(m=t==null?void 0:t.data)==null?void 0:m.reference,purchasedID:t==null?void 0:t.data.id}))}),clearTimeout(l)},100)},[p]);const v=()=>{const l=x.current;l&&P(l).then(t=>{const i=t.toDataURL("image/png"),c=new C;c.addImage(i,"PNG",30,10),c.save(`receipt-${r(Date.now()).format("llll")}.pdf`)}).catch(t=>t)};return e.jsx("div",{children:e.jsxs("div",{className:"h-screen w-full flex justify-center items-center flex-col bg-gray-100",children:[e.jsxs("div",{className:"min-h-[72%] w-[88%] md:w-[60%] lg:w-[50%]  bg-white border p-[30px] md:p-[50px] rounded-[3px] ",ref:x,children:[e.jsx("div",{className:"w-full mb-[30px] flex justify-center items-center",children:e.jsx(y,{size:100,className:"text-green-500"})}),e.jsxs("div",{className:"w-full flex justify-center items-center flex-col",children:[e.jsxs("div",{className:"w-full mb-[25px] flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[25px] md:text-[28px] lg:text-[34px] font-bold",children:"School Fee Reciept"}),e.jsxs("h4",{className:"font-medium italic",children:["Your school fee",e.jsx("br",{}),e.jsx("span",{className:"text-green-500",children:"payment confirmed"})]})]}),e.jsx("div",{children:e.jsx(g,{className:"text-[25px]"})})]}),e.jsxs("div",{className:"w-full mb-[10px] flex items-center flex-col",children:[e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Name"}),e.jsxs("div",{className:"font-bold text-end",children:[s==null?void 0:s.studentFirstName," ",s==null?void 0:s.studentLastName]})]}),e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Reference number"}),e.jsx("div",{className:"font-bold text-end",children:a==null?void 0:a.reference})]}),e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Payment Channel"}),e.jsx("div",{className:"font-bold text-end  capitalize",children:a==null?void 0:a.channel})]}),e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("div",{children:"Currency"}),e.jsx("div",{className:"font-bold text-end capitalize",children:a==null?void 0:a.currency})]})]}),e.jsx("div",{className:"w-full border my-[10px]"}),e.jsx("div",{className:"w-full mb-[10px] flex justify-end items-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-end",children:"Paid at"}),e.jsx("div",{className:"font-bold text-end",children:r(a==null?void 0:a.createdAt).format("lll")})]})}),e.jsx("div",{className:"w-full border my-[10px]"}),e.jsxs("div",{className:"w-full my-[10px] flex items-center flex-col",children:[e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Email"}),e.jsx("div",{className:"font-bold text-end",children:s==null?void 0:s.email})]}),e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("div",{children:"School Name"}),e.jsx("div",{className:"font-bold text-end",children:s==null?void 0:s.schoolName})]}),e.jsxs("div",{className:"w-full mt-[40px] flex justify-between items-center",children:[e.jsx("div",{className:"font-bold text-[22px] uppercase ",children:"Amount"}),e.jsxs("div",{className:"font-bold text-[22px] text-green-500 text-end",children:["â‚¦",((a==null?void 0:a.amount)/100).toLocaleString()]})]})]})]})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"w-full mt-[20px] flex justify-center items-center gap-10",children:[e.jsxs("div",{className:"py-3 px-6 bg-blue-950 text-white flex items-center gap-2 rounded-md cursor-pointer",onClick:v,children:[e.jsx("div",{children:"Download Reciept"}),e.jsx(D,{className:"mb-1"})]}),e.jsx(S,{to:"/dashboard",className:"i underline text-blue-950 text-[18px] text-",onClick:()=>{n.split("reference=")[1]!==""&&o(n.split("reference=")[1]).then(l=>{var t,i,c;l.status&&f(s==null?void 0:s._id,{date:r((t=l==null?void 0:l.data)==null?void 0:t.createdAt).format("lll"),amount:((i=l==null?void 0:l.data)==null?void 0:i.amount)/1e3,reference:(c=l==null?void 0:l.data)==null?void 0:c.reference,purchasedID:l==null?void 0:l.data.id})})},children:e.jsx("div",{children:"Back to dashboard"})})]})]})})};export{L as default};
