import{N as I,aC as f,u as V,d3 as D,j as e,t as Q,d4 as z,E as M,o as Y,l as U,da as H,cO as B,B as b,db as E,d5 as g,r as j,k as J,br as T,bs as O,m as X,e as k}from"./index-CqzGoYxY.js";import{U as F}from"./index-DAN0tJMS.js";import{a as q}from"./index-J1SprvZ4.js";import{c as G}from"./index-fPLmo-SF.js";import{f as K}from"./index-CnwWbySH.js";import{I as p}from"./Input-XqTDE8gb.js";import{C as W}from"./ClipLoader-CvQNUcRF.js";const Z=()=>{var r,m;const d=I();f(l=>l==null?void 0:l.cart),f(l=>l==null?void 0:l.cartToggle);const{data:a}=V(),{store:t}=D(a==null?void 0:a._id);return document.title="View Store ",e.jsx("div",{children:((r=t==null?void 0:t.data)==null?void 0:r.length)>0?e.jsxs("div",{children:[" ",e.jsxs("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4",children:[(m=t==null?void 0:t.data)==null?void 0:m.map((l,v)=>{var h;return e.jsxs("div",{className:"card min-w-60 bg-base-100 shadow-sm border rounded-md pb-0",children:[e.jsx("figure",{children:e.jsx(F,{alt:l==null?void 0:l.title,thumbhash:"1QcSHQRnh493V4dIh4eXh1h4kJUI",src:l!=null&&l.avatar?l==null?void 0:l.avatar:Q,autoSizes:!0,className:"h-[290px] w-full object-cover"})}),e.jsxs("div",{className:"card-body pb-4 px-3",children:[e.jsx("h2",{className:"card-title",children:l==null?void 0:l.title}),e.jsxs("div",{className:"flex justify-between items-center w-full text-wrap",children:[e.jsx("p",{className:"text-[12px] font-medium break-words overflow-hidden overflow-ellipsis",children:l==null?void 0:l.description}),e.jsxs("p",{className:"flex justify-end font-bold",children:[" ","₦",(h=l==null?void 0:l.cost)==null?void 0:h.toLocaleString()]})]}),e.jsx("div",{className:"card-actions justify-end",children:e.jsx("button",{className:"btn bg-blue-950 hover:bg-blue-900 text-white rounded-md mt-4 ",onClick:()=>{d(z(l))},children:"Add to Cart"})})]})]},l==null?void 0:l._id)})," "]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-1 mt-3",children:[e.jsx(M,{size:13}),e.jsx("p",{className:"mt-3 text-[12px] font-medium",children:"No Items in your collection yet"})]})})},ee=()=>e.jsx("div",{children:"StoreItems"}),se=()=>{var h,o,x;V();const d=I(),{_id:a}=Y(),t=f(s=>s==null?void 0:s.cart);f(s=>{var c;return(c=s==null?void 0:s.cart)==null?void 0:c.find(n=>(n==null?void 0:n._id)===a)});const r=f(s=>s==null?void 0:s.cartToggle),m=()=>{document.startViewTransition?document.startViewTransition(()=>{d(g(!r))}):d(g(!r))},l=(o=(h=t==null?void 0:t.map(s=>(s==null?void 0:s.cost)*(s==null?void 0:s.QTY)))==null?void 0:h.reduce((s,c)=>s+c,0))==null?void 0:o.toLocaleString(),v=(((x=t==null?void 0:t.map(s=>s.cost*s.QTY))==null?void 0:x.reduce((s,c)=>s+c,0))+500).toLocaleString();return e.jsxs("div",{className:"flex w-full h-full flex-col items-center ",children:[e.jsx("div",{className:"flex w-full  justify-between  ",children:e.jsxs("div",{className:" flex items-center justify-between px-3 w-full",children:[e.jsx("div",{className:"text-red-600 text-[12px]",children:"Using this store requires ₦500 charges for payment"}),e.jsx("div",{children:e.jsx(U,{size:30,className:`mr-10 my-5 cursor-pointer hover:text-red-600 hover:rotate-180 transition-all duration-300\r
          flex justify-center items-center rounded-full hover:bg-neutral-300\r
          `,onClick:m})})]})}),e.jsx("div",{className:" w-full min-h-[50vh] flex justify-center",children:e.jsxs("div",{className:" grid grid-rows-2 lg:grid-cols-6 px-4 gap-5 w-full",children:[t.length>0?e.jsxs("div",{className:"rounded-md shadow-lg border col-span-4",children:[e.jsxs("div",{className:" px-2 py-3",children:["CART(",t.length,")"]}),t==null?void 0:t.map(s=>{var c;return e.jsxs("div",{className:" w-full border-y py-3 px-2 grid grid-cols-5 gap-2 mb-3",children:[e.jsxs("div",{className:" col-span-4",children:[e.jsxs("div",{className:" flex gap-5",children:[e.jsx("div",{className:" w-[30%]",children:e.jsx(F,{alt:s==null?void 0:s.title,thumbhash:"1QcSHQRnh493V4dIh4eXh1h4kJUI",src:s==null?void 0:s.avatar,autoSizes:!0,className:"w-[140px] object-cover h-[120px] border rounded-lg ml-2"})}),e.jsxs("div",{className:" w-[70%] text-wrap",children:[e.jsx("p",{className:"font-bold text-[18px]",children:s==null?void 0:s.title}),e.jsxs("p",{className:"leading-tight text-neutral-900 break-words overflow-hidden overflow-ellipsis",children:[s==null?void 0:s.description," "]})]})]}),e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"gap-3 flex ml-2 mt-4 cursor-pointer p-2 hover:bg-slate-100 transition-all duration-300 rounded-md text-red-600 items-center",onClick:()=>{d(H(s))},children:[e.jsx("div",{children:e.jsx(B,{size:20})}),e.jsx("p",{className:"mr-2 text-[12px] mt-1 font-semibold ",children:"Remove Item"})]})})]}),e.jsxs("div",{className:" col-span-1 flex flex-col justify-center items-end gap-y-2",children:[e.jsxs("div",{className:"font-semibold",children:["₦",(c=s==null?void 0:s.cost)==null?void 0:c.toLocaleString()]}),e.jsx("div",{className:"capitalize text-[12px]",children:"no discount"}),e.jsxs("div",{className:" flex items-center",children:[e.jsx("div",{children:e.jsx(b,{name:e.jsx(q,{size:15,className:" mr-1"}),className:" bg-red-600 px-1 py-2",onClick:()=>{d(E(s))}})}),e.jsx("p",{className:" text-[18px]",children:s==null?void 0:s.QTY}),e.jsx("div",{children:e.jsx(b,{name:e.jsx(G,{size:15,className:" mr-1"}),className:" bg-blue-950 px-1 py-2",onClick:()=>{d(z(s))}})})]})]})]},s==null?void 0:s._id)})]}):e.jsx("div",{children:"Not Yet"}),e.jsx("div",{className:"col-span-2",children:t.length>0?e.jsx("div",{className:" min-h-[210px] rounded-md shadow-md ",children:e.jsxs("div",{className:" p-3",children:[e.jsx("div",{className:" py-2",children:"CART SUMMARY"}),e.jsxs("div",{className:" flex border-y py-3 justify-between",children:[e.jsx("p",{children:"Subtotal"}),e.jsxs("p",{className:"font-semibold",children:["₦",l.toLocaleString()]})]}),e.jsxs("div",{className:" flex border-y py-3 justify-between",children:[e.jsx("p",{children:"service Charge"}),e.jsx("p",{children:"₦500"})]}),e.jsx("div",{className:"hover:scale-[102%]  transition-all duration-300 mt-6 flex justify-center items-center",children:e.jsx(b,{name:`Checkout ₦${v.toLocaleString()}`,className:" bg-blue-950"})})]})}):e.jsx("div",{})})]})})]})};document.title="School's Store";const re=()=>{const d=I(),{data:a}=V(),[t,r]=j.useState(!1),m=f(i=>i.cartToggle),l=f(i=>i==null?void 0:i.cart),v=()=>{document.startViewTransition?document.startViewTransition(()=>{r(!t),d(g(!1))}):(r(!t),d(g(!1)))},h=()=>{document.startViewTransition?document.startViewTransition(()=>{r(!t),d(g(!m))}):(r(!t),d(g(!m)))},[o,x]=j.useState(""),[s,c]=j.useState(""),[n,N]=j.useState(0),[_,w]=j.useState(""),[P,y]=j.useState(""),[R,S]=j.useState(!1),$=i=>{const u=i.target.files[0],C=URL.createObjectURL(u);y(C),w(u)},A=()=>{S(!0);const i=new FormData;i.append("title",o),i.append("cost",`${n}`),i.append("description",`${s}`),i.append("avatar",_),_!==""?O(a==null?void 0:a._id,i).then(u=>{var C,L;u.status===201?(X(`api/view-store/${a==null?void 0:a._id}`),S(!1),k.success("Product Uploaded"),N(0),y(""),c(""),x(""),w("")):(S(!1),k.error(`${(L=(C=u==null?void 0:u.response)==null?void 0:C.data)==null?void 0:L.message}`),N(0),y(""),c(""),x(""),w("")),c(""),x(""),w("")}).then(()=>{N(0),y(""),c(""),x("")}):(S(!1),k.error("Image is not included"))};return e.jsxs("div",{className:"text-blue-950 relative",children:[e.jsx(J,{name:t?"School's Store":"School's items"}),e.jsxs("div",{className:"flex justify-between mb-10 w-full",children:[e.jsxs("div",{className:" flex items-center gap-3",children:[e.jsx("label",{htmlFor:"add_to_store",className:"px-5 py-2 border rounded-md m-2 overflow-hidden flex items-center justify-center text-white text-[11px] md:text-[13px] ml-0 bg-green-500 cursor-pointer hover:scale-105 transition-all duration-300 md:hidden",children:"Add item to Store"}),e.jsx("input",{type:"checkbox",id:"add_to_store",className:"modal-toggle"}),e.jsxs("div",{className:"modal rounded-md",role:"dialog",children:[e.jsxs("div",{className:"modal-box  rounded-md bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between my-4 ",children:[e.jsx("p",{className:"font-bold",children:"Add New Items to Store"}),e.jsx("label",{htmlFor:"add_to_store",className:`${(a==null?void 0:a.categoryType)==="Secondary"?"hover:bg-blue-50 ":"hover:bg-red-50 "} transition-all duration-300  cursor-pointer rounded-full flex items-center justify-center w-6 h-6 font-bold `,children:e.jsx(U,{})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-2 leading-tight text-[13px] font-medium text-left",children:["Please note that by assigning this subject to this class, it automtically becomes one of the class must take suject.",e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flex gap-2  items-center",children:[e.jsxs("p",{children:[" Product Title: ",o]}),o&&e.jsxs("div",{className:"flex items-center font-bold",children:[e.jsx("span",{children:"selected"}),e.jsx(T,{className:"text-green-500 text-[25px] mb-1 "})]})]}),e.jsxs("div",{className:"flex gap-2  items-center",children:[e.jsxs("p",{children:[" Product Cost: ",n>0&&n]}),n&&e.jsxs("div",{className:"flex items-center font-bold",children:[e.jsx("span",{children:"selected"}),e.jsx(T,{className:"text-green-500 text-[25px] mb-1 "})]})]}),e.jsxs("div",{className:"flex gap-2  items-center",children:[e.jsxs("p",{children:[" Product Description: ",s.slice(0,30),"..."]}),s&&e.jsxs("div",{className:"flex items-center font-bold",children:[e.jsx("span",{children:"selected"}),e.jsx(T,{className:"text-green-500 text-[25px] mb-1 "})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"mt-10 flex gap-4 w-full justify-start",children:[e.jsx("label",{className:` text-white ${(a==null?void 0:a.categoryType)==="Secondary"?"bg-blue-950":"bg-red-950"} border px-6 py-3 cursor-pointer rounded-md  mt-4`,htmlFor:"pix",children:"Upload Image"}),P&&e.jsx("img",{className:"w-16 h-10 border rounded-md mt-4 object-cover",src:P}),e.jsx("input",{id:"pix",className:"hidden",type:"file",onChange:$})]})}),e.jsx("div",{className:"mt-4 w-full gap-2 flex flex-col items-center text-left",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:"font-medium text-[12px] mt-4",children:["Product Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{className:" w-full mt-2 mb-8 ml-0",placeholder:"ProductTitle",value:o,defaultValue:o,onChange:i=>{x(i.target.value)}}),e.jsxs("div",{className:"flex w-full gap-2 mb-10",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:"font-medium text-[12px]",children:["Product Cost ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{value:n,type:"number",defaultValue:n,placeholder:"Product Cost",className:"w-full mt-2 ml-0",onChange:i=>{N(i.target.value)}})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:"font-medium text-[12px]",children:["Product Description"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(p,{value:s,placeholder:"Product Description",className:"ml-0 w-full mt-2",defaultValue:s,onChange:i=>{c(i.target.value)}})]})]})]})}),e.jsx("div",{className:"w-full flex justify-end transition-all duration-300",children:o!==""&&n!==0&&s!==""?e.jsx("label",{htmlFor:"add_to_store",className:`${(a==null?void 0:a.categoryType)==="Secondary"?"bg-blue-950":"bg-red-950"} text-white py-4 px-8 rounded-md cursor-pointer transition-all duration-300`,onClick:()=>{A()},children:R?e.jsxs("div",{children:[e.jsx(W,{size:10,color:"white"}),e.jsx("span",{className:"ml-2",children:"Loading...."})]}):"Proceed"}):e.jsx(b,{name:"Can't Proceed",className:`bg-[lightgray] ${(a==null?void 0:a.categoryType)==="Secondary"?"text-blue-950":"text-green-950"} mx-0 cursor-not-allowed`})})]}),e.jsx("label",{className:"modal-backdrop",htmlFor:"add_to_store",children:"Close"})]}),e.jsx(b,{name:"Store View",className:"ml-0 bg-orange-500  ",onClick:v}),e.jsx(b,{name:"Store Items",className:"ml-0 bg-blue-950 ",onClick:v})]}),e.jsx("div",{className:" flex items-center",children:e.jsx("div",{className:"w-full flex justify-end mb-5",children:e.jsxs("div",{className:"mr-10 relative cursor-pointer",onClick:h,children:[e.jsx(K,{size:27}),e.jsx("div",{className:"absolute -top-1 flex justify-center items-center bg-red-500 text-white rounded-full w-4 h-4 text-[12px] font-medium -right-1",children:l==null?void 0:l.length})]})})})]}),e.jsxs("div",{className:"border rounded-md w-full relative",children:[e.jsx("div",{className:"p-2",children:t?e.jsx(Z,{}):e.jsx(ee,{})}),m&&e.jsx("div",{className:`absolute top-0 p-0 w-full min-h-full pb-10\r
             rounded-md bg-white`,style:{boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(73, 154, 255, 0.3)"},children:e.jsx(se,{})})]})]})};export{re as default};
