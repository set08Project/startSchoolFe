import{r as t,u as $,c9 as E,ca as L,j as e,I as M,L as F,x as O,cb as P,e as f,m as w,cc as B}from"./index-C_ozXG6-.js";import{I as R}from"./Input-C4lfnqzh.js";const z=()=>{var v,N,g,p;const[o,y]=t.useState(),[x,_]=t.useState(),[m,C]=t.useState(),[h,S]=t.useState(),[u,T]=t.useState(),[b,I]=t.useState(),[j,k]=t.useState(""),{data:l}=$(),{termlyExpense:r}=E(l==null?void 0:l._id),{termBudget:a}=L(l==null?void 0:l._id),A=async()=>{await P(l==null?void 0:l._id,o).then(s=>{f.success("budget created successfully"),w(`api/view-term-budget/${l==null?void 0:l._id}`)})},D=async()=>{await B(l==null?void 0:l._id,{item:m,description:h,paymentCategory:u,amount:parseInt(x),paymentMode:b}).then(()=>{f.success("Expense created successfully"),w(`api/view-expense/${l==null?void 0:l._id}`)})},d=(N=(v=r==null?void 0:r.data)==null?void 0:v.expense)==null?void 0:N.map(s=>s!=null&&s.amount?s==null?void 0:s.amount:0).reduce((s,c)=>s+c,0),i=(g=r==null?void 0:r.data)==null?void 0:g.expense,n=i==null?void 0:i.filter(s=>`${s==null?void 0:s.item} ${s==null?void 0:s.paymentMode}`.toLowerCase().includes(j.toLowerCase()));return e.jsxs("div",{children:[e.jsx(M,{position:"top-center",reverseOrder:!0}),e.jsxs("div",{className:"flex w-full justify-between items-start mb-5",children:[e.jsx("div",{className:"modal-action",children:e.jsx("label",{htmlFor:"my_modal_expenses",className:"py-4 px-6  border rounded-md font-bold bg-red-500 text-[12px] text-white transition-all duration-300 hover:scale-105 cursor-pointer inline-block text-center uppercase",children:"Set Budget for the Term"})}),e.jsx("input",{type:"checkbox",id:"my_modal_expenses",className:"modal-toggle"}),e.jsx("div",{className:"modal modal-middle",children:e.jsxs("div",{className:"modal-box bg-white",children:[e.jsx("label",{htmlFor:"my_modal_expenses",className:"btn text-white py-4 px-6 bg-red-500 border hover:bg-red-600 scale-105",onClick:A,children:"Budget Set"}),e.jsx("input",{className:"h-[45px] text-[12px] px-2 w-[68%] border rounded-md ml-3 ",placeholder:"set termly budget in Naira eg: 203000",value:o,onChange:s=>{y(s.target.value)}}),e.jsx("label",{htmlFor:"my_modal_expenses",className:"btn text-white py-4 px-6 bg-blue-950 border hover: scale-105 mt-7",children:"close"})]})})]}),e.jsxs("div",{className:"w-full mb-[50px] min-h-[150px] grid grid-cols-1 lg:grid-cols-2 gap-3 transition-all duration-300",children:[e.jsxs("div",{className:" border rounded-md grid grid-cols-2",children:[e.jsxs("div",{className:"h-full p-2",children:[e.jsx("div",{className:"font-semibold mb-5",children:"EXPENDITURE DASHBOARD"}),e.jsx("h4",{className:"mb-1 font-medium",children:"Main Budget :"}),e.jsxs("h1",{className:`mb-2 font-bold text-[25px] ${(l==null?void 0:l.categoryType)==="Secondary"?"text-blue-950":"text-green-950"}`,children:["₦",(p=a==null?void 0:a.data)==null?void 0:p.toLocaleString()]}),e.jsxs("div",{className:`flex items-center gap-[10px] ${(l==null?void 0:l.categoryType)==="Secondary"?"text-blue-950":"text-green-950"} text-[12px]`,children:[e.jsx("div",{children:"Currency: "}),e.jsx("div",{children:"Naira (₦)"})]})]}),e.jsx("div",{className:"h-full p-2 flex items-center justify-center",children:e.jsxs("div",{className:"w-full p-2 h-full rounded-l-[inherit] border md:rounded-md md:h-[90%]",children:[e.jsx("h4",{className:"mb-3 font-medium",children:"Total Expenses :"}),e.jsxs("h1",{className:`font-bold text-[25px] ${d>(a==null?void 0:a.data)?"text-red-500":"text-green-500"} text-blue-950`,children:["₦",d==null?void 0:d.toLocaleString()]}),d<(a==null?void 0:a.data)?e.jsxs("p",{className:"text-[12px] font-semibold",children:["Still within ",e.jsx("strong",{children:"BUDGET"})]}):e.jsxs("p",{className:"text-[12px] font-semibold",children:["Out of ",e.jsx("strong",{children:"BUDGET"})," by"," ",e.jsxs("span",{className:"text-red-500",children:["₦",(((a==null?void 0:a.data)-d)*-1).toLocaleString()]})]})]})})]}),e.jsx("div",{className:"border h-full rounded-md p-2 text-[12px]",children:"Chart"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex w-full justify-between items-start",children:[e.jsx(R,{placeholder:"Search for expense Item Or Payment Mode",className:"ml-1",value:j,onChange:s=>k(s.target.value)}),e.jsx("div",{className:"modal-action ml-6",children:e.jsx("label",{htmlFor:"my_modal_expenses_modal",className:`py-4 px-6 ml-3 border rounded-md ${(l==null?void 0:l.categoryType)==="Secondary"?"bg-blue-950":"bg-red-950"} text-[12px] text-white transition-all duration-300 hover:scale-105 cursor-pointer inline-block text-center`,children:"Record An Expenditure"})})]}),e.jsx("input",{type:"checkbox",id:"my_modal_expenses_modal",className:"modal-toggle"}),e.jsx("div",{className:"modal modal-middle",children:e.jsx("div",{className:"modal-box bg-white flex flex-col",children:e.jsxs("div",{children:[e.jsxs("main",{children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold",children:"Name of Item"}),e.jsx("input",{className:"h-[45px] text-[12px] px-2 w-full border rounded-md mb-2 ",placeholder:"A4 paper, Cleaning Agents etc",value:m,onChange:s=>{C(s.target.value)}})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"font-semibold",children:"Description of the Item"}),e.jsx("textarea",{className:"min-h-[100px] resize-none text-[12px] px-2 w-full border rounded-md mb-2 ",placeholder:"Description",value:h,onChange:s=>{S(s.target.value)}})]}),e.jsxs("div",{className:"flex flex-col mb-5",children:[e.jsx("label",{className:"font-semibold",children:"Item Amount"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"h-[45px]  text-[12px] px-2 w-full border rounded-md mb-2 ",placeholder:"₦2000 etc",value:x,onChange:s=>{_(s.target.value)}}),e.jsxs("select",{className:"select select-bordered w-full max-w-xs",value:b,onChange:s=>{I(s.target.value)},children:[e.jsx("option",{disabled:!0,selected:!0,children:"Payment Method"}),e.jsx("option",{value:"Cash",children:"Cash"}),e.jsx("option",{value:"Transfer",children:"Transfer"})]}),e.jsxs("select",{className:"select select-bordered w-full max-w-xs",value:u,onChange:s=>{T(s.target.value)},children:[e.jsx("option",{disabled:!0,selected:!0,children:"Item Category"}),e.jsx("option",{value:"Cloths",children:"Cloths"}),e.jsx("option",{value:"Stationaries",children:"Stationaries"}),e.jsx("option",{value:"Books",children:"Books"}),e.jsx("option",{value:"Others",children:"Others"})]})]})]})]}),e.jsxs("main",{className:"flex gap-4 justify-center",children:[e.jsx("label",{htmlFor:"my_modal_expenses_modal",className:"btn text-white py-4 px-6 bg-red-500 border hover:bg-red-600 scale-105 w-[200px]",children:"Cancel"}),e.jsx("label",{htmlFor:"my_modal_expenses_modal",className:"btn text-white py-4 px-6 bg-green-500 border hover:bg-green-600 scale-105 w-[200px]",onClick:D,children:"Approve"})]})]})})})]}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",style:{color:"var(--secondary)"},children:[e.jsx("div",{className:"w-full ml-[15px] mb-6 flex justify-start items-center",children:e.jsx(F,{to:"/view-all-expenditures",children:e.jsx("div",{className:`${(l==null?void 0:l.categoryType)==="Secondary"?"text-blue-950":"text-green-950"} text-[12px] uppercase font-semibold`,children:"view all expenses"})})}),e.jsxs("div",{className:"text-[gray] w-[1100px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[130px] border-r",children:"Date"}),e.jsx("div",{className:"w-[120px] border-r",children:"Amount"}),e.jsx("div",{className:"w-[200px] border-r",children:"Item"}),e.jsx("div",{className:"w-[120px] border-r",children:"Payment Method"}),e.jsx("div",{className:"w-[300px] border-r",children:"Description / Notes"}),e.jsx("div",{className:"w-[120px] border-r",children:"Category"})]}),e.jsx("div",{className:" w-[1100px] overflow-hidden",children:e.jsx("div",{className:"transition-all duration-300",children:(n==null?void 0:n.length)>0?n==null?void 0:n.map(s=>{var c;return e.jsx("div",{className:"smooth",children:e.jsxs("div",{className:"w-full flex items-center gap-2 text-[12px] font-medium  min-h-16 px-4 py-2 my-2  overflow-hidden bg-white",children:[e.jsx("div",{className:"w-[130px] border-r",children:O(s==null?void 0:s.createdAt).format("ll")}),e.jsxs("div",{className:`w-[120px] border-r \r
                     text-red-600`,children:["₦",(c=s==null?void 0:s.amount)==null?void 0:c.toLocaleString()]}),e.jsx("div",{className:"w-[200px] border-r",children:s==null?void 0:s.item}),e.jsx("div",{className:"w-[120px] flex justify-center border-r",children:s==null?void 0:s.paymentMode}),e.jsx("div",{className:"w-[300px] border-r",children:s==null?void 0:s.description}),e.jsx("div",{className:"w-[120px] border-r  ",children:s==null?void 0:s.paymentCategory})]})},s==null?void 0:s._id)}):e.jsx("div",{className:"px-4",children:"No Expenditure Currently Recorded"})})})]})]})};export{z as default};
