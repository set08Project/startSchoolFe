import{o as u,u as f,cd as b,aF as g,$ as w,r as y,ce as k,j as e,k as v,x as m,cf as I,m as _,L as h,aG as N}from"./index-BomD4pl1.js";import{d as z}from"./dummy-BrifSwra.js";import{P as r}from"./index-B-Y4ncRd.js";import{b as S}from"./index-BzfpG1S9.js";import{U as $}from"./index-CSzLA8El.js";document.title="Viewing Article";const M=()=>{const{view:l}=u(),{data:i}=f(),{oneArticle:s}=b(l),{allArticle:x}=g(s==null?void 0:s.schoolID);w(s==null?void 0:s.schoolID);const a=x==null?void 0:x.filter(t=>t.studentID===(s==null?void 0:s.studentID));let c=s==null?void 0:s.like,d=c==null?void 0:c.some(t=>t===(i==null?void 0:i._id)),n=0;return d?n=(c==null?void 0:c.length)-1:n=c==null?void 0:c.length,y.useEffect(()=>{k(l,i==null?void 0:i._id)},[]),e.jsxs("div",{children:[e.jsx(v,{name:document.title}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsxs("div",{className:"space-y-4 md:w-[95%]",children:[e.jsx("div",{className:"text-[28px] text-black font-bold capitalize leading-tight",children:e.jsx("strong",{children:s==null?void 0:s.desc})}),e.jsxs("div",{className:"flex items-center gap-4 text-black font-semibold",children:[e.jsx("div",{className:"",children:e.jsx("img",{src:s!=null&&s.avatar?s==null?void 0:s.avatar:z,alt:"",className:"avatar rounded-full h-[50px] w-[50px] object-cover"})}),e.jsxs("div",{children:[e.jsx("div",{children:s!=null&&s.student?s==null?void 0:s.student:"s"}),e.jsxs("div",{className:"",children:[e.jsx("span",{className:"text-zinc-500 text-[12px]",children:"Published:"})," ",e.jsx("span",{className:"capitalize  text-[12px]",children:m(s==null?void 0:s.createdAt).fromNow()})]})]})]}),e.jsx("div",{className:"w-full text-black  mt-20",dangerouslySetInnerHTML:{__html:s==null?void 0:s.content}}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-32",children:e.jsx("hr",{})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"relative flex",onClick:()=>{I(l,i==null?void 0:i._id).then(()=>{_(`api/viewing-one-article/${l}`)})},children:[e.jsx(r,{className:"cursor-pointer absolute "}),e.jsx(r,{className:"text-red-500 cursor-pointer animate-ping opacity-40 absolute"}),e.jsxs("span",{className:"text-[12px] font-semibold ml-5",children:[" ",d&&"You"," ",n>=1?`${d?"and":""} ${n} person${n>1?"s":""} have loved this write up`:"have love this write up"]})]})}),e.jsx("div",{className:"mt-g32",children:e.jsx("hr",{})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[12px] font-semibold mb-5 underline",children:"More from Khushi_developer"}),e.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5  gap-4",children:a==null?void 0:a.map(t=>{var j,o;return e.jsxs(h,{to:`/articles/${t==null?void 0:t._id}`,className:"m-2 sm:w-[300px]",children:[e.jsx("img",{alt:"image",src:t==null?void 0:t.coverImage,className:"w-full  rounded-t-md sm:w-[300px] sm:h-[200px] object-cover border"}),e.jsxs("div",{className:"p-2 border-r border-l border-b",children:[e.jsxs("div",{className:"flex mt-2 gap-2 mb-3",children:[e.jsx("img",{alt:"image",src:t==null?void 0:t.avatar,className:"w-[40px] h-[40px] rounded-[50%] object-cover border"}),e.jsxs("div",{children:[e.jsx("p",{className:"capitalize text-[12px] font-semibold",children:t==null?void 0:t.student}),e.jsx("p",{className:"text-[12px]",children:m(t==null?void 0:t.createdAt).fromNow()})]})]})," ",e.jsx("p",{className:"font-semibold leading-tight mb-4",children:t==null?void 0:t.desc}),e.jsx("p",{className:"text-[14px] mb-5",children:t==null?void 0:t.title}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(r,{}),e.jsx("span",{className:"font-semibold text-[12px]",children:(j=t==null?void 0:t.like)==null?void 0:j.length})]}),e.jsxs("p",{className:"flex items-center gap-1",children:[e.jsx(N,{}),e.jsx("span",{className:"font-semibold text-[12px]",children:(o=t==null?void 0:t.view)==null?void 0:o.length})]})]})]})]},t._id)})})]})]})})]})};document.title="School's Article Page";const p=()=>{const{view:l}=u(),{data:i}=f(),{allArticle:s}=g(i==null?void 0:i._id),x=()=>Math.floor(Math.random()*4+2);return e.jsx("div",{children:l?e.jsx(M,{}):e.jsxs(e.Fragment,{children:[e.jsx(v,{name:document.title}),e.jsx("div",{className:"w-full flex justify-end",children:e.jsx(h,{to:"/create-article",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{size:25}),e.jsx("p",{className:`text-[12px] font-bold ${(i==null?void 0:i.categoryType)==="Secondary"?"text-blue-950":"text-green-950"}`,children:"Create New Thought"})]})})}),e.jsx("div",{className:"w-full grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 mt-10 gap-4",children:s&&(s==null?void 0:s.map(a=>{var c,d;return e.jsx(h,{to:`${a==null?void 0:a._id}`,children:e.jsxs("div",{className:"card rounded-md bg-white border text-zinc-600 cursor-pointer hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mt-[-10px] text-[15px] font-medium flex gap-3 ",children:[e.jsxs("div",{className:"flex items-center gap-1 ",children:[e.jsx(N,{}),e.jsx("p",{className:"text-[12px]",children:(c=a==null?void 0:a.view)==null?void 0:c.length})]}),e.jsxs("div",{className:"flex items-center gap-1 ",children:[e.jsx(r,{}),e.jsx("p",{className:"text-[12px]",children:(d=a==null?void 0:a.like)==null?void 0:d.length})]})]}),e.jsx("h2",{className:"card-title flex justify-between mt-[5px]",children:e.jsx("div",{className:"text-nowrap overflow-ellipsis overflow-hidden whitespace-nowrap ",children:a==null?void 0:a.desc})}),e.jsxs("p",{className:"mt-[-10px] text-[10px] font-medium",children:["Writen by ",a==null?void 0:a.student]}),e.jsx("p",{className:"text-[13px] leading-tight",children:a==null?void 0:a.title}),e.jsxs("div",{className:"flex justify-between gap-4 items-center h-4",children:[e.jsx("div",{className:"text-[11px] font-medium capitalize ",children:m(a==null?void 0:a.createdAt).fromNow()}),e.jsxs("p",{className:"text-[10px] font-bold text-gray-400",children:[x(),"Mins Read"]})]})]}),e.jsx("figure",{children:e.jsx($,{alt:"cover image",thumbhash:"1QcSHQRnh493V4dIh4eXh1h4kJUI",src:a==null?void 0:a.coverImage,autoSizes:!0,className:"w-full h-[200px] object-cover"})})]})})}))})]})})};export{p as default};
