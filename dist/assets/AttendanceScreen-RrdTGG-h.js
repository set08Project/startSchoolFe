import{bP as u,r as f,c4 as g,ci as o,j as s,I as A,Q as y,t as k,cG as w,x as b,fc as _,e as N,m as h,fd as $}from"./index-gGbhD9zv.js";import{U as R}from"./index-DLB5vuAG.js";document.title="View Students";const F=({props:c,data:i})=>{var a;const{attendance:n}=w(c);let d=i==null?void 0:i.studentFirstName,t=(a=n==null?void 0:n.attendance)==null?void 0:a.find(r=>(r==null?void 0:r.studentFirstName)===d),l=Date.now();return s.jsx("div",{className:`w-[100px] border-r 
      ${t!=null&&t.present?"text-green-600":t!=null&&t.absent?"text-red-600":null}`,children:b(t==null?void 0:t.createdAt).format("ll")===b(l).format("ll")&&(t!=null&&t.present)?"Present":t!=null&&t.absent?"Absent":null})},P=({id:c,data:i})=>{var r;const{teacherInfo:n}=u(),{oneClass:d}=g(n==null?void 0:n.presentClassID);let t=i==null?void 0:i.studentFirstName;const{attendance:l}=w(n==null?void 0:n.presentClassID);let a=(r=l==null?void 0:l.attendance)==null?void 0:r.find(x=>(x==null?void 0:x.studentFirstName)===t);return s.jsxs("div",{className:"flex justify-between px-4",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("label",{children:"Absent"}),s.jsx("input",{type:"checkbox",className:`toggle toggle-sm mt-2  bg-neutral-500 border-neutral-500 ${(a==null?void 0:a.absent)&&"text-red-500"} ${(a==null?void 0:a.absent)&&"bg-red-500"}`,checked:a==null?void 0:a.absent,onChange:()=>{_(n==null?void 0:n._id,c).then(x=>{N.success("student has been marked Absent for Today"),h(`api/view-all-class-students/${d==null?void 0:d._id}`),h(`api/view-class-attendance/${d==null?void 0:d._id}`)})}})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("label",{children:"Present"}),s.jsx("input",{type:"checkbox",className:`toggle toggle-sm mt-2 border-neutral-500 ${(a==null?void 0:a.present)&&"text-green-500"} ${(a==null?void 0:a.present)&&"bg-green-500"}`,checked:a==null?void 0:a.present,onChange:()=>{$(n==null?void 0:n._id,c).then(x=>{N.success("student has been marked Present for Today"),h(`api/view-all-class-students/${d==null?void 0:d._id}`),h(`api/view-class-attendance/${d==null?void 0:d._id}`)})}})]})]})},L=()=>{var r,x,j;const{teacherInfo:c}=u(),[i,n]=f.useState((r=c==null?void 0:c.classesAssigned[0])==null?void 0:r.classID),{oneClass:d}=g(i),{classStudents:t}=o(d==null?void 0:d._id),l=t==null?void 0:t.students,a=l==null?void 0:l.sort((e,m)=>{var v;return(v=e.studentFirstName)==null?void 0:v.localeCompare(m.studentFirstName)});return s.jsxs("div",{className:"",children:[s.jsx(A,{position:"top-center",reverseOrder:!0}),s.jsx("div",{className:"mb-0"}),s.jsx(y,{name:"Record Students Attendance"}),s.jsxs("div",{className:"my-10",children:[s.jsx("div",{className:"text-[12px] font-semibold",children:"Attendanct Record for"}),s.jsx("select",{className:"select select-bordered  w-full max-w-xs mb-10 mt-2",value:i,onChange:e=>{n(e.target.value)},children:((x=c==null?void 0:c.classesAssigned)==null?void 0:x.length)>0?(j=c==null?void 0:c.classesAssigned)==null?void 0:j.map(e=>s.jsx("option",{value:e==null?void 0:e.classID,children:e==null?void 0:e.className})):s.jsx("option",{value:"No class Assigned yet",disabled:!0,children:"No class Assigned yet"})})]}),s.jsx("div",{className:"flex w-full justify-end"}),s.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",style:{color:"var(--secondary)"},children:[s.jsxs("div",{className:"text-[gray] w-[1020px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[s.jsx("div",{className:"w-[50px] border-r",children:"s/n"}),s.jsx("div",{className:"w-[250px] border-r",children:"student info"}),s.jsx("div",{className:"w-[200px] border-r",children:"Mark Attendance"}),s.jsx("div",{className:"w-[100px] border-r",children:"Today's Attendance"}),s.jsx("div",{className:"w-[130px] border-r",children:"Gender"}),s.jsx("div",{className:"w-[100px] border-r",children:"student Class"}),s.jsx("div",{className:"w-[200px] border-r",children:"Performance Ratio"}),s.jsx("div",{className:"w-[80px] border-r",children:"Rate"})]}),s.jsx("div",{className:" w-[1020px] overflow-hidden",children:(a==null?void 0:a.length)>0?s.jsx("div",{children:a==null?void 0:a.map((e,m)=>s.jsx("div",{children:s.jsx("div",{children:s.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  h-16 px-4 my-2  overflow-hidden ${m%2===0?"bg-slate-50":"bg-white"}`,children:[s.jsx("div",{className:"w-[50px]",children:m+1}),s.jsx("div",{className:"w-[250px] flex  border-r",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(R,{alt:"image",thumbhash:"1QcSHQRnh493V4dIh4eXh1h4kJUI",src:e!=null&&e.avatar?e.avatar:k,autoSizes:!0,className:"w-14 h-14 rounded-2xl border object-cover "}),s.jsxs("div",{children:[e==null?void 0:e.studentFirstName," ",e==null?void 0:e.studentLastName]})]})}),s.jsx("div",{className:"w-[200px] border-r",children:s.jsx(P,{props:d==null?void 0:d._id,id:e==null?void 0:e._id,data:e})}),s.jsx(F,{props:d==null?void 0:d._id,data:e,id:e==null?void 0:e._id}),s.jsx("div",{className:"w-[130px] border-r",children:e==null?void 0:e.gender}),s.jsx("div",{className:"w-[100px] border-r  ",children:e==null?void 0:e.classAssigned}),s.jsx("div",{className:"w-[200px] border-r  ",children:e!=null&&e.perfomance?e==null?void 0:e.perfomance:"0"}),s.jsxs("div",{className:"w-[80px] border-r",children:[e!=null&&e.perfomance?e==null?void 0:e.perfomance:"0"," of 5"]})]},e)})}))}):s.jsx("div",{children:"No student yet"})})]})]})};export{L as default};
