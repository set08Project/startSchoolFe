import{aT as R,r as o,o as C,aC as S,b0 as k,bL as E,u as I,bS as p,bT as j,bU as v,j as e,bW as L,bV as T,x as N,L as U,a9 as z}from"./index-C_ozXG6-.js";import{h as A}from"./html2canvas-pro.esm-wieJzgtM.js";import{a as O}from"./index-CztZPaTQ.js";import{j as W}from"./index-VWaDGczM.js";const B=()=>{var h;const w=R(),m=o.useRef(null),{token:b}=C(),{termID:f}=W(b),x=S(s=>s.user),{schoolInfo:y}=k(x.id),{search:a}=E(),{data:l}=I(),[t,g]=o.useState({});let r=y,c={};if((r==null?void 0:r.length)>0)for(let s=0;s<r.length;s++)c=r[0];let u="";if(c!==null)for(let s=0;s<((h=c==null?void 0:c.term)==null?void 0:h.reverse().length);s++)u=c==null?void 0:c.term[0];const D=()=>{const s=m.current;if(!s)return;s.querySelectorAll("*").forEach(i=>{window.getComputedStyle(i).color.includes("oklch")&&(i.style.color="#000000")})};o.useEffect(()=>{D()},[]),o.useEffect(()=>{a.split("reference=")[1]!==""&&p(a.split("reference=")[1]).then(s=>{var n,i;g(s.data),s.status&&(j(x.id,{costPaid:((n=s==null?void 0:s.data)==null?void 0:n.amount)/100,paymentRef:a.split("reference=")[1]}),v(f,{costPaid:((i=s==null?void 0:s.data)==null?void 0:i.amount)/100,payRef:a.split("reference=")[1]}))})},[f]);const P=()=>{const s=m.current;if(!s){console.error("Ref is not set");return}A(s).then(n=>{const i=n.toDataURL("image/png"),d=new z;d.addImage(i,"PNG",30,10),d.save(`receipt-${N(Date.now()).format("llll")}.pdf`)}).catch(n=>{console.error("Error generating PDF:",n)})};return e.jsx("div",{children:e.jsxs("div",{className:"h-screen w-full flex justify-center items-center flex-col bg-gray-100",children:[e.jsxs("div",{className:"min-h-[72%] w-[88%] md:w-[60%] lg:w-[50%]  bg-white border p-[30px] md:p-[50px] rounded-[3px] ",ref:m,children:[e.jsx("div",{className:"w-full mb-[30px] flex justify-center items-center",children:e.jsx(L,{size:100,className:"text-green-500"})}),e.jsxs("div",{className:"w-full flex justify-center items-center flex-col",children:[e.jsxs("div",{className:"w-full mb-[25px] flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[25px] md:text-[28px] lg:text-[34px] font-bold",children:"Customer Reciept"}),e.jsxs("h4",{className:"font-medium italic",children:["Thanks for going through this.",e.jsx("br",{}),e.jsx("span",{className:"text-green-500",children:"payment confirmed"})]})]}),e.jsx("div",{children:e.jsx(T,{className:"text-[25px]"})})]}),e.jsxs("div",{className:"w-full mb-[10px] flex items-center flex-col",children:[e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Name"}),e.jsxs("div",{className:"font-bold text-end",children:[l==null?void 0:l.name," ",l==null?void 0:l.name2]})]}),e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Reference number"}),e.jsx("div",{className:"font-bold text-end",children:t==null?void 0:t.reference})]}),e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Payment Channel"}),e.jsx("div",{className:"font-bold text-end  capitalize",children:t==null?void 0:t.channel})]}),e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("div",{children:"Currency"}),e.jsx("div",{className:"font-bold text-end capitalize",children:t==null?void 0:t.currency})]})]}),e.jsx("div",{className:"w-full border my-[10px]"}),e.jsx("div",{className:"w-full mb-[10px] flex justify-end items-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-end",children:"Paid at"}),e.jsx("div",{className:"font-bold text-end",children:N(t==null?void 0:t.createdAt).format("lll")})]})}),e.jsx("div",{className:"w-full border my-[10px]"}),e.jsxs("div",{className:"w-full my-[10px] flex items-center flex-col",children:[e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Email"}),e.jsx("div",{className:"font-bold text-end",children:l==null?void 0:l.email})]}),e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("div",{children:"School Name"}),e.jsx("div",{className:"font-bold text-end",children:l==null?void 0:l.schoolName})]}),e.jsxs("div",{className:"w-full mt-[40px] flex justify-between items-center",children:[e.jsx("div",{className:"font-bold text-[22px] uppercase ",children:"Amount"}),e.jsxs("div",{className:"font-bold text-[22px] text-green-500 text-end",children:["â‚¦",((t==null?void 0:t.amount)/100).toLocaleString()]})]})]})]})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"w-full mt-[20px] flex justify-center items-center gap-10",children:[e.jsxs("div",{className:"py-3 px-6 bg-blue-950 text-white flex items-center gap-2 rounded-md cursor-pointer",onClick:P,children:[e.jsx("div",{children:"Download Reciept"}),e.jsx(O,{className:"mb-1"})]}),e.jsx(U,{to:"/dashboard",className:"i underline text-blue-950 text-[18px]",onClick:()=>{a.split("reference=")[1]!==""&&p(a.split("reference=")[1]).then(s=>{var n,i;s.status&&(j(x.id,{costPaid:((n=s==null?void 0:s.data)==null?void 0:n.amount)/100,paymentRef:a.split("reference=")[1]}),v(u,{costPaid:((i=s==null?void 0:s.data)==null?void 0:i.amount)/100,payRef:a.split("reference=")[1]}).then(d=>{w("/dashboard")}))})},children:e.jsx("div",{children:"Back to dashboard"})})]})]})})};export{B as default};
