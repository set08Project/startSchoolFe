import{aM as S,r as j,b as C,P as _,j as e,Q as T,I,l as k,br as A,B as $,cR as R,m as x,cS as f,e as d,ch as F,t as P,cT as L}from"./index-CpMs4x3j.js";import{I as M}from"./Input-Bgxl8oE8.js";document.title="view subjects";const B=({props:i})=>{var n;const{schoolSubjectTeacherDetail:a}=F(i);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle w-12 h-12",children:e.jsx("img",{src:a!=null&&a.avatar?a==null?void 0:a.avatar:P,alt:"Avatar"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:a==null?void 0:a.staffName}),e.jsxs("div",{className:"text-[12px] opacity-50 gap-1 flex flex-wrap items-center  ",children:[(n=a==null?void 0:a.classesAssigned)==null?void 0:n.map(r=>e.jsx("div",{className:" flex border-r-2 pr-1 text-[10px] font-semibold",children:r.className}))," "]}),e.jsx("p",{children:"Teacher"})]})]})},V=()=>{var o;const{schoolSubject:i}=S(),[a,n]=j.useState(""),[r,v]=j.useState(""),{dataID:l}=C(),{schoolTeacher:m}=_(),N=s=>{L(l,s,a).then(c=>{c.status===201?(x(`api/view-school-subject/${l}`),d.success("Teacher Assigned Successfully")):d.error(`${c.response.data.message}`)})},[g,w]=j.useState(""),y=s=>{v(s.target.value)},h=(o=i==null?void 0:i.subjects)==null?void 0:o.sort((s,c)=>{var t;return(t=s.subjectTitle)==null?void 0:t.localeCompare(c.subjectTitle)}),u=h==null?void 0:h.filter(s=>`${s==null?void 0:s.subjectTitle} ${s==null?void 0:s.designated}`.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{children:[e.jsx(T,{name:"View Subject"}),e.jsx(I,{position:"top-center",reverseOrder:!0}),e.jsx("div",{className:"mb-10"}),e.jsx("div",{className:"flex w-full justify-between items-start",children:e.jsx(M,{placeholder:"Search Subject Or Class Name ",className:"ml-0",value:r,onChange:y})}),e.jsxs("div",{className:"py-6 px-2  border rounded-md min-w-[300px] overflow-y-hidden ",children:[e.jsxs("div",{className:"text-[gray] w-[900px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[200px] border-r",children:"Subject Name"}),e.jsx("div",{className:"w-[200px] border-r",children:"Teacher Info"}),e.jsx("div",{className:"w-[100px] border-r",children:"Class"}),e.jsx("div",{className:"w-[200px] border-r",children:"Assign Teacher"}),e.jsx("div",{className:"w-[200px] border-r",children:"Remove Subject"})]}),e.jsx("div",{className:" w-[900px] overflow-hidden ",children:u==null?void 0:u.map((s,c)=>e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  min-h-16 px-4 my-2  overflow-hidden ${c%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[200px] border-r",children:s==null?void 0:s.subjectTitle}),e.jsx("div",{className:"w-[200px] border-r ",children:s!=null&&s.subjectTeacherName?e.jsx("div",{children:e.jsx(B,{props:s==null?void 0:s.teacherID})}):"Not assigned yet"}),e.jsx("div",{className:"w-[100px] border-r",children:s==null?void 0:s.designated}),e.jsx("div",{className:"w-[200px] border-r",children:e.jsxs("div",{className:"mt-5 text-[13px] font-medium",children:[e.jsx("label",{htmlFor:"assign_class_subject",className:" my-3 bg-blue-950 text-white py-2 px-4 rounded-md text-[12px] transition-all duration-300 hover:text-white cursor-pointer ",onClick:()=>{w(s._id)},children:"+ Assign Teacher"}),e.jsx("div",{className:"mt-5"}),e.jsx("input",{type:"checkbox",id:"assign_class_subject",className:"modal-toggle"}),e.jsxs("div",{className:"modal  rounded-md",role:"dialog",children:[e.jsxs("div",{className:"modal-box bg-white rounded-md",children:[e.jsxs("p",{className:"flex items-center justify-between my-4 ",children:[e.jsx("p",{className:"font-bold",children:"Add New Subject"}),e.jsx("label",{htmlFor:"assign_class_subject",className:"hover:bg-blue-50 transition-all duration-300  cursor-pointer rounded-full flex items-center justify-center w-6 h-6 font-bold ",children:e.jsx(k,{})})]}),e.jsx("hr",{}),e.jsxs("p",{className:"mt-2 leading-tight text-[13px] font-medium",children:["Please note that by assigning this subject to this class, it automtically becomes one of the class must take suject.",e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flex gap-2  items-center",children:[e.jsxs("p",{children:[" Subject: ",a]}),a&&e.jsxs("div",{className:"flex items-center font-bold",children:[e.jsx("span",{children:"selected"}),e.jsx(A,{className:"text-green-500 text-[25px] mb-1 "})]})]})]}),e.jsx("div",{className:"mt-10 w-full gap-2 flex flex-col items-center",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsxs("label",{className:"font-medium text-[12px]",children:["Subject Teacher"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"select bg-gray-100 select-info mt-1 text-[12px] py-0 px-2 w-full max-w-xs mb-3",value:a,onChange:t=>{n(t.target.value)},children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select the subject Teacher"}),m==null?void 0:m.staff.map((t,b)=>e.jsx("option",{value:t==null?void 0:t.staffName,children:t.staffName},b))]})]})}),e.jsx("div",{className:"w-full flex justify-end transition-all duration-300",children:a!==""?e.jsx("label",{htmlFor:"assign_class_subject",className:`\r
                                bg-blue-950 text-white px-6 py-2 rounded-md cursor-pointer\r
                                `,onClick:()=>{N(g)},children:"Proceed"}):e.jsx($,{name:"Can't Proceed",className:"bg-[lightgray] text-blue-950 mx-0 cursor-not-allowed"})})]}),e.jsx("label",{className:"modal-backdrop",htmlFor:"assign_class_subject",children:"Close"})]})]})}),e.jsx("label",{className:"w-[200px] my-3 bg-red-500 text-white py-2 px-4 flex justify-center items-center rounded-md text-[12px] transition-all duration-300 cursor-pointer ",onClick:()=>{s!=null&&s.teacherID?R(l,s==null?void 0:s.teacherID,s==null?void 0:s._id).then(t=>{t.status===201?(x(`api/view-teacher-detail/${s==null?void 0:s.teacherID}`),f(l,s==null?void 0:s._id).then(b=>{x(`api/view-school-subject/${l}`),d.success("subject Remove from Archieve")})):d.error("something went wrong")}):f(l,s==null?void 0:s._id).then(t=>{x(`api/view-school-subject/${l}`),d.success("subject Remove from Archieve")})},children:"- Remove This Subject"})]},s)})}))})]})]})};export{V as default};
