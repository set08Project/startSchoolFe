import{bP as W,r as c,c4 as Q,ci as H,j as e,I as K,Q as J,c5 as U,c3 as X,ed as Y,aq as Z,t as I,B as ee,ew as se,m as te,e as P,L as ae,z as re,x as G}from"./index-CpMs4x3j.js";document.title="View Students";const de=({props:t,i:m,oneClass:l})=>{var T,p;const{teacherInfo:r}=W();c.useState({});const[a,h]=c.useState(""),[i,j]=c.useState(""),[o,g]=c.useState(""),[d,N]=c.useState(""),[b,z]=c.useState(""),[k,B]=c.useState({}),[L,V]=c.useState(0),[A,D]=c.useState(""),[C,$]=c.useState(""),[R,E]=c.useState(""),[F,M]=c.useState(""),{subjectData:v}=U(l==null?void 0:l._id),x=["Excellent","Good","Poor"],w=["1","2","3","4","5"],{schoolAnnouncement:S}=X(r==null?void 0:r.schoolIDs),{schoolEvent:f}=Y(r==null?void 0:r.schoolIDs);let y=f==null?void 0:f.events,O=S==null?void 0:S.announcements,q=y==null?void 0:y.concat(O);const u=Z.sortBy(q,(s,n)=>(s==null?void 0:s.updatedAt)-(n==null?void 0:n.updatedAt));return e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  h-16 px-4 my-2  overflow-hidden ${m%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx(ne,{data:t,id:t==null?void 0:t._id}),e.jsx("div",{className:"w-[100px] border-r",children:e.jsxs("select",{className:"w-[95%] select select-bordered max-w-xs rounded-md",value:A,onChange:s=>{D(s.target.value)},children:[e.jsx("option",{selected:!0,className:"text-gray/70d",children:"Attendance Data"}),w==null?void 0:w.map((s,n)=>e.jsx("option",{value:s,children:s},n))]})}),e.jsx("div",{className:"w-[250px] flex border-r",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{className:" mask mask-squircle w-14 h-14 rounded-md border object-cover",src:t!=null&&t.avatar?t==null?void 0:t.avatar:I}),e.jsxs("div",{className:"w-[180px] ",children:[" ",t==null?void 0:t.studentFirstName," ",t==null?void 0:t.studentLastName]})]})}),e.jsx("div",{className:"w-[150px] border-r  ",children:e.jsxs("select",{className:"w-[95%] select select-bordered max-w-xs rounded-md",value:F,onChange:s=>{M(s.target.value)},children:[e.jsx("option",{selected:!0,className:"text-gray/70d",children:"General Performance Data"}),w==null?void 0:w.map((s,n)=>e.jsx("option",{value:s,children:s},n))]})}),e.jsx("div",{className:"w-[150px] border-r  ",children:e.jsxs("select",{className:"w-[95%] select select-bordered max-w-xs rounded-md",value:C,onChange:s=>{$(s.target.value)},children:[e.jsx("option",{selected:!0,className:"text-gray/70d",children:"Choose Performance?"}),x==null?void 0:x.map((s,n)=>e.jsx("option",{value:s,children:s},n))]})}),e.jsx("div",{className:"w-[150px] border-r  ",children:e.jsxs("select",{className:"w-[95%] select select-bordered max-w-xs rounded-md select-primary",value:i,onChange:s=>{j(s.target.value)},children:[e.jsx("option",{selected:!0,className:"text-gray/70d",children:"Select a Subject?"}),(T=v==null?void 0:v.classSubjects)==null?void 0:T.map(s=>e.jsx("option",{value:s==null?void 0:s.subjectTitle,children:s==null?void 0:s.subjectTitle},s==null?void 0:s._id))]})}),e.jsx("div",{className:"w-[150px] border-r  ",children:e.jsxs("select",{className:"w-[95%] select select-bordered max-w-xs rounded-md select-error",value:o,onChange:s=>{g(s.target.value)},children:[e.jsx("option",{selected:!0,className:"text-gray/70d",children:"Select a Subject?"}),(p=v==null?void 0:v.classSubjects)==null?void 0:p.map(s=>e.jsx("option",{value:s==null?void 0:s.subjectTitle,children:s==null?void 0:s.subjectTitle},s==null?void 0:s._id))]})}),e.jsx("div",{className:"w-[100px] border-r  ",children:t!=null&&t.totalPerformance?t==null?void 0:t.totalPerformance:"0"}),e.jsx("div",{className:"w-[150px] border-r  ",children:e.jsxs("select",{className:"w-[95%] select select-bordered max-w-xs rounded-md",value:d,onChange:s=>{N(s.target.value)},children:[e.jsx("option",{selected:!0,className:"text-gray/70d",children:"Choose Performance?"}),x==null?void 0:x.map((s,n)=>e.jsx("option",{value:s,children:s},n))]})}),e.jsx("div",{className:"w-[150px] border-r  ",children:e.jsxs("select",{className:"w-[95%] select select-bordered max-w-xs rounded-md",value:b,onChange:s=>{z(s.target.value)},children:[e.jsx("option",{selected:!0,className:"text-gray/70d",children:"Choose Performance?"}),x==null?void 0:x.map((s,n)=>e.jsx("option",{value:s,children:s},n))]})}),e.jsx("div",{className:"w-[250px] border-r  ",children:e.jsx("textarea",{className:"border w-[95%] h-[50px] p-1 text-[12pxs] outline-none resize-none rounded-md",placeholder:"Topics to focus study on, eg: Cell, Geometry...",value:R,onChange:s=>{E(s.target.value)}})}),e.jsx("div",{className:"w-[150px] border-r  ",children:parseFloat(t==null?void 0:t.classTermFee).toLocaleString()}),e.jsx("div",{className:"w-[300px] border-r capitalize ",children:(u==null?void 0:u.length)>0?e.jsx("div",{children:u[0].details}):"No Announcement"}),e.jsx("div",{className:"w-[300px] border-r",children:e.jsx("textarea",{className:"border rounded-sm w-[94%] p-1 text-[12px] h-14 resize-none mx-2",placeholder:"Give a Remark now",value:a,onChange:s=>{h(s.target.value)}})}),e.jsx("div",{className:"w-[180px] border-r",children:e.jsx(ee,{name:"Submit Report",className:"py-3 w-[85%] bg-black text-white  hover:bg-neutral-800 transition-all duration-300",onClick:()=>{V(parseFloat(t==null?void 0:t.classTermFee)),B((u==null?void 0:u.length)>0?u[0]:"No Announcement"),a!==""&&k?se(r==null?void 0:r._id,t==null?void 0:t._id,{weekPerformanceRatio:C,attendanceRatio:A,best:i,worst:o,classParticipation:d,sportParticipation:b,topicFocus:R,payment:L,announcement:k,remark:a,generalPerformace:F}).then(s=>{var n,_;s.status===201?(te(""),P.success("Report noted")):P.error(`${(_=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:_.message}`)}):P.error("Please give a REMARK")}})}),e.jsx("div",{className:"w-[180px] border-r py-3 text-white  hover:bg-neutral-800 transition-all duration-300 flex items-center justify-center rounded-md bg-blue-950",children:e.jsx(ae,{to:`/view-weekly-report/${t==null?void 0:t._id}`,children:"View Report"})})]})},ne=({id:t,data:m})=>{var i,j;const{mainStudentAttendance:l}=re(t);let r=m==null?void 0:m.studentFirstName,a=(j=(i=l==null?void 0:l.data)==null?void 0:i.attendance)==null?void 0:j.find(o=>(o==null?void 0:o.studentFirstName)===r),h=Date.now();return e.jsx("div",{className:`w-[100px] border-r 
      ${a!=null&&a.present?"text-green-600":a!=null&&a.absent?"text-red-600":null}`,children:G(a==null?void 0:a.createdAt).format("ll")===G(h).format("ll")&&(a!=null&&a.present)?"Present":a!=null&&a.absent?"Absent":null})},ie=()=>{var j,o,g;const{teacherInfo:t}=W(),[m,l]=c.useState((j=t==null?void 0:t.classesAssigned[0])==null?void 0:j.classID),{oneClass:r}=Q(m),{classStudents:a}=H(r==null?void 0:r._id),h=a==null?void 0:a.students,i=h==null?void 0:h.sort((d,N)=>{var b;return(b=d.studentFirstName)==null?void 0:b.localeCompare(N.studentFirstName)});return e.jsxs("div",{className:"",children:[e.jsx(K,{position:"top-center",reverseOrder:!0}),e.jsx("div",{className:"mb-0"}),e.jsx(J,{name:"Making Weekly Report"}),e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"text-[12px] font-semibold",children:"Weekly Report Record for"}),e.jsx("select",{className:"select select-bordered  w-full max-w-xs mb-10 mt-2",value:m,onChange:d=>{l(d.target.value)},children:((o=t==null?void 0:t.classesAssigned)==null?void 0:o.length)>0?(g=t==null?void 0:t.classesAssigned)==null?void 0:g.map(d=>e.jsx("option",{value:d==null?void 0:d.classID,children:d==null?void 0:d.className})):e.jsx("option",{value:"No class Assigned yet",disabled:!0,children:"No class Assigned yet"})})]}),e.jsx("div",{className:"flex w-full justify-end"}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",children:[e.jsxs("div",{className:"text-[gray] w-[2900px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[100px] border-r",children:"Today's Attendance"}),e.jsx("div",{className:"w-[100px] border-r",children:"Student's Attendance Ratio"}),e.jsx("div",{className:"w-[250px] border-r",children:"student Info"}),e.jsx("div",{className:"w-[150px] border-r",children:"student General Performance"}),e.jsx("div",{className:"w-[150px] border-r",children:"Rate this week's Performance"}),e.jsx("div",{className:"w-[150px] border-r",children:"Best Performing Subject"}),e.jsx("div",{className:"w-[150px] border-r",children:"Worst Performing Subject"}),e.jsx("div",{className:"w-[100px] border-r",children:"Quiz Performance"}),e.jsx("div",{className:"w-[150px] border-r",children:"Class Participation"}),e.jsx("div",{className:"w-[150px] border-r",children:"Sport Participation"}),e.jsx("div",{className:"w-[250px] border-r",children:"Topic Study"}),e.jsx("div",{className:"w-[150px] border-r",children:"Outstanding School-fee Payment"}),e.jsx("div",{className:"w-[300px] border-r",children:"upcoming Event"}),e.jsx("div",{className:"w-[300px] border-r",children:"Give Report/Remark"}),e.jsx("div",{className:"w-[180px] border-r",children:"Approve/Submit Report"}),e.jsx("div",{className:"w-[180px] border-r",children:"View Student Report"})]}),e.jsx("div",{className:" w-[2900px] overflow-hidden",children:(i==null?void 0:i.length)>0?e.jsx("div",{children:i==null?void 0:i.map((d,N)=>e.jsx("div",{children:e.jsx(de,{props:d,i:N,oneClass:r})},d))}):e.jsx("div",{children:"No student yet"})})]})]})};export{ie as default};
