import{N as g,aC as o,q as C,d3 as V,j as e,t as P,d4 as T,E as I,d5 as j,r as k,ei as R,I as z,l as A,da as D,cO as E,B as u,db as L,ex as M,e6 as U,e as F,k as Q}from"./index-C_ozXG6-.js";import{f as Y}from"./index-CxCjzvNQ.js";import{a as B}from"./index-BKZXSHLR.js";import{c as _}from"./index-DzQFJI6A.js";import{U as q}from"./index-BVLuydKr.js";const H=()=>{var x,h;const d=g(),n=o(a=>a.cartToggle),i=o(a=>a.cart),{studentInfo:m}=C(),{store:l}=V(m==null?void 0:m.schoolIDs),t=()=>{document.startViewTransition?document.startViewTransition(()=>{d(j(!n))}):d(j(!n))};return e.jsxs("div",{children:[e.jsx("div",{className:"w-full flex justify-end mb-10",children:e.jsxs("div",{className:"mr-10 relative cursor-pointer",onClick:t,children:[e.jsx(Y,{size:25}),e.jsx("div",{className:"absolute -top-1 flex justify-center items-center bg-red-500 text-white rounded-full w-4 h-4 text-[12px] font-medium -right-1",children:i.length})]})}),((x=l==null?void 0:l.data)==null?void 0:x.length)>0?e.jsxs("div",{children:[" ",e.jsxs("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[(h=l==null?void 0:l.data)==null?void 0:h.map((a,f)=>e.jsxs("div",{className:"card min-w-60 bg-base-100 shadow-sm border rounded-md pb-0",children:[e.jsx("figure",{children:e.jsx("img",{className:"h-[290px] w-full object-cover",src:a!=null&&a.avatar?a==null?void 0:a.avatar:P,alt:"Shoes"})}),e.jsxs("div",{className:"card-body pb-4 px-3",children:[e.jsx("h2",{className:"card-title",children:a==null?void 0:a.title}),e.jsxs("div",{className:"flex justify-between items-center w-full ",children:[e.jsx("p",{className:"text-[12px] font-medium",children:a==null?void 0:a.description}),e.jsxs("p",{className:"flex justify-end font-bold",children:[" ","₦",a==null?void 0:a.cost.toLocaleString()]})]}),e.jsx("div",{className:"card-actions justify-end",children:e.jsx("button",{className:"btn bg-blue-950 hover:bg-blue-900 text-white rounded-md mt-4 ",onClick:()=>{d(T(a))},children:"Add to Cart"})})]})]}))," "]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-1 mt-3",children:[e.jsx(I,{size:13}),e.jsx("p",{className:"mt-3 text-[12px] font-medium",children:"No Items in your collection yet"})]})]})},J=()=>{var f;const[d,n]=k.useState(!1),i=g(),m=o(s=>s.cartToggle),l=o(s=>s.cart),{studentInfo:t}=C(),{data:x}=R(t==null?void 0:t.schoolIDs),h=()=>{document.startViewTransition?document.startViewTransition(()=>{i(j(!m))}):i(j(!m))},a=(f=l==null?void 0:l.map(s=>s.QTY*s.cost))==null?void 0:f.reduce((s,r)=>s+r,0);return e.jsxs("div",{className:"flex w-full h-full flex-col items-center ",children:[e.jsx(z,{}),e.jsx("div",{className:"flex w-full  justify-between  ",children:e.jsxs("div",{className:" flex items-center justify-between px-3 w-full",children:[e.jsx("div",{className:"text-red-600 text-[12px]",children:"Using this store requires ₦500 charges for payment"}),e.jsx("div",{children:e.jsx(A,{size:30,className:`mr-10 my-5 cursor-pointer hover:text-red-600 hover:rotate-180 transition-all duration-300\r
          flex justify-center items-center rounded-full hover:bg-neutral-300\r
          `,onClick:h})})]})}),e.jsx("div",{className:" w-full min-h-[50vh] flex justify-center",children:e.jsxs("div",{className:" grid grid-rows-2 lg:grid-cols-6 px-4 gap-5 w-full",children:[l.length>0?e.jsxs("div",{className:"rounded-md shadow-lg border col-span-4",children:[e.jsxs("div",{className:" px-2 py-3",children:["CART(",l.length,")"]}),l==null?void 0:l.map(s=>{var r;return e.jsxs("div",{className:" w-full border-y py-3 px-2 grid grid-cols-5 gap-2 mb-3",children:[e.jsxs("div",{className:" col-span-4",children:[e.jsxs("div",{className:" flex gap-5",children:[e.jsx("div",{className:" w-[30%]",children:e.jsx(q,{alt:s==null?void 0:s.title,thumbhash:"1QcSHQRnh493V4dIh4eXh1h4kJUI",src:s==null?void 0:s.avatar,autoSizes:!0,className:"w-[140px] object-cover h-[120px] border rounded-lg ml-2"})}),e.jsxs("div",{className:" w-[70%] text-wrap",children:[e.jsx("p",{className:"font-bold text-[18px]",children:s==null?void 0:s.title}),e.jsxs("p",{className:"leading-tight text-neutral-900 break-words overflow-hidden overflow-ellipsis",children:[s==null?void 0:s.description," "]})]})]}),e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"gap-3 flex ml-2 mt-4 cursor-pointer p-2 hover:bg-slate-100 transition-all duration-300 rounded-md text-red-600 items-center",onClick:()=>{i(D(s))},children:[e.jsx("div",{children:e.jsx(E,{size:20})}),e.jsx("p",{className:"mr-2 text-[12px] mt-1 font-semibold ",children:"Remove Item"})]})})]}),e.jsxs("div",{className:" col-span-1 flex flex-col justify-center items-end gap-y-2",children:[e.jsxs("div",{className:"font-semibold",children:["₦",(r=s==null?void 0:s.cost)==null?void 0:r.toLocaleString()]}),e.jsx("div",{className:"capitalize text-[12px]",children:"no discount"}),e.jsxs("div",{className:" flex items-center",children:[e.jsx("div",{children:e.jsx(u,{name:e.jsx(B,{size:15,className:" mr-1"}),className:" bg-red-600 px-1 py-2",onClick:()=>{i(L(s))}})}),e.jsx("p",{className:" text-[18px]",children:s==null?void 0:s.QTY}),e.jsx("div",{children:e.jsx(u,{name:e.jsx(_,{size:15,className:" mr-1"}),className:" bg-blue-950 px-1 py-2",onClick:()=>{i(T(s))}})})]})]})]},s==null?void 0:s._id)})]}):e.jsx("div",{children:"Not Yet"}),e.jsx("div",{className:"col-span-2",children:l.length>0?e.jsx("div",{className:" min-h-[210px] rounded-md shadow-md ",children:e.jsxs("div",{className:" p-3",children:[e.jsx("div",{className:" py-2",children:"CART SUMMARY"}),e.jsxs("div",{className:" flex border-y py-3 justify-between",children:[e.jsx("p",{children:"Subtotal"}),e.jsxs("p",{className:"font-semibold",children:["₦",a.toLocaleString()]})]}),e.jsxs("div",{className:" flex border-y py-3 justify-between",children:[e.jsx("p",{children:"service Charge"}),e.jsx("p",{children:"₦500"})]}),e.jsx("div",{className:"w-full flex justify-center mt-10",children:e.jsx(u,{name:d?"Processing...":"Proceed to Pay",className:"bg-blue-950 w-full mx-0 py-5",onClick:()=>{var r;n(!0),t!=null&&t.parentEmail?M({email:t==null?void 0:t.parentEmail,amount:a+500,subAccountCode:(r=x==null?void 0:x.bankDetails)==null?void 0:r.accountPaymentCode}).then(c=>{var v,b,N,w,y,S;c&&(i(U((N=(b=(v=c==null?void 0:c.data)==null?void 0:v.data)==null?void 0:b.data)==null?void 0:N.reference)),console.log(c),location.replace((S=(y=(w=c==null?void 0:c.data)==null?void 0:w.data)==null?void 0:y.data)==null?void 0:S.authorization_url))}):F.error("Please update Parent's email for permission");const s=setTimeout(()=>{n(!1),clearTimeout(s)},4e3)}})})]})}):e.jsx("div",{})})]})})]})};document.title="School's Store";const Z=()=>{g(),k.useState(!0);const d=o(n=>n.cartToggle);return e.jsxs("div",{className:"text-blue-950 relative",children:[e.jsx(z,{}),e.jsx(Q,{name:"School's Store"}),e.jsx("div",{className:"my-20"}),e.jsx("div",{className:"flex items-center mb-10",children:e.jsx(u,{name:"Storing View",className:"ml-0 bg-blue-950  "})}),e.jsxs("div",{className:"border rounded-md w-full relative",children:[e.jsxs("div",{className:"p-2",children:[e.jsx(H,{})," "]}),d&&e.jsx("div",{className:`absolute top-0 p-0 w-full min-h-[300px] pb-10\r
             rounded-md backdrop-blur-1`,style:{background:"white",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(73, 154, 255, 0.3)"},children:e.jsx(J,{})})]})]})};export{Z as default};
