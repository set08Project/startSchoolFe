import{aT as g,r as o,aC as S,b0 as P,bL as R,u as C,bS as h,bT as p,bU as j,j as e,bV as D,x as E,L as k,a8 as L,a9 as I}from"./index-CpMs4x3j.js";import{a as T}from"./index-S-ycHTU4.js";const G=()=>{var u;const v=g(),x=o.useRef(null),m=S(s=>s.user),{schoolInfo:N}=P(m.id),{search:c}=R(),{data:l}=C(),[t,b]=o.useState({});let d=N,a={};if((d==null?void 0:d.length)>0)for(let s=0;s<d.length;s++)a=d[0];let f="";if(a!==null)for(let s=0;s<((u=a==null?void 0:a.term)==null?void 0:u.reverse().length);s++)f=a==null?void 0:a.term[0];const w=()=>{const s=x.current;if(!s)return;s.querySelectorAll("*").forEach(i=>{window.getComputedStyle(i).color.includes("oklch")&&(i.style.color="#000000")})};o.useEffect(()=>{w()},[]),o.useEffect(()=>{c.split("reference=")[1]!==""&&h(c.split("reference=")[1]).then(s=>{var n,i;b(s.data),s.status&&(p(m.id,{costPaid:((n=s==null?void 0:s.data)==null?void 0:n.amount)/100,paymentRef:c.split("reference=")[1]}),j(f,{costPaid:((i=s==null?void 0:s.data)==null?void 0:i.amount)/100,payRef:c.split("reference=")[1]}))})},[]);const y=()=>{const s=x.current;if(!s){console.error("Ref is not set");return}L(s).then(n=>{const i=n.toDataURL("image/png"),r=new I;r.addImage(i,"PNG",0,0),r.save("download.pdf")}).catch(n=>{console.error("Error generating PDF:",n)})};return e.jsxs("div",{className:"h-screen w-full flex justify-center items-center flex-col bg-gray-100",children:[e.jsxs("div",{className:"min-h-[72%] w-[88%] md:w-[60%] lg:w-[50%]  bg-white shadow-lg p-[30px] md:p-[50px] rounded-[3px] ",ref:x,id:"webpage-content",children:[e.jsx("div",{className:"w-full mb-[30px] flex justify-center items-center",children:e.jsx("iframe",{src:"https://lottie.host/embed/a0fbd354-5df1-43ec-a15c-040fa47c2706/N3coVG0nTi.json",style:{height:"80px"}})}),e.jsxs("div",{className:"w-full flex justify-center items-center flex-col",children:[e.jsxs("div",{className:"w-full mb-[25px] flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-[25px] md:text-[28px] lg:text-[34px] font-bold",children:"Customer Reciept"}),e.jsxs("h4",{className:"font-medium italic",children:["Thanks for going through this.",e.jsx("br",{}),e.jsx("span",{className:"text-green-500",children:"payment confirmed"})]})]}),e.jsx("div",{children:e.jsx(D,{className:"text-[25px]"})})]}),e.jsxs("div",{className:"w-full mb-[10px] flex items-center flex-col",children:[e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Name"}),e.jsxs("div",{className:"font-bold text-end",children:[l==null?void 0:l.name," ",l==null?void 0:l.name2]})]}),e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Reference number"}),e.jsx("div",{className:"font-bold text-end",children:t==null?void 0:t.reference})]}),e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Payment Channel"}),e.jsx("div",{className:"font-bold text-end  capitalize",children:t==null?void 0:t.channel})]}),e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("div",{children:"Currency"}),e.jsx("div",{className:"font-bold text-end capitalize",children:t==null?void 0:t.currency})]})]}),e.jsx("div",{className:"w-full border my-[10px]"}),e.jsx("div",{className:"w-full mb-[10px] flex justify-end items-center",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-end",children:"Paid at"}),e.jsx("div",{className:"font-bold text-end",children:E(t==null?void 0:t.createdAt).format("lll")})]})}),e.jsx("div",{className:"w-full border my-[10px]"}),e.jsxs("div",{className:"w-full my-[10px] flex items-center flex-col",children:[e.jsxs("div",{className:"w-full mb-2 flex justify-between items-center",children:[e.jsx("div",{children:"Email"}),e.jsx("div",{className:"font-bold text-end",children:l==null?void 0:l.email})]}),e.jsxs("div",{className:"w-full flex justify-between items-center",children:[e.jsx("div",{children:"School Name"}),e.jsx("div",{className:"font-bold text-end",children:l==null?void 0:l.schoolName})]}),e.jsxs("div",{className:"w-full mt-[40px] flex justify-between items-center",children:[e.jsx("div",{className:"font-bold text-[22px] uppercase ",children:"Amount"}),e.jsxs("div",{className:"font-bold text-[22px] text-green-500 text-end",children:["â‚¦",((t==null?void 0:t.amount)/100).toLocaleString()]})]})]})]})]}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"w-full mt-[20px] flex justify-center items-center gap-10",children:[e.jsxs("div",{className:"py-3 px-6 bg-blue-950 text-white flex items-center gap-2 rounded-md cursor-pointer",onClick:y,children:[e.jsx("div",{children:"Download Reciept"}),e.jsx(T,{className:"mb-1"})]}),e.jsx(k,{to:"/dashboard",className:"i underline text-blue-950 text-[18px] cursor-pointer",onClick:()=>{c.split("reference=")[1]!==""&&h(c.split("reference=")[1]).then(s=>{var n,i;s.status&&(p(m.id,{costPaid:((n=s==null?void 0:s.data)==null?void 0:n.amount)/100,paymentRef:c.split("reference=")[1]}),j(f,{costPaid:((i=s==null?void 0:s.data)==null?void 0:i.amount)/100,payRef:c.split("reference=")[1]}).then(r=>{v("/dashboard")}))})},children:e.jsx("div",{children:"Back to dashboard"})})]})]})};export{G as default};
