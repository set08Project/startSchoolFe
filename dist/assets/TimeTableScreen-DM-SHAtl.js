import{j as e,cN as k,aq as P,u as $,r as p,o as B,cC as D,cO as _,cP as A,e as d,m as N,cQ as F}from"./index-gGbhD9zv.js";import{c as E}from"./index-DVVGooKY.js";const L=({children:o,tip:r})=>e.jsx("div",{children:e.jsx("div",{className:"md:tooltip -mt-5 ","data-tip":r,children:o})}),h=["Monday","Tuesday","Wednesday","Thursday","Friday"],q=({props:o})=>{var b,j,g,v,w,f;const{timetbale:r}=k(o),u=(j=Object.values(P.groupBy((b=r==null?void 0:r.data)==null?void 0:b.timeTable,"day")))==null?void 0:j.map(l=>l.sort((a,i)=>new Date(a.createdAt).getTime()-new Date(i.createdAt).getTime())),{data:s}=$(),[y,c]=p.useState(null),[T,S]=p.useState(""),{classID:n}=B(),{readSubject:m}=D(n);return e.jsx("div",{className:"w-full ",children:e.jsx("div",{className:" h-screen",children:e.jsxs("div",{className:" w-full h-[415px] bg-slate-100  border rounded-md p-2 overflow-x-auto gap-4",children:[e.jsxs("div",{className:`flex w-[${((g=s==null?void 0:s.timeTableStructure)==null?void 0:g.length)*300}px] gap-4 bg-white py-3 px-1`,style:{width:`${((v=s==null?void 0:s.timeTableStructure)==null?void 0:v.length)*300}px`},children:[e.jsx("div",{className:"w-[210px] h-6 border-r ",children:"days"}),(w=s==null?void 0:s.timeTableStructure)==null?void 0:w.map((l,a)=>e.jsx("div",{className:"w-[300px] h-6 border-r",children:l},a))]}),e.jsxs("div",{className:"flex gap-0  py-3 mt-2 ",children:[e.jsx("div",{className:"w-[200px] h-6 border-r ",children:h==null?void 0:h.map((l,a)=>e.jsxs("div",{className:`py-2 pl-2 h-[3.75rem] w-[188px] flex items-center ${a%2===0?"bg-white":"bg-slate-50"}`,children:[" ",l]},a))}),e.jsx("div",{className:"gap-1 px-1 ",style:{width:`${((f=s==null?void 0:s.timeTableStructure)==null?void 0:f.length)*300}px`},children:u==null?void 0:u.map((l,a)=>e.jsx("div",{className:`
                flex flex-col py-2 ${a%2===0?"bg-white":"bg-slate-50"}
                `,children:e.jsx("div",{className:"flex   ",children:l==null?void 0:l.map((i,x)=>e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"relative w-[285px] h-11 border-r px-4 flex items-center justify-between  ",children:[i.subject," ",e.jsx("div",{className:" cursor-pointer text-slate-400 hover:text-slate-900 transition-all duration-300",onClick:()=>{c(x)},children:e.jsx(E,{})}),y===x&&e.jsxs("div",{className:`absolute w-[280px] mx-1 min-h-[180px] p-4 backdrop-blur-sm top-10 left-0 rounded-md border\r
                             bg-white/30 shadow-lg ring-1 ring-black/5\r
                            `,children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsx("p",{className:"text-[13px] font-semibold",children:"Change Subject"}),e.jsx(L,{tip:"Delete this Subject",children:e.jsx(_,{className:"text-red-600 cursor-pointer text-[22px]",onClick:()=>{A(s==null?void 0:s._id,i==null?void 0:i._id).then(t=>{console.log(t),t.status===201?(d.success("subject deleted successfully"),c(null),N(`api/view-time-table/${n}`)):(d.error("Please try again, something went wrong!"),c(null))})}})})]}),e.jsxs("select",{className:"select select-bordered w-full mt-2 mb-8",onChange:t=>{S(t.target.value)},children:[e.jsx("option",{disabled:!0,selected:!0,children:"Choose Period"}),e.jsx("option",{value:"Short Break",children:"Short Break"}),e.jsx("option",{value:"Long Break",children:"Long Break"}),e.jsx("option",{value:"Free Period",children:"Free Period"}),e.jsx("option",{value:"Assembly",children:"Assembly"}),m==null?void 0:m.map((t,C)=>e.jsx("option",{value:t.subjectTitle,className:"py-4 my-8",children:t==null?void 0:t.subjectTitle},C))]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("button",{className:"w-full px-4 py-2 text-white font-medium rounded-md bg-red-500 hover:bg-red-600 transition-all duration-300",onClick:()=>{c(null)},children:"Close"}),e.jsx("button",{className:"w-full px-4 py-2 text-white font-medium rounded-md bg-blue-950 hover:bg-blue-900 transition-all duration-300",onClick:()=>{F(s==null?void 0:s._id,n,i==null?void 0:i._id,T).then(t=>{t.status===201?(d.success("subject updated successfully"),c(null),N(`api/view-time-table/${n}`)):(d.error("Please try again, something went wrong!"),c(null))})},children:"update"})]})]})]})},x))})},a))})]})]})})})};export{q as T};
