import{y as b,Z as m,H as T,bL as P,j as e,bM as D,C as E,bN as k,bO as h,r as V,cg as z,h as S,B as L,bS as F,bT as B,ct as M,bU as C,bV as Q,f as Y}from"./index-Dr9ZTIop.js";import{b as p}from"./index-BIHAHyvx.js";const A=()=>{var o,x;const i=b(),n=m(t=>t.cartToggle),a=m(t=>t.cart),{studentInfo:r}=T(),{store:l}=P(r==null?void 0:r.schoolIDs),c=()=>{document.startViewTransition?document.startViewTransition(()=>{i(h(!n))}):i(h(!n))};return e.jsxs("div",{children:[e.jsx("div",{className:"w-full flex justify-end mb-10",children:e.jsxs("div",{className:"mr-10 relative cursor-pointer",onClick:c,children:[e.jsx(D,{size:25}),e.jsx("div",{className:"absolute -top-1 flex justify-center items-center bg-red-500 text-white rounded-full w-4 h-4 text-[12px] font-medium -right-1",children:a.length})]})}),((o=l==null?void 0:l.data)==null?void 0:o.length)>0?e.jsxs("div",{children:[" ",e.jsxs("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[(x=l==null?void 0:l.data)==null?void 0:x.map((t,j)=>e.jsxs("div",{className:"card min-w-60 bg-base-100 shadow-sm border rounded-md pb-0",children:[e.jsx("figure",{children:e.jsx("img",{className:"h-[290px] w-full object-cover",src:t!=null&&t.avatar?t==null?void 0:t.avatar:E,alt:"Shoes"})}),e.jsxs("div",{className:"card-body pb-4 px-3",children:[e.jsx("h2",{className:"card-title",children:t==null?void 0:t.title}),e.jsxs("div",{className:"flex justify-between items-center w-full ",children:[e.jsx("p",{className:"text-[12px] font-medium",children:t==null?void 0:t.description}),e.jsxs("p",{className:"flex justify-end font-bold",children:[" ","₦",t==null?void 0:t.cost.toLocaleString()]})]}),e.jsx("div",{className:"card-actions justify-end",children:e.jsx("button",{className:"btn bg-blue-950 hover:bg-blue-900 text-white rounded-md mt-4 ",onClick:()=>{i(k(t))},children:"Add to Cart"})})]})]}))," "]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-1 mt-3",children:[e.jsx(p,{size:13}),e.jsx("p",{className:"mt-3 text-[12px] font-medium",children:"No Items in your collection yet"})]})]})},H=()=>{var j;const[i,n]=V.useState(!1),a=b(),r=m(s=>s.cartToggle),l=m(s=>s.cart),{studentInfo:c}=T(),{data:o}=z(c==null?void 0:c.schoolIDs),x=()=>{document.startViewTransition?document.startViewTransition(()=>{a(h(!r))}):a(h(!r))},t=(j=l==null?void 0:l.map(s=>s.QTY*s.cost))==null?void 0:j.reduce((s,u)=>s+u,0);return e.jsxs("div",{className:"flex w-full h-full flex-col items-center ",children:[e.jsx("div",{className:"flex w-full  justify-end  ",children:e.jsx("div",{children:e.jsx(S,{size:30,className:`mr-10 my-5 cursor-pointer hover:text-red-600 hover:rotate-180 transition-all duration-300\r
          flex justify-center items-center rounded-full hover:bg-neutral-300\r
          `,onClick:x})})}),e.jsx("div",{className:"flex  transition-all duration-300 2xl:w-[70%] justify-end py-10 rounded-md mx-2 w-[98%]",style:{background:"rgba(255,255,255,0.3)",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(73, 154, 255, 0.3)"},children:e.jsxs("div",{className:"px-5 w-full grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"pr-2",children:[e.jsx("p",{className:"font-bold",children:"Cart Total "}),e.jsxs("p",{className:"font-medium my-5 flex justify-between items-center",children:[e.jsx("p",{children:"SubTotal"}),e.jsxs("p",{className:"font-bold",children:["₦",t.toLocaleString()]})]}),e.jsxs("p",{className:"font-medium my-5 flex justify-between items-center",children:[e.jsx("p",{children:"Extra Charges"}),e.jsx("p",{className:"font-bold",children:"₦500"})]}),e.jsx("div",{className:"mt-10 border-t border-neutral"}),e.jsxs("p",{className:"font-medium my-1 flex justify-between items-center",children:[e.jsx("p",{children:"Total"}),e.jsxs("p",{className:"font-bold",children:["₦",(t+500).toLocaleString()]})]}),e.jsx("div",{className:"w-full flex justify-center mt-10",children:e.jsx(L,{name:i?"Processing...":"Proceed to Pay",className:"bg-blue-950 w-full mx-0 py-5",onClick:()=>{var u;n(!0),F({email:c==null?void 0:c.parentEmail,amount:t+500,subAccountCode:(u=o==null?void 0:o.bankDetails)==null?void 0:u.accountPaymentCode}).then(d=>{var f,g,N,v,w,y;d&&(a(B((N=(g=(f=d==null?void 0:d.data)==null?void 0:f.data)==null?void 0:g.data)==null?void 0:N.reference)),location.replace((y=(w=(v=d==null?void 0:d.data)==null?void 0:v.data)==null?void 0:w.data)==null?void 0:y.authorization_url))});const s=setTimeout(()=>{n(!1),clearTimeout(s)},4e3)}})})]}),l==null?void 0:l.map(s=>e.jsx("div",{className:"col-span-2 h-[300px] pl-2 md:border-l border-neutral-500 w-full flex flex-col items-center ",children:e.jsxs("div",{className:"flex items-center w-full gap-2 border-b border-neutral py-5 ",children:[e.jsx(S,{onClick:()=>{a(M(s))}}),e.jsx("img",{className:"w-[120px] h-[120px] border rounded-sm bg-red-500 ml-2 object-cover",src:s.avatar}),e.jsxs("div",{className:"w-[45%] ",children:[e.jsx("p",{className:"font-bold text-[18px]",children:s==null?void 0:s.title}),e.jsxs("p",{className:"leading-tight text-neutral-900 text-[12px]",children:[s.description," "]})]}),e.jsxs("div",{className:"w-[15%] flex flex-col justify-center h-full items-center gap-3",children:[e.jsx("p",{className:"bg-blue-950 text-white rounded-md h-10 w-10 flex items-center justify-center font-bold cursor-pointer",onClick:()=>{a(k(s))},children:e.jsx(C,{})}),e.jsx("p",{className:"font-bold",children:s==null?void 0:s.QTY}),e.jsx("p",{className:"bg-orange-600 text-white rounded-md h-10 w-10 flex items-center justify-center font-bold cursor-pointer rotate-180",onClick:()=>{a(Q(s))},children:e.jsx(C,{})})]}),e.jsxs("div",{className:"w-[13%] flex justify-end font-bold text-[20px]",children:["₦",(s.QTY*s.cost).toLocaleString()]}),e.jsx("div",{})]})}))," "]})})]})};document.title="School's Store";const O=()=>{b(),V.useState(!0);const i=m(n=>n.cartToggle);return e.jsxs("div",{className:"text-blue-950 relative",children:[e.jsx(Y,{name:"School's Store"}),e.jsx("div",{className:"my-20"}),e.jsx("div",{className:"flex items-center mb-10",children:e.jsx(L,{name:"Storing View",className:"ml-0 bg-blue-950  "})}),e.jsxs("div",{className:"border rounded-md w-full relative",children:[e.jsxs("div",{className:"p-2",children:[e.jsx(A,{})," "]}),i&&e.jsx("div",{className:`absolute top-0 p-0 w-full min-h-[300px] pb-10\r
             rounded-md backdrop-blur-1`,style:{background:"rgba(, 0.2)",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(73, 154, 255, 0.3)"},children:e.jsx(H,{})})]})]})};export{O as default};
