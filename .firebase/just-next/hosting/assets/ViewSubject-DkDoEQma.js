import{a7 as v,r as j,as as N,z as g,j as e,h as w,aE as y,B as S,w as _,m as r,bo as u,b1 as C,C as k,bp as T}from"./index-Dr9ZTIop.js";import{L as I}from"./LittleHeader-XNWv_M-9.js";import{I as A,_ as i}from"./index-CPykWLTA.js";document.title="view subjects";const $=({props:c})=>{var d;const{schoolSubjectTeacherDetail:a}=C(c);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle w-12 h-12",children:e.jsx("img",{src:a!=null&&a.avatar?a==null?void 0:a.avatar:k,alt:"Avatar"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:a==null?void 0:a.staffName}),e.jsxs("div",{className:"text-[12px] opacity-50 gap-1 flex flex-wrap items-center  ",children:[(d=a==null?void 0:a.classesAssigned)==null?void 0:d.map(t=>e.jsx("div",{className:" flex border-r-2 pr-1 text-[10px] font-semibold",children:t.className}))," "]}),e.jsx("p",{children:"Teacher"})]})]})},P=()=>{var m;const{schoolSubject:c}=v(),[a,d]=j.useState(""),{dataID:t}=N(),{schoolTeacher:x}=g(),o=s=>{T(t,s,a).then(n=>{n.status===201?(r(`api/view-school-subject/${t}`),i.success("Teacher Assigned Successfully")):i.error(`${n.response.data.message}`)})},[b,f]=j.useState("");return e.jsxs("div",{children:[e.jsx(I,{name:"View Subject"}),e.jsx(A,{position:"top-center",reverseOrder:!0}),e.jsx("div",{className:"mb-28"}),e.jsx("div",{className:"mb-28"}),e.jsxs("div",{className:"py-6 px-2  border rounded-md min-w-[300px] overflow-y-hidden ",children:[e.jsxs("div",{className:"text-[gray] w-[900px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[200px] border-r",children:"Subject Name"}),e.jsx("div",{className:"w-[200px] border-r",children:"Teacher Info"}),e.jsx("div",{className:"w-[100px] border-r",children:"Class"}),e.jsx("div",{className:"w-[200px] border-r",children:"Assign Teacher"}),e.jsx("div",{className:"w-[200px] border-r",children:"Remove Subject"})]}),e.jsx("div",{className:" w-[900px] overflow-hidden ",children:(m=c==null?void 0:c.subjects)==null?void 0:m.map((s,n)=>e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  min-h-16 px-4 my-2  overflow-hidden ${n%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[200px] border-r",children:s==null?void 0:s.subjectTitle}),e.jsx("div",{className:"w-[200px] border-r ",children:s!=null&&s.subjectTeacherName?e.jsx("div",{children:e.jsx($,{props:s==null?void 0:s.teacherID})}):"Not assigned yet"}),e.jsx("div",{className:"w-[100px] border-r",children:s==null?void 0:s.designated}),e.jsx("div",{className:"w-[200px] border-r",children:e.jsxs("div",{className:"mt-5 text-[13px] font-medium",children:[e.jsx("label",{htmlFor:"assign_class_subject",className:" my-3 bg-blue-950 text-white py-2 px-4 rounded-md text-[12px] transition-all duration-300 hover:text-white cursor-pointer ",onClick:()=>{f(s._id)},children:"+ Assign Teacher"}),e.jsx("div",{className:"mt-5"}),e.jsx("input",{type:"checkbox",id:"assign_class_subject",className:"modal-toggle"}),e.jsxs("div",{className:"modal  rounded-md",role:"dialog",children:[e.jsxs("div",{className:"modal-box bg-white rounded-md",children:[e.jsxs("p",{className:"flex items-center justify-between my-4 ",children:[e.jsx("p",{className:"font-bold",children:"Add New Subject"}),e.jsx("label",{htmlFor:"assign_class_subject",className:"hover:bg-blue-50 transition-all duration-300  cursor-pointer rounded-full flex items-center justify-center w-6 h-6 font-bold ",children:e.jsx(w,{})})]}),e.jsx("hr",{}),e.jsxs("p",{className:"mt-2 leading-tight text-[13px] font-medium",children:["Please note that by assigning this subject to this class, it automtically becomes one of the class must take suject.",e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flex gap-2  items-center",children:[e.jsxs("p",{children:[" Subject: ",a]}),a&&e.jsxs("div",{className:"flex items-center font-bold",children:[e.jsx("span",{children:"selected"}),e.jsx(y,{className:"text-green-500 text-[25px] mb-1 "})]})]})]}),e.jsx("div",{className:"mt-10 w-full gap-2 flex flex-col items-center",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsxs("label",{className:"font-medium text-[12px]",children:["Subject Teacher"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{className:"select bg-gray-100 select-info mt-1 text-[12px] py-0 px-2 w-full max-w-xs mb-3",value:a,onChange:l=>{d(l.target.value)},children:[e.jsx("option",{disabled:!0,selected:!0,children:"Select the subject Teacher"}),x==null?void 0:x.staff.map((l,h)=>e.jsx("option",{value:l==null?void 0:l.staffName,children:l.staffName},h))]})]})}),e.jsx("div",{className:"w-full flex justify-end transition-all duration-300",children:a!==""?e.jsx("label",{htmlFor:"assign_class_subject",className:`\r
                                bg-blue-950 text-white px-6 py-2 rounded-md cursor-pointer\r
                                `,onClick:()=>{o(b)},children:"Proceed"}):e.jsx(S,{name:"Can't Proceed",className:"bg-[lightgray] text-blue-950 mx-0 cursor-not-allowed"})})]}),e.jsx("label",{className:"modal-backdrop",htmlFor:"assign_class_subject",children:"Close"})]})]})}),e.jsx("label",{className:"w-[200px] my-3 bg-red-500 text-white py-2 px-4 flex justify-center items-center rounded-md text-[12px] transition-all duration-300 cursor-pointer ",onClick:()=>{s!=null&&s.teacherID?_(t,s==null?void 0:s.teacherID,s==null?void 0:s._id).then(l=>{l.status===201?(r(`api/view-teacher-detail/${s==null?void 0:s.teacherID}`),u(t,s==null?void 0:s._id).then(h=>{r(`api/view-school-subject/${t}`),i.success("subject Remove from Archieve")})):i.error("something went wrong")}):u(t,s==null?void 0:s._id).then(l=>{r(`api/view-school-subject/${t}`),i.success("subject Remove from Archieve")})},children:"- Remove This Subject"})]},s)})}))})]})]})};export{P as default};
