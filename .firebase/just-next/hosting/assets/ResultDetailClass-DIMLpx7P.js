import{b8 as k,i as o,b9 as T,ba as V,b4 as I,X as j,j as s,b6 as S,t as B,C as G,k as H}from"./index-Dr9ZTIop.js";import{L}from"./LittleHeader-XNWv_M-9.js";import{I as O}from"./index-CPykWLTA.js";document.title="View  Result History";const P=({props:d,el:i})=>{var l,c,r;const{gradeData:n}=S(d==null?void 0:d._id),{session:x,term:a}=o();let e=(r=(c=(l=n==null?void 0:n.reportCard)==null?void 0:l.find(h=>h.classInfo===`${d==null?void 0:d.classAssigned} session: ${x.replace("-","/")}(${a.replace("-"," ")})`))==null?void 0:c.result)==null?void 0:r.find(h=>h.subject===(i==null?void 0:i.subjectTitle));return s.jsx("div",{className:"w-[260px] border-r-2 border-blue-950 ",children:s.jsxs("div",{className:"pl-1 flex gap-1 mt-2 text-[12px] ",children:[s.jsx("p",{className:"w-[30px] border-r",children:e!=null&&e.test1?e==null?void 0:e.test1:0}),s.jsx("p",{className:"w-[30px] border-r",children:e!=null&&e.test2?e==null?void 0:e.test2:0}),s.jsx("p",{className:"w-[30px] border-r",children:e!=null&&e.test3?e==null?void 0:e.test3:0}),s.jsx("p",{className:"w-[30px] border-r",children:e!=null&&e.test4?e==null?void 0:e.test4:0}),s.jsx("p",{className:"w-[35px] border-r",children:e!=null&&e.exam?e==null?void 0:e.exam:0}),s.jsx("p",{className:"w-[35px] font-bold border-r",children:e!=null&&e.mark?e==null?void 0:e.mark:0}),s.jsx("p",{className:"w-[35px] font-bold",children:e!=null&&e.grade?e==null?void 0:e.grade:"Nill"})]})})},R=({props:d,i,getClass:n})=>{var h;const{gradeData:x}=S(d==null?void 0:d._id),{oneClass:a}=B(d==null?void 0:d.presentClassID),{subjectData:e}=I(a==null?void 0:a._id),{session:l,term:c}=o();let r=x==null?void 0:x.reportCard.find(t=>t.classInfo===`${n} session: ${l.replace("-","/")}(${c.replace("-"," ")})`);return s.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  h-16 px-4 my-2  overflow-hidden ${i%2===0?"bg-slate-50":"bg-white"}`,children:[s.jsx("div",{className:"w-[100px] border-r font-bold",children:i+1}),s.jsx("div",{className:"w-[250px] flex border-r",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("img",{className:" mask mask-squircle w-14 h-14 rounded-md border object-cover",src:d!=null&&d.avatar?d==null?void 0:d.avatar:G}),s.jsxs("div",{className:"w-[180px] ",children:[" ",d==null?void 0:d.studentFirstName," ",d==null?void 0:d.studentLastName]})]})}),s.jsx("div",{className:"w-[100px] border-r",children:s.jsx(X,{props:d})}),s.jsx("div",{className:"w-[100px] border-r",children:r==null?void 0:r.points}),s.jsx("div",{className:"w-[100px] border-r",children:r==null?void 0:r.grade}),s.jsx("div",{className:`w-[${(e==null?void 0:e.classSubjects.length)*260}px]  border-r items-center flex`,children:s.jsx("div",{className:"flex gap-4 ",children:(h=j.sortBy(e==null?void 0:e.classSubjects,"subjectTitle"))==null?void 0:h.map(t=>s.jsx(P,{props:d,el:t}))})}),s.jsx("div",{className:"w-2 border-r"}),s.jsx("div",{className:"w-[300px] border-r",children:r==null?void 0:r.classTeacherComment}),s.jsx("div",{className:"w-[300px] border-r",children:r==null?void 0:r.adminComment})]})},X=({props:d})=>{var n,x,a,e;const{mainStudentAttendance:i}=H(d==null?void 0:d._id);return s.jsxs("div",{children:[(((x=(n=i==null?void 0:i.data)==null?void 0:n.attendance)==null?void 0:x.filter(l=>l.present===!0).length)/((e=(a=i==null?void 0:i.data)==null?void 0:a.attendance)==null?void 0:e.length)*100).toFixed(2),"%"]})},q=({props:d})=>s.jsxs("div",{className:"w-[260px] border-r ",children:[s.jsx("p",{className:"pl-3 font-bold text-[15px]",children:d==null?void 0:d.subjectTitle}),s.jsxs("div",{className:"pl-1 flex gap-1 mt-2 text-[10px] ",children:[s.jsx("p",{className:"w-[30px] border-r",children:"1st"}),s.jsx("p",{className:"w-[30px] border-r",children:"2nd"}),s.jsx("p",{className:"w-[30px] border-r",children:"3rd"}),s.jsx("p",{className:"w-[30px] border-r",children:"4th"}),s.jsx("p",{className:"w-[35px] border-r",children:"Exam"}),s.jsx("p",{className:"w-[35px] ",children:"Total"}),s.jsx("p",{className:"w-[35px] ",children:"Grade"})]})]}),p=()=>{var N,b,w,v,f,g,$,y,C,u;k();const{termID:d,ID:i,term:n,session:x}=o(),{sessionTermData:a}=T(d);document.title=`Viewing ${(N=a==null?void 0:a.data)==null?void 0:N.year} session of ${(b=a==null?void 0:a.data)==null?void 0:b.presentTerm}`;const e=(v=(w=a==null?void 0:a.data)==null?void 0:w.classResult)==null?void 0:v.find(m=>m._id===i),{classAcademicHistory:l}=V(e==null?void 0:e._id),{subjectData:c}=I(l==null?void 0:l._id);let r=j.groupBy(l==null?void 0:l.classHistory,"session");const t=Object.values(r).flat().find(m=>m.term===n.replace("-"," ")&&m.session===x.replace("-","/"));return s.jsxs("div",{className:"",children:[s.jsx(O,{position:"top-center",reverseOrder:!0}),s.jsx("div",{className:"mb-0"}),s.jsx(L,{name:`Viewing ${e==null?void 0:e.className} ${(f=a==null?void 0:a.data)==null?void 0:f.year} session of ${(g=a==null?void 0:a.data)==null?void 0:g.presentTerm}`}),s.jsx("div",{className:"mt-10"}),s.jsx("div",{className:"flex w-full justify-end"}),s.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",children:[s.jsxs("div",{className:"text-[gray] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",style:{width:`${1402+(c==null?void 0:c.classSubjects.length)*260}px`},children:[s.jsx("div",{className:"w-[100px] border-r",children:"Sequence"}),s.jsx("div",{className:"w-[250px] border-r",children:"student Info"}),s.jsx("div",{className:"w-[100px] border-r",children:"Student's Attendance Ratio"}),s.jsx("div",{className:"w-[100px] border-r",children:"Total Points"}),s.jsx("div",{className:"w-[100px] border-r",children:"Grade"}),s.jsx("div",{className:`w-[${(($=c==null?void 0:c.classSubjects)==null?void 0:$.length)*260}px] border-r`,children:s.jsx("div",{className:" flex ",children:s.jsx("div",{className:"flex gap-4",children:(y=j.sortBy(c==null?void 0:c.classSubjects,"subjectTitle"))==null?void 0:y.map(m=>s.jsx(q,{props:m},m))})})}),s.jsx("div",{className:"w-2 "}),s.jsx("div",{className:"w-[300px] border-r",children:"Class Teacher's Comment"}),s.jsx("div",{className:"w-[300px] border-r",children:"Principal's Teacher's Comment"})]}),s.jsx("div",{className:" overflow-hidden w-[2000px] ",style:{width:`${1402+(c==null?void 0:c.classSubjects.length)*260}px`},children:((C=t==null?void 0:t.resultHistory)==null?void 0:C.length)>0?s.jsx("div",{children:(u=t==null?void 0:t.resultHistory)==null?void 0:u.map((m,_)=>s.jsx("div",{children:s.jsx(R,{props:m,i:_,getClass:e==null?void 0:e.className})},m))}):s.jsx("div",{children:"No student yet"})})]})]})};export{p as default};
