import{y as k,b8 as P,Z as g,c7 as D,r as T,c8 as C,c9 as L,A as R,m as _,bT as A,ca as E,bO as H,j as e,C as Y}from"./index-Dr9ZTIop.js";import{L as $}from"./LittleHeader-XNWv_M-9.js";import{b as p}from"./index-BIHAHyvx.js";const Q=()=>{const r=k(),{teacherInfo:s}=P(),x=g(a=>a.payRef),m=g(a=>a.cart),{purchasedData:c}=D(s==null?void 0:s._id);return console.log(),T.useEffect(()=>{x!==""&&C(x).then(a=>{var i,t,d,l,n,h,v,o,j,u,f,b,N,w,y;((d=(t=(i=a==null?void 0:a.data)==null?void 0:i.data)==null?void 0:t.data)==null?void 0:d.gateway_response)==="Successful"&&m.length>0&&L(s==null?void 0:s._id,{date:R((h=(n=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:n.data)==null?void 0:h.createdAt).format("lll"),cart:m,reference:(j=(o=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:o.data)==null?void 0:j.reference,amount:((b=(f=(u=a==null?void 0:a.data)==null?void 0:u.data)==null?void 0:f.data)==null?void 0:b.amount)/100,id:(y=(w=(N=a==null?void 0:a.data)==null?void 0:N.data)==null?void 0:w.data)==null?void 0:y.id,delievered:!1}).then(()=>{_(`api/view-teacher-purchase/${s==null?void 0:s._id}`),r(A(null)),r(E()),r(H(!1))})})},[]),e.jsxs("div",{children:[e.jsx($,{name:"Purchase History "}),e.jsx("div",{className:"mb-28"}),e.jsx("div",{className:"mb-28"}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",style:{color:"var(--secondary)"},children:[e.jsxs("div",{className:"text-[gray] w-[900px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[180px] border-r",children:"Date Purchased"}),e.jsx("div",{className:"w-[250px] border-r",children:"Items Purchased"}),e.jsx("div",{className:"w-[100px] border-r",children:"Total cost paid"}),e.jsx("div",{className:"w-[150px] border-r",children:"Paid Receipt"}),e.jsx("div",{className:"w-[80px] border-r",children:"delievered"})]}),(c==null?void 0:c.length)>0?e.jsx("div",{className:" w-[900px] overflow-hidden ",children:c==null?void 0:c.map((a,i)=>{var t;return e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  min-h-16 px-4 my-2  overflow-hidden ${i%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[180px] border-r",children:a==null?void 0:a.date}),e.jsx("div",{className:"w-[250px] border-r ",children:(t=a==null?void 0:a.cart)==null?void 0:t.map((d,l)=>e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex items-center gap-3 my-2",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle w-12 h-12",children:e.jsx("img",{src:d!=null&&d.avatar?d==null?void 0:d.avatar:Y,alt:"Avatar"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:d.title}),e.jsxs("div",{className:"text-[12px] opacity-50 ",children:["₦",d.cost.toLocaleString()," * ",d.QTY]})]})]})},l))}),e.jsxs("div",{className:"w-[100px] border-r ml-1",children:["₦",(a==null?void 0:a.amount).toLocaleString()]}),e.jsx("div",{className:"w-[150px] border-r ml-1",children:a==null?void 0:a.reference}),e.jsx("div",{className:"w-[80px] border-r pl-6 ",children:e.jsx("label",{children:e.jsx("input",{checked:a==null?void 0:a.delievered,type:"checkbox",className:"checkbox checkbox-error"})})})]},a)})})})}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(p,{}),e.jsx("p",{className:"mt-2 text-[15px]",children:"You haven't reported any complains yet"})]})]})]})};export{Q as default};
