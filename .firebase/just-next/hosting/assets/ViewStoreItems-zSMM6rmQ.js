import{y as N,Z as u,u as Q,bL as _,j as e,bM as P,C as U,bN as z,bO as m,r as L,h as V,B as g,_ as E,bS as R,bT as B,bU as I,bV as F,f as H}from"./index-Dr9ZTIop.js";import{b as M}from"./index-BIHAHyvx.js";import{U as Y}from"./index-CI8joyPh.js";const A=()=>{var h,f;const n=N(),i=u(s=>s==null?void 0:s.cart),l=u(s=>s==null?void 0:s.cartToggle),{data:d}=Q(),{store:c}=_(d==null?void 0:d._id);document.title="View Store ";const r=()=>{document.startViewTransition?document.startViewTransition(()=>{n(m(!l))}):n(m(!l))};return e.jsxs("div",{children:[e.jsx("div",{className:"w-full flex justify-end mb-10",children:e.jsxs("div",{className:"mr-10 relative cursor-pointer",onClick:r,children:[e.jsx(P,{size:25}),e.jsx("div",{className:"absolute -top-1 flex justify-center items-center bg-red-500 text-white rounded-full w-4 h-4 text-[12px] font-medium -right-1",children:i==null?void 0:i.length})]})}),((h=c==null?void 0:c.data)==null?void 0:h.length)>0?e.jsxs("div",{children:[" ",e.jsxs("div",{className:"grid gap-4 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:[(f=c==null?void 0:c.data)==null?void 0:f.map((s,b)=>{var x;return e.jsxs("div",{className:"card min-w-60 bg-base-100 shadow-sm border rounded-md pb-0",children:[e.jsx("figure",{children:e.jsx(Y,{alt:s==null?void 0:s.title,thumbhash:"1QcSHQRnh493V4dIh4eXh1h4kJUI",src:s!=null&&s.avatar?s==null?void 0:s.avatar:U,autoSizes:!0,className:"h-[290px] w-full object-cover"})}),e.jsxs("div",{className:"card-body pb-4 px-3",children:[e.jsx("h2",{className:"card-title",children:s==null?void 0:s.title}),e.jsxs("div",{className:"flex justify-between items-center w-full ",children:[e.jsx("p",{className:"text-[12px] font-medium",children:s==null?void 0:s.description}),e.jsxs("p",{className:"flex justify-end font-bold",children:[" ","₦",(x=s==null?void 0:s.cost)==null?void 0:x.toLocaleString()]})]}),e.jsx("div",{className:"card-actions justify-end",children:e.jsx("button",{className:"btn bg-blue-950 hover:bg-blue-900 text-white rounded-md mt-4 ",onClick:()=>{n(z(s))},children:"Add to Cart"})})]})]},s==null?void 0:s._id)})," "]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center px-4 py-1 mt-3",children:[e.jsx(M,{size:13}),e.jsx("p",{className:"mt-3 text-[12px] font-medium",children:"No Items in your collection yet"})]})]})},J=()=>e.jsx("div",{children:"StoreItems"}),X=()=>{var b,x,w;const{data:n}=Q(),i=N(),l=u(t=>t==null?void 0:t.cart),d=u(t=>t==null?void 0:t.cartToggle),[c,r]=L.useState(!1),h=()=>{document.startViewTransition?document.startViewTransition(()=>{i(m(!d))}):i(m(!d))},f=(x=(b=l==null?void 0:l.map(t=>(t==null?void 0:t.cost)*(t==null?void 0:t.QTY)))==null?void 0:b.reduce((t,o)=>t+o,0))==null?void 0:x.toLocaleString(),s=(((w=l==null?void 0:l.map(t=>t.cost*t.QTY))==null?void 0:w.reduce((t,o)=>t+o,0))+500).toLocaleString();return e.jsxs("div",{className:"flex w-full h-full flex-col items-center ",children:[e.jsx("div",{className:"flex w-full  justify-end  ",children:e.jsx("div",{children:e.jsx(V,{size:30,className:`mr-10 my-5 cursor-pointer hover:text-red-600 hover:rotate-180 transition-all duration-300\r
          flex justify-center items-center rounded-full hover:bg-neutral-300\r
          `,onClick:h})})}),e.jsx("div",{className:"flex  transition-all duration-300 2xl:w-[70%] justify-end py-10 rounded-md mx-2 w-[98%]",style:{background:"rgba(255,255,255,0.3)",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(73, 154, 255, 0.3)"},children:e.jsxs("div",{className:"px-5 w-full grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"pr-2",children:[e.jsx("p",{className:"font-bold",children:"Cart Total "}),e.jsxs("p",{className:"font-medium my-5 flex justify-between items-center",children:[e.jsx("p",{children:"SubTotal"}),e.jsxs("p",{className:"font-bold",children:["₦",f]})]}),e.jsxs("p",{className:"font-medium my-5 flex justify-between items-center",children:[e.jsx("p",{children:"Extra Charges"}),e.jsx("p",{className:"font-bold",children:"₦500"})]}),e.jsx("div",{className:"mt-10 border-t border-neutral"}),e.jsxs("p",{className:"font-medium my-1 flex justify-between items-center",children:[e.jsx("p",{children:"Total"}),e.jsxs("p",{className:"font-bold",children:["₦",s]})]}),e.jsx("div",{className:"w-full flex justify-center mt-10",children:e.jsx(g,{name:c?"loading":"Process to Pay",icon:c&&e.jsx(E,{size:15,color:"white",className:"absolute"}),className:"bg-blue-950 w-full mx-0 py-5",onClick:()=>{var o,v;r(!0),R({email:n==null?void 0:n.email,amount:((o=l==null?void 0:l.map(a=>(a==null?void 0:a.cost)*(a==null?void 0:a.QTY)))==null?void 0:o.reduce((a,j)=>a+j,0))+500,subAccountCode:(v=n==null?void 0:n.bankDetails)==null?void 0:v.accountPaymentCode}).then(a=>{var j,y,S,T,C,k;a&&(i(B((S=(y=(j=a==null?void 0:a.data)==null?void 0:j.data)==null?void 0:y.data)==null?void 0:S.reference)),location.replace((k=(C=(T=a==null?void 0:a.data)==null?void 0:T.data)==null?void 0:C.data)==null?void 0:k.authorization_url))});const t=setTimeout(()=>{r(!1),clearTimeout(t)},4e3)}})})]}),e.jsx("div",{className:"col-span-2 min-h-[50vh] pl-2 md:border-l border-neutral-500 w-full flex flex-col items-center ",children:l.length>0?e.jsx("div",{className:"w-full",children:l==null?void 0:l.map(t=>e.jsxs("div",{className:"flex items-center w-full gap-2 border-b border-[gray] py-5 ",children:[e.jsx(V,{}),e.jsx(Y,{alt:t==null?void 0:t.title,thumbhash:"1QcSHQRnh493V4dIh4eXh1h4kJUI",src:t==null?void 0:t.avatar,autoSizes:!0,className:"w-[200px] h-[120px] border rounded-lg ml-2"}),e.jsxs("div",{className:"w-[90%] ",children:[e.jsx("p",{className:"font-bold text-[18px]",children:t==null?void 0:t.title}),e.jsxs("p",{className:"leading-tight text-neutral-900",children:[t==null?void 0:t.description," "]}),e.jsxs("div",{className:"flex mt-5 font-bold text-[20px]",children:["₦",((t==null?void 0:t.cost)*(t==null?void 0:t.QTY)).toLocaleString()]})]}),e.jsxs("div",{className:"w-[15%] flex flex-col justify-center h-full items-center gap-3",children:[e.jsx("p",{className:"bg-blue-950 text-white rounded-md h-10 w-10 flex items-center justify-center font-bold cursor-pointer",onClick:()=>{i(z(t))},children:e.jsx(I,{})}),e.jsx("p",{className:"font-bold",children:t.QTY}),e.jsx("p",{className:"bg-orange-600 text-white rounded-md h-10 w-10 flex items-center justify-center font-bold cursor-pointer rotate-180",onClick:()=>{i(F(t))},children:e.jsx(I,{})})]})]},t==null?void 0:t._id))}):e.jsx("div",{children:"No Items Yet"})})]})})]})};document.title="School's Store";const q=()=>{const n=N(),[i,l]=L.useState(!0),d=u(r=>r.cartToggle),c=()=>{document.startViewTransition?document.startViewTransition(()=>{l(!i),n(m(!1))}):(l(!i),n(m(!1)))};return e.jsxs("div",{className:"text-blue-950 relative",children:[e.jsx(H,{name:i?"School's Store":"School's items"}),e.jsx("div",{className:"my-20"}),e.jsxs("div",{className:"flex items-center mb-10",children:[e.jsx(g,{name:"Store View",className:"ml-0 bg-orange-500  ",onClick:c}),e.jsx(g,{name:"Store Items",className:"ml-0 bg-blue-950 ",onClick:c})]}),e.jsxs("div",{className:"border rounded-md w-full relative",children:[e.jsx("div",{className:"p-2",children:i?e.jsx(A,{}):e.jsx(J,{})}),d&&e.jsx("div",{className:`absolute top-0 p-0 w-full min-h-[300px] pb-10\r
             rounded-md`,style:{background:"rgba(73, 154, 255, 0.2)",boxShadow:"0 4px 30px rgba(0, 0, 0, 0.1)",backdropFilter:"blur(5px)",border:"1px solid rgba(73, 154, 255, 0.3)"},children:e.jsx(X,{})})]})]})};export{q as default};
