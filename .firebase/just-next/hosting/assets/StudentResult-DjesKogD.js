import{i as w,b9 as v,H as g,b2 as b,b4 as N,b6 as j,j as e,b8 as y,b3 as S,an as u,C as $,X as I,k as C}from"./index-Dr9ZTIop.js";import{L as R}from"./LittleHeader-XNWv_M-9.js";import{I as _}from"./index-CPykWLTA.js";const k=({props:d,el:s})=>{var r,t;const{gradeData:c}=j(d==null?void 0:d._id),{schoolInfo:x}=u(d==null?void 0:d.schoolIDs);return(t=(r=c==null?void 0:c.reportCard.find(i=>{var n,a;return i.classInfo===`${d==null?void 0:d.classAssigned} session: ${(n=x[0])==null?void 0:n.year}(${(a=x[0])==null?void 0:a.presentTerm})`}))==null?void 0:r.result)==null||t.find(i=>i.subject===(s==null?void 0:s.subjectTitle)),e.jsxs("div",{className:"w-[260px] border-r-2 border-blue-950 py-3 ",children:[e.jsx("div",{children:e.jsx("div",{className:" flex ",children:e.jsxs("div",{className:"w-[260px]  ",children:[e.jsx("p",{className:"pl-3 font-bold text-[15px]",children:s==null?void 0:s.subject}),e.jsxs("div",{className:"pl-1 flex gap-1 mt-2 text-[10px] ",children:[e.jsx("p",{className:"w-[30px] border-r",children:"1st"}),e.jsx("p",{className:"w-[30px] border-r",children:"2nd"}),e.jsx("p",{className:"w-[30px] border-r",children:"3rd"}),e.jsx("p",{className:"w-[30px] border-r",children:"4th"}),e.jsx("p",{className:"w-[35px] border-r",children:"Exam"}),e.jsx("p",{className:"w-[35px] ",children:"Total"}),e.jsx("p",{className:"w-[35px] ",children:"Grade"})]})]})})}),e.jsxs("div",{className:"pl-1 flex gap-1 mt-2 text-[12px] ",children:[e.jsx("p",{className:"w-[30px] border-r",children:s!=null&&s.test1?s==null?void 0:s.test1:0}),e.jsx("p",{className:"w-[30px] border-r",children:s!=null&&s.test2?s==null?void 0:s.test2:0}),e.jsx("p",{className:"w-[30px] border-r",children:s!=null&&s.test3?s==null?void 0:s.test3:0}),e.jsx("p",{className:"w-[30px] border-r",children:s!=null&&s.test4?s==null?void 0:s.test4:0}),e.jsx("p",{className:"w-[35px] border-r",children:s!=null&&s.exam?s==null?void 0:s.exam:0}),e.jsx("p",{className:"w-[35px] font-bold border-r",children:s!=null&&s.mark?s==null?void 0:s.mark:0}),e.jsx("p",{className:"w-[35px] font-bold",children:s!=null&&s.grade?s==null?void 0:s.grade:"Nill"})]})]})},A=({props:d,i:s,mainData:c})=>{var a;const{teacherInfo:x}=y(),{gradeData:r}=j(d==null?void 0:d._id),{state:t}=b(x==null?void 0:x.classesAssigned);S(t==null?void 0:t._id);const{subjectData:i}=N(t==null?void 0:t._id),{schoolInfo:n}=u(d==null?void 0:d.schoolIDs);return r==null||r.reportCard.find(l=>{var h,m;return l.classInfo===`${d==null?void 0:d.classAssigned} session: ${(h=n[0])==null?void 0:h.year}(${(m=n[0])==null?void 0:m.presentTerm})`}),e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  h-24 px-4 my-2  overflow-hidden ${s%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[100px] border-r font-bold",children:s+1}),e.jsx("div",{className:"w-[250px] flex border-r",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{className:" mask mask-squircle w-14 h-14 rounded-md border object-cover",src:c!=null&&c.avatar?c==null?void 0:c.avatar:$}),e.jsxs("div",{className:"w-[180px] ",children:[" ",e.jsx("p",{className:"font-bold text-[13px]",children:d==null?void 0:d.classInfo.split(":")[0].split("session")[0]}),e.jsxs("p",{className:"mt-1",children:["session:",d==null?void 0:d.classInfo.split("session:")[1].split("(")[0]]}),e.jsxs("p",{className:"text-[11px] font-bold -mt-1",children:[" ",d==null?void 0:d.classInfo.split("session:")[1].split("(")[1].replace(")","")]})]})]})}),e.jsx("div",{className:"w-[100px] border-r",children:e.jsx(G,{mainData:c})}),e.jsx("div",{className:"w-[100px] border-r",children:d==null?void 0:d.points}),e.jsx("div",{className:"w-[100px] border-r text-[15px] leading-tight font-bold",children:d==null?void 0:d.grade}),e.jsx("div",{className:`w-[${(i==null?void 0:i.classSubjects.length)*260}px]  border-r items-center flex`,children:e.jsx("div",{className:"flex gap-4 ",children:(a=I.sortBy(d==null?void 0:d.result,"subject"))==null?void 0:a.map(l=>e.jsx(k,{props:d,el:l}))})})]})},G=({mainData:d})=>{var c,x;const{mainStudentAttendance:s}=C(d==null?void 0:d._id);return e.jsxs("div",{children:[(((c=s==null?void 0:s.data)==null?void 0:c.attendance.filter(r=>r.present===!0).length)/((x=s==null?void 0:s.data)==null?void 0:x.attendance.length)*100).toFixed(2),"%"]})},L=()=>{var i,n,a,l,h,m;const{termID:d}=w(),{sessionTermData:s}=v(d);document.title=`Viewing ${(i=s==null?void 0:s.data)==null?void 0:i.year} session of ${(n=s==null?void 0:s.data)==null?void 0:n.presentTerm}`;const{studentInfo:c}=g(),{state:x}=b(c==null?void 0:c.classAssigned),{subjectData:r}=N(x==null?void 0:x._id),{gradeData:t}=j(c==null?void 0:c._id);return e.jsxs("div",{className:"",children:[e.jsx(_,{position:"top-center",reverseOrder:!0}),e.jsx("div",{className:"mb-0"}),e.jsx(R,{name:`${(a=s==null?void 0:s.data)==null?void 0:a.year} session of ${(l=s==null?void 0:s.data)==null?void 0:l.presentTerm} Student's Result History`}),e.jsx("div",{className:"mt-10"}),e.jsx("div",{className:"flex w-full justify-end"}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",children:[e.jsxs("div",{className:"text-[gray] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",style:{width:`${1e3+(r==null?void 0:r.classSubjects.length)*260}px`},children:[e.jsx("div",{className:"w-[100px] border-r",children:"Sequence"}),e.jsx("div",{className:"w-[250px] border-r",children:"student Info"}),e.jsx("div",{className:"w-[100px] border-r",children:"Student's Attendance Ratio"}),e.jsx("div",{className:"w-[100px] border-r",children:"Class Performance"}),e.jsx("div",{className:"w-[100px] border-r",children:"Class Grade"}),e.jsx("div",{className:`w-[${(r==null?void 0:r.classSubjects.length)*260}px] border-r`})]}),e.jsx("div",{className:" overflow-hidden",style:{width:`${1e3+(r==null?void 0:r.classSubjects.length)*260}px`},children:((h=t==null?void 0:t.reportCard)==null?void 0:h.length)>0?e.jsx("div",{children:(m=t==null?void 0:t.reportCard)==null?void 0:m.map((o,f)=>e.jsx("div",{children:e.jsx(A,{props:o,i:f,mainData:t})},o))}):e.jsx("div",{children:"No student result yet"})})]})]})};export{L as default};
