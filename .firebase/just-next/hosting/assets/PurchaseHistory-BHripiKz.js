import{y as k,H as P,cM as C,Z as g,cN as _,r as A,c8 as E,cO as H,A as L,m as R,bT as D,ca as S,bO as T,j as e,C as p}from"./index-Dr9ZTIop.js";import{L as O}from"./LittleHeader-XNWv_M-9.js";import{b as Y}from"./index-BIHAHyvx.js";const M=()=>{const r=k();Array.from({length:7});const{studentInfo:d}=P();C(d==null?void 0:d._id);const x=g(a=>a.payRef),m=g(a=>a.cart),{purchasedStore:i}=_(d==null?void 0:d._id);return A.useEffect(()=>{x!==""&&E(x).then(a=>{var t,s,c,l,n,h,v,o,j,f,N,b,u,y,w;((c=(s=(t=a==null?void 0:a.data)==null?void 0:t.data)==null?void 0:s.data)==null?void 0:c.gateway_response)==="Successful"&&m.length>0&&H(d==null?void 0:d._id,{date:L((h=(n=(l=a==null?void 0:a.data)==null?void 0:l.data)==null?void 0:n.data)==null?void 0:h.createdAt).format("lll"),cart:m,reference:(j=(o=(v=a==null?void 0:a.data)==null?void 0:v.data)==null?void 0:o.data)==null?void 0:j.reference,amount:((b=(N=(f=a==null?void 0:a.data)==null?void 0:f.data)==null?void 0:N.data)==null?void 0:b.amount)/100,id:(w=(y=(u=a==null?void 0:a.data)==null?void 0:u.data)==null?void 0:y.data)==null?void 0:w.id,delievered:!1}).then(()=>{R(`api/view-purchase/${d==null?void 0:d._id}`),r(D(null)),r(S()),r(T(!1))})})},[]),e.jsxs("div",{children:[e.jsx(O,{name:"Purchase History"}),e.jsx("div",{className:"mb-28"}),e.jsx("div",{className:"mb-28"}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",style:{color:"var(--secondary)"},children:[e.jsxs("div",{className:"text-[gray] w-[900px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[180px] border-r",children:"Date Purchased"}),e.jsx("div",{className:"w-[250px] border-r",children:"Items Purchased"}),e.jsx("div",{className:"w-[100px] border-r",children:"Total cost paid"}),e.jsx("div",{className:"w-[150px] border-r",children:"Paid Receipt"}),e.jsx("div",{className:"w-[80px] border-r",children:"delievered"})]}),(i==null?void 0:i.length)>0?e.jsx("div",{className:" w-[900px] overflow-hidden ",children:i==null?void 0:i.map((a,t)=>{var s;return e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  min-h-16 px-4 my-2  overflow-hidden ${t%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[180px] border-r",children:a==null?void 0:a.date}),e.jsx("div",{className:"w-[250px] border-r ",children:(s=a==null?void 0:a.cart)==null?void 0:s.map((c,l)=>e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex items-center gap-3 my-2",children:[e.jsx("div",{className:"avatar",children:e.jsx("div",{className:"mask mask-squircle w-12 h-12",children:e.jsx("img",{src:c!=null&&c.avatar?c==null?void 0:c.avatar:p,alt:"Avatar"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:c.title}),e.jsxs("div",{className:"text-[12px] opacity-50 ",children:["₦",c.cost.toLocaleString()," * ",c.QTY]})]})]})},l))}),e.jsxs("div",{className:"w-[100px] border-r ml-1",children:["₦",(a==null?void 0:a.amount).toLocaleString()]}),e.jsx("div",{className:"w-[150px] border-r ml-1",children:a==null?void 0:a.reference}),e.jsx("div",{className:"w-[80px] border-r pl-6 ",children:e.jsx("label",{children:e.jsx("input",{checked:a==null?void 0:a.delievered,type:"checkbox",className:"checkbox checkbox-error"})})})]},a)})})})}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(Y,{}),e.jsx("p",{className:"mt-2 text-[15px]",children:"You haven't reported any complains yet"})]})]})]})};export{M as default};
