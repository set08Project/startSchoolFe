import{u as b,r,bJ as w,m as N,bK as y,j as e,f as I,_ as S,bI as U}from"./index-Dr9ZTIop.js";/* empty css               */import{_ as p,I as _}from"./index-CPykWLTA.js";import{U as L}from"./index-CI8joyPh.js";document.title="School's Gallery";const E=()=>{var m,x,u;const{data:s}=b(),[j,c]=r.useState(""),[d,n]=r.useState(""),[g,o]=r.useState(!1),v=a=>{const i=a.target.files[0],l=URL.createObjectURL(i);c(i),n(l)};r.useEffect(()=>{let a=setTimeout(()=>{if(d!==""){o(!0);const i=new FormData;i.append("avatar",j),w(s==null?void 0:s._id,i).then(l=>{var h,f;l.status===201?(N(`api/view-gallary/${s==null?void 0:s._id}`),p.success("Image Uploaded"),o(!1),c(""),n("")):(p.error(`${(f=(h=l==null?void 0:l.response)==null?void 0:h.data)==null?void 0:f.message}`),o(!1))})}clearTimeout(a)})},[d]);const{gallary:t}=y(s==null?void 0:s._id);return(m=t==null?void 0:t.data)==null||m.map(a=>({src:a.avatar})),e.jsxs("div",{children:[e.jsx(_,{position:"top-center",reverseOrder:!0}),e.jsxs("div",{className:"w-full bg-white py-[20px] ",children:[e.jsx(I,{name:document.title}),(s==null?void 0:s._id)&&e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsx("div",{className:"mb-5 text-blue-950",children:"Upload School Photos to your custom gallery here"}),e.jsx("div",{children:e.jsxs("div",{className:" flex items-center",children:[e.jsx("label",{htmlFor:"gallery-upload",className:"mb-3 px-5 py-3 border rounded-md m-2 overflow-hidden flex gap-2 items-center justify-center bg-blue-950 text-white text-[18px] cursor-pointer",children:g?e.jsxs("div",{className:"text-[12px] flex items-center gap-1",children:[e.jsx(S,{color:"white",size:15}),e.jsx("span",{children:"Loading"})]}):e.jsxs("div",{className:"text-[12px] flex items-center gap-1",children:[e.jsx(U,{color:"white",size:18}),e.jsx("span",{children:"Upload"})]})}),e.jsx("input",{type:"file",id:"gallery-upload",className:"hidden",placeholder:"Upload",onChange:v})]})})]}),e.jsx("div",{className:"p-2 min-h-[400px] mb-10 w-full border flex justify-start items-center transition-all duration-300",children:e.jsx("div",{className:"w-full",children:((x=t==null?void 0:t.data)==null?void 0:x.length)>0?e.jsx("div",{className:"w-full gap-4 grid grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3  ",children:(u=t==null?void 0:t.data)==null?void 0:u.map(a=>e.jsx(L,{thumbhash:"1QcSHQRnh493V4dIh4eXh1h4kJUI",src:a==null?void 0:a.avatar,autoSizes:!0,className:"w-full h-[300px] rounded-md flex object-cover "}))}):e.jsx("div",{children:"no image"})})})]})]})};export{E as default};
