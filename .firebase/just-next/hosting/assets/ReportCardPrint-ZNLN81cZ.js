import{r as j,j as e,cI as b,cJ as f,cK as y,A as w,H as v,cb as p,k as C,b6 as u}from"./index-Dr9ZTIop.js";import{p as S}from"./logo-WVoDehlg.js";const $=({schoolName:r,schoolAddress:i,studentDetails:s,subjects:a})=>{var n,m;const t=j.useRef(null),h=()=>{const l=t.current;if(!l)return;l.querySelectorAll("*").forEach(x=>{window.getComputedStyle(x).color.includes("oklch")&&(x.style.color="#000000")})};j.useEffect(()=>{h()},[]);const o=()=>{const l=t.current;if(!l){console.error("Ref is not set");return}f(l).then(d=>{const x=d.toDataURL("image/png"),c=new y;c.addImage(x,"PNG",30,10),c.save(`report-card-${w(Date.now()).format("llll")}.pdf`)}).catch(d=>{console.error("Error generating PDF:",d)})};return e.jsx("div",{className:"text-[12px] mx-auto bg-white p-8 shadow-md rounded-lg flex justify-center items-center",children:e.jsxs("div",{className:"w-full min-h-[100vh] shadow lg:p-5",ref:t,children:[e.jsx("div",{className:"h-[100px] w-full flex justify-center items-center gap-3 ",children:e.jsxs("div",{className:"min-h-[100px]  w-[100%]  border-b-gray-400 flex gap-3 p-3 px-4",children:[e.jsx("div",{className:"lg:w-[14%] w-[25%] lg:h-[100px] h-[70px] flex  ",children:e.jsx("img",{src:S,alt:"",className:"h-[100%] object-contain mb-9"})}),e.jsxs("div",{className:"w-[70%] h-[100px] flex flex-col items-start",children:[e.jsx("h1",{className:"font-bold text-[24px] text-center lg:text-[27px] ",children:r}),e.jsx("p",{className:"text-center text-[14px]",children:i}),e.jsxs("div",{className:"py-3 px-6 bg-blue-950 text-white flex items-center gap-2 rounded-md cursor-pointer mt-2",onClick:o,children:[e.jsx("div",{children:"Download Result"}),e.jsx(b,{className:"mb-1"})]})]})]})}),e.jsx("div",{className:"mx-4 mb-2 mt-5",children:e.jsx("hr",{})}),e.jsx("div",{className:"p-4 flex justify-center items-center",children:e.jsxs("div",{className:"w-[90%] grid grid-cols-3 gap-9",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Name:"}),e.jsx("p",{children:s.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Class:"}),e.jsx("p",{children:s.class})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Roll Number:"}),e.jsx("p",{children:s==null?void 0:s.enrollmentID})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Attendance:"}),e.jsxs("p",{children:[s==null?void 0:s.attendance,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Session:"}),e.jsx("p",{children:s==null?void 0:s.session})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Term:"}),e.jsx("p",{children:s==null?void 0:s.term})]})]})}),e.jsxs("div",{className:`w-full flex justify-center items-center mt-7 p-4 flex-col \r
        `,children:[e.jsx("div",{className:"overflow-y-auto w-full",children:e.jsxs("table",{className:"w-[100%] border-collapse border border-gray-300 overflow-y-auto",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border border-gray-300 w-10 pl-2 text-left",children:"S/N"}),e.jsx("th",{className:"border border-gray-300 w-28 pl-2 text-left",children:"Subject"}),e.jsx("th",{className:"border border-gray-300 lg:w-36 w-full pl-2 text-left",children:"CA Test Score"}),e.jsx("th",{className:"border border-gray-300 w-36 pl-2 text-left",children:"Exam Score"}),e.jsxs("th",{className:"border border-gray-300 w-64 py-2 pl-2 text-left",children:["continous Assessment",e.jsx("table",{className:"w-full mt-1",children:e.jsx("thead",{children:e.jsxs("tr",{className:"h-full w-full font-medium",children:[e.jsx("th",{className:"w-20 border",children:"1"}),e.jsx("th",{className:"w-20 border",children:"2"}),e.jsx("th",{className:"w-20 border",children:"3"}),e.jsx("th",{className:"w-20 border",children:"4"}),e.jsx("th",{className:"w-20 border  ",children:"T"})]})})})]}),e.jsx("th",{className:"border border-gray-300 w-36 pl-2 text-left",children:"Exam No"}),e.jsx("th",{className:"border border-gray-300 w-20 pl-3 text-left",children:"total mark"}),e.jsx("th",{className:"border border-gray-300 w-20 pl-3 text-left",children:"Grade"}),e.jsx("th",{className:"border border-gray-300 w-20 pl-2 text-left",children:"position"})]})}),e.jsx("tbody",{children:a==null?void 0:a.result.map((l,d)=>e.jsxs("tr",{className:d%2===0?"bg-gray-100":"",children:[e.jsx("td",{className:"border border-gray-300 lg:px-6 px-8 py-3 text-[12px] lg:text-[15px]",children:d+1}),e.jsx("td",{className:"border border-gray-300 lg:px-6 px-8 py-3 text-[12px] lg:text-[15px]",children:l.subject}),e.jsx("td",{className:"border border-gray-300 lg:px-6 px-8 py-3 text-[12px] lg:text-[15px]",children:`${(l==null?void 0:l.test1)+(l==null?void 0:l.test2)+(l==null?void 0:l.test3)+(l==null?void 0:l.test4)}/40`}),e.jsx("td",{className:"border border-gray-300 lg:px-6 px-8 py-3 text-[12px] lg:text-[15px]",children:`${l.exam}/60`}),e.jsx("thead",{children:e.jsxs("tbody",{children:[e.jsx("td",{className:"border lg:w-20 w-24 lg:pl-2 lg:h-12 px-3 h-24",children:l==null?void 0:l.test1}),e.jsx("td",{className:"border w-20 lg:pl-2 px-3 h-12",children:l==null?void 0:l.test2}),e.jsxs("td",{className:"border w-20 lg:pl-2 px-3 h-12",children:[" ",l==null?void 0:l.test3]}),e.jsxs("td",{className:"border w-20 lg:pl-2 px-3 h-12",children:[" ",l==null?void 0:l.test4]}),e.jsx("td",{className:"border w-20 lg:pl-2 px-3 h-12",children:(l==null?void 0:l.test1)+(l==null?void 0:l.test2)+(l==null?void 0:l.test3)+(l==null?void 0:l.test4)})]})}),e.jsx("td",{className:"border border-gray-300 lg:px-6 py-3 px-10",children:e.jsx("p",{className:"text-[12px]",children:l.exam})}),e.jsx("td",{className:"border border-gray-300 px-6 py-3 font-semibold",children:(l==null?void 0:l.test1)+(l==null?void 0:l.test2)+(l==null?void 0:l.test3)+(l==null?void 0:l.test4)+(l==null?void 0:l.exam)}),e.jsx("td",{className:"border border-gray-300 px-6 py-3 font-semibold",children:l.grade}),e.jsx("td",{className:"border border-gray-300 px-6 py-3",children:l.position})]},d))})]})}),e.jsx("table",{className:"w-[100%] border-collapse border border-gray-300 overflow-y-auto",children:e.jsxs("thead",{children:[e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 w-[170px] py-3 pl-5 text-left",children:"Total mark"}),e.jsx("th",{className:"border border-gray-300 text-center w-30 py-3 px-3 text-[13px] lg:text-[18px]",children:`${(n=a==null?void 0:a.result)==null?void 0:n.map(l=>l.points).reduce((l,d)=>l+d,0)}/${(m=a==null?void 0:a.result)==null?void 0:m.map(l=>l.score).reduce((l,d)=>l+d,0)}`}),e.jsx("th",{className:"border border-gray-300 w-[146px] py-3 text-left pl-6",children:a==null?void 0:a.grade})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-300 text-left pl-5 w-30 py-3 ",children:"Total percentage"}),e.jsxs("th",{className:"border-gray-300 w-50 py-3 text-center pl-6",children:[a==null?void 0:a.points,"%"]})]})]})}),e.jsx("div",{className:"p-4 bg-gray-200 w-full min-h-[300px] text-center font-bold text-[20px]",children:"Students's Performance Chart"}),e.jsxs("div",{className:"p-4 w-full lg:h-[180px] min-h-[70px] mb-2 bg-gray-300 mt-3 border ",children:[e.jsx("h1",{className:"font-bold text-white pl-6 py-2 bg-gray-500",children:"Principal's Comment"}),e.jsx("p",{className:"lg:text-[13px] text-[15px] lg:pb-0 font-medium mt-2 text-left",children:a==null?void 0:a.adminComment})]}),e.jsxs("div",{className:"p-4 w-full lg:h-[180px] min-h-[70px] mb-12 bg-gray-400 mt-3 border ",children:[e.jsx("h1",{className:"font-bold text-white pl-6 py-2 bg-gray-500",children:"Class Teacher's Comment"}),e.jsx("p",{className:"lg:text-[13px] text-[15px] lg:pb-0 font-medium mt-2 text-left",children:a==null?void 0:a.classTeacherComment})]}),e.jsx("div",{className:"p-4 w-full h-[120px] bg-gray-100 mt-3 border shadow-sm",children:e.jsxs("div",{className:"w-full h-10 bg-gray-500",children:[e.jsx("h1",{className:"font-bold text-white pl-6 pt-2",children:"Grade's Boundaries"}),e.jsx("div",{className:"p-4",children:e.jsxs("p",{className:"text-[14px] font-medium pt-5 flex gap-3",children:[e.jsxs("p",{className:"font-bold text-[17px]",children:["A: ",e.jsx("span",{className:"font-medium text-[15px]",children:"100-80"}),","]}),e.jsxs("p",{className:"font-bold text-[17px]",children:["B: ",e.jsx("span",{className:"font-medium text-[15px]",children:"79-70"}),","]}),e.jsxs("p",{className:"font-bold text-[17px]",children:["C: ",e.jsx("span",{className:"font-medium text-[15px]",children:"69-60"}),","]}),e.jsxs("p",{className:"font-bold text-[17px]",children:["D: ",e.jsx("span",{className:"font-medium text-[15px]",children:"59-50"}),","]}),e.jsxs("p",{className:"font-bold text-[17px]",children:["E: ",e.jsx("span",{className:"font-medium text-[15px]",children:"49-40"}),","]}),e.jsxs("p",{className:"font-bold text-[17px]",children:["F: ",e.jsx("span",{className:"font-medium text-[15px]",children:"39-0"}),","]})]})})]})})]})]})})},E=()=>{var l,d,x,c,N;const{studentInfo:r}=v(),{schoolAnnouncement:i}=p(r==null?void 0:r.schoolIDs),{mainStudentAttendance:s}=C(r==null?void 0:r._id),{gradeData:a}=u(r==null?void 0:r._id);let t=i,h=(l=a==null?void 0:a.reportCard)==null?void 0:l.find(g=>g.classInfo===`${r==null?void 0:r.classAssigned} session: ${t==null?void 0:t.presentSession}(${t==null?void 0:t.presentTerm})`);const o=t==null?void 0:t.schoolName,n=t==null?void 0:t.address,m={name:`${r==null?void 0:r.studentFirstName} ${r==null?void 0:r.studentLastName} `,class:r==null?void 0:r.classAssigned,term:t==null?void 0:t.presentTerm,session:t==null?void 0:t.presentSession,enrollmentID:`${r==null?void 0:r.enrollmentID}`,passport:"https://via.placeholder.com/150",attendance:((x=(d=s==null?void 0:s.data)==null?void 0:d.attendance)==null?void 0:x.filter(g=>g.present===!0).length)/((N=(c=s==null?void 0:s.data)==null?void 0:c.attendance)==null?void 0:N.length)*100};return e.jsx("div",{className:"",children:e.jsx($,{schoolName:o,schoolAddress:n,studentDetails:m,subjects:h})})};export{E as default};
