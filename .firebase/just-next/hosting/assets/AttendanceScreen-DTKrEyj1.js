import{b8 as v,r as w,t as N,b3 as f,j as s,A as h,C as o,bk as u,cD as A,m,cE as y}from"./index-Dr9ZTIop.js";import{L as k}from"./LittleHeader-XNWv_M-9.js";import{I as _,_ as j}from"./index-CPykWLTA.js";import{U as $}from"./index-CI8joyPh.js";document.title="View Students";const R=({props:i,data:c})=>{var a;const{attendance:n}=u(i);let t=c==null?void 0:c.studentFirstName,d=(a=n==null?void 0:n.attendance)==null?void 0:a.find(l=>(l==null?void 0:l.studentFirstName)===t),r=Date.now();return s.jsx("div",{className:`w-[100px] border-r 
      ${d!=null&&d.present?"text-green-600":d!=null&&d.absent?"text-red-600":null}`,children:h(d==null?void 0:d.createdAt).format("ll")===h(r).format("ll")&&(d!=null&&d.present)?"Present":d!=null&&d.absent?"Absent":null})},D=({id:i,data:c})=>{var l;const{teacherInfo:n}=v(),{oneClass:t}=N(n==null?void 0:n.presentClassID);let d=c==null?void 0:c.studentFirstName;const{attendance:r}=u(n==null?void 0:n.presentClassID);let a=(l=r==null?void 0:r.attendance)==null?void 0:l.find(x=>(x==null?void 0:x.studentFirstName)===d);return s.jsxs("div",{className:"flex justify-between px-4",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("label",{children:"Absent"}),s.jsx("input",{type:"checkbox",className:`toggle toggle-sm mt-2  bg-neutral-500 border-neutral-500 ${(a==null?void 0:a.absent)&&"text-red-500"} ${(a==null?void 0:a.absent)&&"bg-red-500"}`,checked:a==null?void 0:a.absent,onChange:()=>{A(n==null?void 0:n._id,i).then(x=>{j.success("student has been marked Absent for Today"),m(`api/view-all-class-students/${t==null?void 0:t._id}`),m(`api/view-class-attendance/${t==null?void 0:t._id}`)})}})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("label",{children:"Present"}),s.jsx("input",{type:"checkbox",className:`toggle toggle-sm mt-2 border-neutral-500 ${(a==null?void 0:a.present)&&"text-green-500"} ${(a==null?void 0:a.present)&&"bg-green-500"}`,checked:a==null?void 0:a.present,onChange:()=>{y(n==null?void 0:n._id,i).then(x=>{j.success("student has been marked Present for Today"),m(`api/view-all-class-students/${t==null?void 0:t._id}`),m(`api/view-class-attendance/${t==null?void 0:t._id}`)})}})]})]})},T=()=>{var r,a,l,x,b;const{teacherInfo:i}=v(),[c,n]=w.useState((r=i==null?void 0:i.classesAssigned[0])==null?void 0:r.classID),{oneClass:t}=N(c),{classStudents:d}=f(t==null?void 0:t._id);return s.jsxs("div",{className:"",children:[s.jsx(_,{position:"top-center",reverseOrder:!0}),s.jsx("div",{className:"mb-0"}),s.jsx(k,{name:"Record Students Attendance"}),s.jsxs("div",{className:"my-10",children:[s.jsx("div",{className:"text-[12px] font-semibold",children:"Attendanct Record for"}),s.jsx("select",{className:"select select-bordered  w-full max-w-xs mb-10 mt-2",value:c,onChange:e=>{n(e.target.value)},children:((a=i==null?void 0:i.classesAssigned)==null?void 0:a.length)>0?(l=i==null?void 0:i.classesAssigned)==null?void 0:l.map(e=>s.jsx("option",{value:e==null?void 0:e.classID,children:e==null?void 0:e.className})):s.jsx("option",{value:"No class Assigned yet",disabled:!0,children:"No class Assigned yet"})})]}),s.jsx("div",{className:"flex w-full justify-end"}),s.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",style:{color:"var(--secondary)"},children:[s.jsxs("div",{className:"text-[gray] w-[1020px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[s.jsx("div",{className:"w-[130px] border-r",children:"Reg. Date"}),s.jsx("div",{className:"w-[100px] border-r",children:"Today's Attendance"}),s.jsx("div",{className:"w-[200px] border-r",children:"Mark Attendance"}),s.jsx("div",{className:"w-[250px] border-r",children:"student info"}),s.jsx("div",{className:"w-[100px] border-r",children:"student Class"}),s.jsx("div",{className:"w-[200px] border-r",children:"Performance Ratio"}),s.jsx("div",{className:"w-[80px] border-r",children:"Rate"})]}),s.jsx("div",{className:" w-[1020px] overflow-hidden",children:((x=d==null?void 0:d.students)==null?void 0:x.length)>0?s.jsx("div",{children:(b=d==null?void 0:d.students)==null?void 0:b.map((e,g)=>s.jsx("div",{children:s.jsx("div",{children:s.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  h-16 px-4 my-2  overflow-hidden ${g%2===0?"bg-slate-50":"bg-white"}`,children:[s.jsx("div",{className:"w-[130px] border-r",children:h(e==null?void 0:e.createdAt).format("ll")}),s.jsx(R,{props:t==null?void 0:t._id,data:e,id:e==null?void 0:e._id}),s.jsx("div",{className:"w-[200px] border-r",children:s.jsx(D,{props:t==null?void 0:t._id,id:e==null?void 0:e._id,data:e})}),s.jsx("div",{className:"w-[250px] flex  border-r",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{alt:"image",thumbhash:"1QcSHQRnh493V4dIh4eXh1h4kJUI",src:e!=null&&e.avatar?e.avatar:o,autoSizes:!0,className:"w-14 h-14 rounded-2xl border object-cover "}),s.jsxs("div",{children:[e==null?void 0:e.studentFirstName," ",e==null?void 0:e.studentLastName]})]})}),s.jsx("div",{className:"w-[100px] border-r  ",children:e==null?void 0:e.classAssigned}),s.jsx("div",{className:"w-[200px] border-r  ",children:e!=null&&e.perfomance?e==null?void 0:e.perfomance:"0"}),s.jsxs("div",{className:"w-[80px] border-r",children:[e!=null&&e.perfomance?e==null?void 0:e.perfomance:"0"," of 5"]})]},e)})}))}):s.jsx("div",{children:"No student yet"})})]})]})};export{T as default};
