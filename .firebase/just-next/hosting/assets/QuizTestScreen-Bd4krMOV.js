import{ae as T,i as k,r as y,cx as A,H as O,j as s,f as Q,cw as B,B as S,d4 as E}from"./index-Dr9ZTIop.js";import{I as G,_ as C}from"./index-CPykWLTA.js";const I=()=>{var f,p,j,v;const w=T(),{quizID:d}=k(),[o,P]=y.useState({}),{quizData:t}=A(d),[u,x]=y.useState(!1),{studentInfo:m}=O(),h=(n,l)=>{P(e=>({...e,[n]:l}))},$=()=>{var r,g,N,b;let n=[],l=0,e=0,a="",i="";for(let c=0;c<((g=(r=t==null?void 0:t.quiz[1])==null?void 0:r.question)==null?void 0:g.length);c++)n.push((N=t==null?void 0:t.quiz[1])==null?void 0:N.question[c].answer),n[c]===Object.values(o)[c]&&l++;e=Math.ceil(l/((b=t==null?void 0:t.quiz[1])==null?void 0:b.question.length)*100),e>=0&&e<=45?a="Very very poor Performance!":e>=46&&e<=55?a="A Poor Performance!":e>=56&&e<=65?a="A Good Performance, can still do Better!":e>=66&&e<=75?a="Congratulation.... A Good Performance, Keep it Up!":e>=76&&e<=85?a="Congratulation.... An Very Good Performance, Keep it Up!":e>=86&&e<=100&&(a="Congratulation.... An Excellent Performance, Keep it Up!"),e>=0&&e<=45?i="F":e>=46&&e<=55?i="E":e>=56&&e<=65?i="D":e>=66&&e<=75?i="C":e>=76&&e<=85?i="B":e>=86&&e<=100&&(i="A"),E(m==null?void 0:m._id,d,{studentScore:l,studentGrade:i,remark:a}).then(c=>{console.log(c),c.status===201?(C.success("Quiz summitted successfully"),setTimeout(()=>{w("/")},1500)):C.error("Something went wrong")})};return s.jsxs("div",{children:[s.jsx(G,{position:"top-center",reverseOrder:!0}),s.jsx(Q,{name:`${t==null?void 0:t.subjectTitle} Test Screen`}),s.jsxs("div",{className:"relative",children:[!u&&s.jsxs("div",{className:"absolute top-20 left-1/3 z-10 ",children:[s.jsx(B,{size:200,className:"cursor-pointer text-red-500 hover:text-red-600 transition-all duration-300",onClick:()=>{document.startViewTransition?document.startViewTransition(()=>{x(!0)}):x(!0)}}),s.jsx("p",{className:"font-bold",children:"Push Play to start your Test"})]}),s.jsx("div",{className:"bg-slate-50 justify-center flex min-h-[100vh]",children:u?s.jsxs("div",{className:" bg-white w-full px-5",children:[(p=(f=t==null?void 0:t.quiz[1])==null?void 0:f.question)==null?void 0:p.map((n,l)=>s.jsxs("div",{children:[s.jsxs("p",{className:"text-[14px] font-bold mt-10",children:["Question ",l+1,"."]}),s.jsxs("div",{className:"ml-4 ",children:[s.jsx("p",{className:"text-[18px]",children:n.question}),s.jsxs("div",{className:"ml-8",children:[s.jsx("p",{className:"text-[12px] mt-5",children:"Choose your Options carefully"}),n.options.map((e,a)=>{const i=Object.keys(e)[0];let r="";return typeof e=="string"&&(r=e.split(",")[i]),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("input",{className:"radio radio-sm",type:"radio",onChange:()=>{h(l,r)},id:`${l} - ${i}`,value:`${r}`,checked:o[l]===r}),s.jsx("label",{htmlFor:`${l} - ${i}`,children:r})]},a)})]})]})]})),s.jsx("div",{children:s.jsx(S,{className:"bg-blue-950 px-12 mt-14 py-4 ",name:"Submit",onClick:$})})]}):s.jsxs("div",{className:"relative blur-sm bg-white w-full px-5",children:[(v=(j=t==null?void 0:t.quiz[1])==null?void 0:j.question)==null?void 0:v.map((n,l)=>s.jsxs("div",{children:[s.jsxs("p",{className:"text-[14px] font-bold mt-10",children:["Question ",l+1,"."]}),s.jsxs("div",{className:"ml-4 ",children:[s.jsx("p",{className:"text-[18px]",children:n.question}),s.jsxs("div",{className:"ml-8",children:[s.jsx("p",{className:"text-[12px] mt-5",children:"Choose your Options carefully"}),n.options.map((e,a)=>{const i=Object.keys(e)[0];let r="";return typeof e=="string"&&(r=e.split(",")[i]),s.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[s.jsx("input",{className:"radio radio-sm",type:"radio",onChange:()=>{h(l,r)},id:`${l} - ${i}`,value:`${r}`,checked:o[l]===r}),s.jsx("label",{htmlFor:`${l} - ${i}`,children:r})]},a)})]})]})]})),s.jsx("div",{children:s.jsx(S,{className:"bg-blue-950 px-12 mt-14 py-4 ",name:"Submit"})})]})})]})]})};export{I as default};
