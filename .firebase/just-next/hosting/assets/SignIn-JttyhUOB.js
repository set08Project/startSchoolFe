import{i as j,y as N,ae as S,r as d,bX as y,j as e,a as h,B as f,_ as I,bY as k,bZ as E,b_ as C,ah as D}from"./index-Dr9ZTIop.js";import{I as L}from"./Input-CHfh9ry9.js";import{o as T}from"./index-BIHAHyvx.js";import{I as _,_ as g}from"./index-CPykWLTA.js";import{l as $}from"./mainLogo-DKfqbt2a.js";import{P}from"./PasswordIput-Dv1fDtD6.js";class l extends Error{}l.prototype.name="InvalidTokenError";function U(s){return decodeURIComponent(atob(s).replace(/(.)/g,(t,o)=>{let a=o.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}function B(s){let t=s.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return U(t)}catch{return atob(t)}}function R(s,t){if(typeof s!="string")throw new l("Invalid token specified: must be a string");t||(t={});const o=t.header===!0?0:1,a=s.split(".")[o];if(typeof a!="string")throw new l(`Invalid token specified: missing part #${o+1}`);let c;try{c=B(a)}catch(n){throw new l(`Invalid token specified: invalid base64 for part #${o+1} (${n.message})`)}try{return JSON.parse(c)}catch(n){throw new l(`Invalid token specified: invalid json for part #${o+1} (${n.message})`)}}const J=()=>{const{token:s}=j(),t=N(),o=S(),[a,c]=d.useState(""),[n,b]=d.useState(""),[m,u]=d.useState(!1),w=()=>{u(!0);const r={email:a,enrollmentID:n};k().then(i=>{}),E(r).then(i=>{var x,p;if(i.status===201){t(C(i)),t(D(i.user)),g.success("login successful"),u(!1),!m&&o("/dashboard");const v=setTimeout(()=>{window.location.reload(),clearTimeout(v)},10)}else u(!1),g.error(`${(p=(x=i==null?void 0:i.response)==null?void 0:x.data)==null?void 0:p.message}`)}).then(()=>{})};return d.useEffect(()=>{if(s){const{id:r}=R(s);y(r)}}),e.jsxs("div",{className:" w-full min-h-[94vh] flex flex-col justify-center items-center ",children:[e.jsx(_,{position:"top-center",reverseOrder:!0}),e.jsxs("div",{className:"mb-10 text-center flex items-center w-full flex-col",children:[e.jsxs(h,{to:"/",children:[e.jsx("img",{className:"mb-5 w-56 h-28 object-contain",src:$})," "]})," ",e.jsx("div",{className:"text-[26px] font-bold mb-3 text-blue-900",children:"Welcome Back"}),e.jsxs("div",{className:"text-[14px] -mt-4",children:[" ","Sign in now to continue your Experience."]})]}),e.jsxs("div",{className:"rounded-md bg-white min-h-[300px] w-[80%] md:w-[500px] border p-4",children:[e.jsx(L,{placeholder:"Email",className:"w-[97%]",type:"email",required:!0,value:a,onChange:r=>{c(r.target.value)}}),e.jsx(P,{placeholder:"School Enrollment ID",className:"w-[97%]",show:!0,errorText:n&&"Please ensure your ID is correct!",required:!0,value:n,onChange:r=>{b(r.target.value)}}),e.jsxs("div",{children:[e.jsx(f,{name:m?"Loading...":"Login",className:"w-[97%] bg-blue-900 text-white h-14 hover:bg-blue-800 transition-all duration-300",type:"submit",onClick:w,icon:m&&e.jsx(I,{color:"white",size:18})}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx(h,{to:"/auth/student-login",children:e.jsx("div",{className:"text-[12px] ml-2 font-bold cursor-pointer",children:"Switch to Student Login"})}),e.jsx(h,{to:"/auth/switch-login",children:e.jsx("div",{className:"text-[12px] ml-2 font-bold cursor-pointer",children:"Switch to Teacher Login"})})]})]}),e.jsx("div",{className:"mt-10 mb-0 mx-2 text-[13px] font-medium flex  justify-between ",children:e.jsx("div",{children:"Sign in with social network"})}),e.jsx("div",{className:"flex flex-col",children:e.jsx(f,{name:"Continue with Google (coming soon)",className:"h-14 bg-red-900 hover:bg-red-600 opacity-50 hover:text-white  transition-all duration-300 font-medium text-[#ababab] leading-tight w-[97%]text-center text-[12px] sm:text-base ",icon:e.jsx(T,{})})})]}),e.jsxs("div",{className:"mt-5 text-[13px]",children:["Donâ€™t have an account yet?"," ",e.jsx("span",{className:"font-bold text-blue-900",children:e.jsx(h,{to:"/auth",children:"Register here"})})]})]})};export{J as default};
