import{b8 as v,r as h,t as b,b3 as w,j as e,C as g,B as f,cs as R,m as k,k as u,A as j}from"./index-Dr9ZTIop.js";import{L as y}from"./LittleHeader-XNWv_M-9.js";import{I as _,_ as o}from"./index-CPykWLTA.js";document.title="View Students";const A=({props:s,i:t})=>{const{teacherInfo:r}=v();h.useState({});const[l,a]=h.useState("");return e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  h-16 px-4 my-2  overflow-hidden ${t%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx(C,{data:s,id:s==null?void 0:s._id}),e.jsx("div",{className:"w-[100px] border-r",children:e.jsx(P,{props:s})}),e.jsx("div",{className:"w-[250px] flex border-r",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{className:" mask mask-squircle w-14 h-14 rounded-md border object-cover",src:g}),e.jsxs("div",{className:"w-[180px] ",children:[" ",s==null?void 0:s.studentFirstName," ",s==null?void 0:s.studentLastName]})]})}),e.jsx("div",{className:"w-[100px] border-r  ",children:s!=null&&s.totalPerformance?s==null?void 0:s.totalPerformance:"0"}),e.jsx("div",{className:"w-[300px] border-r",children:e.jsx("textarea",{className:"border rounded-sm w-[94%] p-1 text-[12px] h-14 resize-none mx-2",placeholder:"Give a Remark",value:l,onChange:d=>{a(d.target.value)}})}),e.jsx("div",{className:"w-[180px] border-r",children:e.jsx(f,{name:"Submit Report",className:"py-3 w-[85%] bg-black text-white  hover:bg-neutral-800 transition-all duration-300",onClick:()=>{l!==""?R(r==null?void 0:r._id,s==null?void 0:s._id,l).then(d=>{var n,c;d.status===201?(k(""),o.success("Report noted")):(console.log(d),o.error(`${(c=(n=d==null?void 0:d.response)==null?void 0:n.data)==null?void 0:c.message}`))}):o.error("Please give a REMARK")}})})]})},C=({id:s,data:t})=>{var n,c;const{mainStudentAttendance:r}=u(s);let l=t==null?void 0:t.studentFirstName,a=(c=(n=r==null?void 0:r.data)==null?void 0:n.attendance)==null?void 0:c.find(x=>(x==null?void 0:x.studentFirstName)===l),d=Date.now();return e.jsx("div",{className:`w-[100px] border-r 
      ${a!=null&&a.present?"text-green-600":a!=null&&a.absent?"text-red-600":null}`,children:j(a==null?void 0:a.createdAt).format("ll")===j(d).format("ll")&&(a!=null&&a.present)?"Present":a!=null&&a.absent?"Absent":null})},P=({props:s})=>{var r,l,a,d,n,c,x,m;const{mainStudentAttendance:t}=u(s==null?void 0:s._id);return e.jsx("div",{children:((l=(r=t==null?void 0:t.data)==null?void 0:r.attendance)==null?void 0:l.filter(i=>i.present===!0).length)/((d=(a=t==null?void 0:t.data)==null?void 0:a.attendance)==null?void 0:d.length)*100?e.jsxs("div",{children:[(((c=(n=t==null?void 0:t.data)==null?void 0:n.attendance)==null?void 0:c.filter(i=>i.present===!0).length)/((m=(x=t==null?void 0:t.data)==null?void 0:x.attendance)==null?void 0:m.length)*100).toFixed(2),"%"]}):e.jsx("div",{children:"0%"})})},E=()=>{var d,n,c,x,m;const{teacherInfo:s}=v(),[t,r]=h.useState((d=s==null?void 0:s.classesAssigned[0])==null?void 0:d.classID),{oneClass:l}=b(t),{classStudents:a}=w(l==null?void 0:l._id);return e.jsxs("div",{className:"",children:[e.jsx(_,{position:"top-center",reverseOrder:!0}),e.jsx("div",{className:"mb-0"}),e.jsx(y,{name:"Making Weekly Report"}),e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"text-[12px] font-semibold",children:"Weekly Report Record for"}),e.jsx("select",{className:"select select-bordered  w-full max-w-xs mb-10 mt-2",value:t,onChange:i=>{r(i.target.value)},children:((n=s==null?void 0:s.classesAssigned)==null?void 0:n.length)>0?(c=s==null?void 0:s.classesAssigned)==null?void 0:c.map(i=>e.jsx("option",{value:i==null?void 0:i.classID,children:i==null?void 0:i.className})):e.jsx("option",{value:"No class Assigned yet",disabled:!0,children:"No class Assigned yet"})})]}),e.jsx("div",{className:"flex w-full justify-end"}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",children:[e.jsxs("div",{className:"text-[gray] w-[1110px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[100px] border-r",children:"Today's Attendance"}),e.jsx("div",{className:"w-[100px] border-r",children:"Student's Attendance Ratio"}),e.jsx("div",{className:"w-[250px] border-r",children:"student Info"}),e.jsx("div",{className:"w-[100px] border-r",children:"student Performance"}),e.jsx("div",{className:"w-[300px] border-r",children:"Give Report/Remark"}),e.jsx("div",{className:"w-[180px] border-r",children:"View Detail"})]}),e.jsx("div",{className:" w-[1110px] overflow-hidden",children:((x=a==null?void 0:a.students)==null?void 0:x.length)>0?e.jsx("div",{children:(m=a==null?void 0:a.students)==null?void 0:m.map((i,N)=>e.jsx("div",{children:e.jsx(A,{props:i,i:N})},i))}):e.jsx("div",{children:"No student yet"})})]})]})};export{E as default};
