import{b8 as y,i as _,cq as $,bl as I,cG as D,t as E,b3 as L,j as e,r as u,an as q,b6 as B,C as M,B as V,_ as z,k as F,cH as H,m as O}from"./index-Dr9ZTIop.js";import{L as P}from"./LittleHeader-XNWv_M-9.js";import{I as J,_ as T}from"./index-CPykWLTA.js";document.title="View Students for Grading";const K=({props:a,i:t})=>{var f;const{subjectID:o}=_(),{teacherInfo:n}=y(),{subjectInfo:d}=$(o),[l,c]=u.useState(!1),{schoolInfo:x}=q(n==null?void 0:n.schoolIDs),[m,h]=u.useState(""),[i,j]=u.useState(""),[v,C]=u.useState(""),[w,G]=u.useState(""),[g,R]=u.useState(""),k=()=>{c(!0),H(n==null?void 0:n._id,a==null?void 0:a._id,{subject:d==null?void 0:d.subjectTitle,test1:parseInt(m),test2:parseInt(i),test3:parseInt(v),test4:parseInt(w),exam:parseInt(g)}).then(r=>{c(!1),r.status===201?(O(`api/student-report-card/${a==null?void 0:a._id}`),T.success("Grade added")):T.error("Grade deanied")})},{gradeData:b}=B(a==null?void 0:a._id);let N=(f=b==null?void 0:b.reportCard)==null?void 0:f.find(r=>{var p,S;return r.classInfo===`${d==null?void 0:d.designated} session: ${(p=x[0])==null?void 0:p.year}(${(S=x[0])==null?void 0:S.presentTerm})`}),s=N==null?void 0:N.result.find(r=>r.subject===(d==null?void 0:d.subjectTitle));return e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  h-16 px-4 my-2  overflow-hidden ${t%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[100px] border-r font-bold",children:t+1}),e.jsx("div",{className:"w-[250px] flex border-r",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{className:" mask mask-squircle w-14 h-14 rounded-md border object-cover",src:M}),e.jsxs("div",{className:"w-[180px] ",children:[" ",a==null?void 0:a.studentFirstName," ",a==null?void 0:a.studentLastName]})]})}),e.jsxs("div",{className:"w-[100px] border-r pl-2",children:[s==null?void 0:s.points," /",s==null?void 0:s.score," -"," ",e.jsx("span",{className:"font-bold text-[12px]",children:s==null?void 0:s.grade})]}),e.jsx("div",{className:"w-[100px] border-r",children:e.jsx(Q,{props:a})}),e.jsx("div",{className:"w-[100px] border-r items-center flex",children:e.jsx("input",{className:"w-[70px] h-8 outline-none border rounded-md px-2 ",placeholder:`${(s==null?void 0:s.test1)!==void 0?s==null?void 0:s.test1:0}`,value:m,onChange:r=>{h(r.target.value)},defaultValue:20})}),e.jsx("div",{className:"w-[100px] border-r",children:e.jsx("input",{className:"w-[70px] h-8 outline-none border rounded-md px-2 ",placeholder:`${(s==null?void 0:s.test2)!==void 0?s==null?void 0:s.test2:0}`,value:i,onChange:r=>{j(r.target.value)}})}),e.jsx("div",{className:"w-[100px] border-r",children:e.jsx("input",{className:"w-[70px] h-8 outline-none border rounded-md px-2 ",placeholder:`${(s==null?void 0:s.test3)!==void 0?s==null?void 0:s.test3:0}`,value:v,onChange:r=>{C(r.target.value)}})}),e.jsx("div",{className:"w-[100px] border-r",children:e.jsx("input",{className:"w-[70px] h-8 outline-none border rounded-md px-2 ",placeholder:`${(s==null?void 0:s.test4)!==void 0?s==null?void 0:s.test4:0}`,value:w,onChange:r=>{G(r.target.value)}})}),e.jsx("div",{className:"w-[100px] border-r  ",children:e.jsx("input",{className:"w-[80px] h-8 outline-none border rounded-md px-2 ",placeholder:`${(s==null?void 0:s.exam)!==void 0?s==null?void 0:s.exam:0}`,value:g,onChange:r=>{R(r.target.value)}})}),e.jsx("div",{className:"w-[180px] border-r relative",children:e.jsx(V,{name:l?"Loading":"Add Score",icon:l&&e.jsx(z,{color:"white",size:12,className:"py-0 my-0 absolute bottom-6 z-10 left-10"}),className:"pl-4 py-3 w-[85%] bg-black text-white  hover:bg-neutral-800 transition-all duration-300",onClick:k})})]})},Q=({props:a})=>{var o,n,d,l,c,x,m,h;const{mainStudentAttendance:t}=F(a==null?void 0:a._id);return e.jsx("div",{children:((n=(o=t==null?void 0:t.data)==null?void 0:o.attendance)==null?void 0:n.filter(i=>i.present===!0).length)/((l=(d=t==null?void 0:t.data)==null?void 0:d.attendance)==null?void 0:l.length)*100?e.jsxs("div",{children:[(((x=(c=t==null?void 0:t.data)==null?void 0:c.attendance)==null?void 0:x.filter(i=>i.present===!0).length)/((h=(m=t==null?void 0:t.data)==null?void 0:m.attendance)==null?void 0:h.length)*100).toFixed(2),"%"]}):e.jsx("p",{children:"0%"})})},Y=()=>{var x,m,h;const{teacherInfo:a}=y(),{subjectID:t}=_(),{subjectInfo:o}=$(t);I(a==null?void 0:a.schoolIDs);const{viewClasses:n}=D(a==null?void 0:a.schoolIDs),d=(x=n==null?void 0:n.classRooms)==null?void 0:x.find(i=>{var j;return(j=i==null?void 0:i.classSubjects)==null?void 0:j.find(v=>v===t)}),{oneClass:l}=E(d==null?void 0:d._id),{classStudents:c}=L(l==null?void 0:l._id);return e.jsxs("div",{className:"",children:[e.jsx(J,{position:"top-center",reverseOrder:!0}),e.jsx("div",{className:"mb-0"}),e.jsx(P,{name:`Entry ${o==null?void 0:o.subjectTitle} Grades`}),e.jsx("div",{className:"mt-10"}),e.jsx("div",{className:"flex w-full justify-end"}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",children:[e.jsxs("div",{className:"text-[gray] w-[1300px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[100px] border-r",children:"Sequence"}),e.jsx("div",{className:"w-[250px] border-r",children:"student Info"}),e.jsx("div",{className:"w-[100px] border-r",children:"Student's Grade"}),e.jsx("div",{className:"w-[100px] border-r",children:"Student's Attendance Ratio"}),e.jsxs("div",{className:"w-[100px] border-r",children:["1st Test ",e.jsx("br",{}),"Score"]}),e.jsxs("div",{className:"w-[100px] border-r",children:["2nd Test",e.jsx("br",{})," Score"]}),e.jsxs("div",{className:"w-[100px] border-r",children:["3rd Test ",e.jsx("br",{}),"Score"]}),e.jsxs("div",{className:"w-[100px] border-r",children:["NoteBook",e.jsx("br",{}),"Score"]}),e.jsx("div",{className:"w-[100px] border-r",children:"Examination Score"}),e.jsx("div",{className:"w-[180px] border-r",children:"Submit Report"})]}),e.jsx("div",{className:" w-[1300px] overflow-hidden",children:((m=c==null?void 0:c.students)==null?void 0:m.length)>0?e.jsx("div",{children:(h=c==null?void 0:c.students)==null?void 0:h.map((i,j)=>e.jsx("div",{children:e.jsx(K,{props:i,i:j})},i))}):e.jsx("div",{children:"No student yet"})})]})]})};export{Y as default};
