import{y as B,H as L,u as E,I as Y,r as v,j as e,B as C,A as j,C as H,a as M,k as T,J,K as S,m as f,N as K,P as Q,Q as P,F as A}from"./index-Dr9ZTIop.js";import{L as q}from"./LittleHeader-XNWv_M-9.js";import{_ as b}from"./index-CPykWLTA.js";const D={};document.title="View Students";const G=({id:i,data:d})=>{var m,o;const{mainStudentAttendance:t}=T(i);let n=d==null?void 0:d.studentFirstName,l=(o=(m=t==null?void 0:t.data)==null?void 0:m.attendance)==null?void 0:o.find(c=>(c==null?void 0:c.studentFirstName)===n),x=Date.now();return e.jsx("div",{className:`w-[100px] border-r 
      ${l!=null&&l.present?"text-green-600":l!=null&&l.absent?"text-red-600":null}`,children:j(l==null?void 0:l.createdAt).format("ll")===j(x).format("ll")&&(l!=null&&l.present)?"Present":l!=null&&l.absent?"Absent":null})},O=({props:i})=>{var t,n,l,x,m,o,c,g,h,s;const{mainStudentAttendance:d}=T(i==null?void 0:i._id);return e.jsx("div",{children:((l=(n=(t=d==null?void 0:d.data)==null?void 0:t.attendance)==null?void 0:n.filter(u=>u.present===!0))==null?void 0:l.length)/((m=(x=d==null?void 0:d.data)==null?void 0:x.attendance)==null?void 0:m.length)*100?e.jsxs("div",{children:[(((g=(c=(o=d==null?void 0:d.data)==null?void 0:o.attendance)==null?void 0:c.filter(u=>u.present===!0))==null?void 0:g.length)/((s=(h=d==null?void 0:d.data)==null?void 0:h.attendance)==null?void 0:s.length)*100).toFixed(2),"%"]}):e.jsx("p",{children:"0%"})})},I=()=>{var y,w,_,F;const i=B();L();const d=a=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let N="";for(let k=0;k<a;k++){const z=Math.floor(Math.random()*r.length);N+=r.charAt(z)}return N},{data:t}=E(),{students:n}=Y(t==null?void 0:t._id),[l,x]=v.useState(!1),[m,o]=v.useState(!1),[c,g]=v.useState(!1),[h,s]=v.useState(""),u=a=>{x(!l),J(t==null?void 0:t._id,a).then(r=>{r.status===200?S(a,{date:j(Date.now()).format("lll"),amount:"2000",purchasedID:d(10),reference:d(10)}).then(N=>{s(""),b.success("3rd term SchoolFees has been Approved"),f(`api/read-student/${t==null?void 0:t._id}`)}):(b.error("Fail to approve this 1st term SchoolFees"),s(""))})},V=a=>{o(!m),K(t==null?void 0:t._id,a).then(r=>{r.status===200?(s(""),b.success("2nd term SchoolFees has been Approved"),f(`api/read-student/${t==null?void 0:t._id}`)):(s(""),b.error("Fail to approve this 2nd term SchoolFees"))})},$=a=>{g(!c),Q(t==null?void 0:t._id,a).then(r=>{r.status===200?S(a,{date:j(Date.now()).format("lll"),amount:"2000",purchasedID:D.randomBytes(3).toString("hex"),reference:D.randomBytes(3).toString("hex")}).then(()=>{s(""),b.success("3rd term SchoolFees has been Approved"),f(`api/read-student/${t==null?void 0:t._id}`)}):(s(""),b.error("Fail to approve this 3rd term SchoolFees"))})},R=()=>{document.startViewTransition?document.startViewTransition(()=>{i(A(!0)),i(P(!0))}):(i(P(!0)),i(A(!0)))};return e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mb-0"}),e.jsx(q,{name:"viewing all Students"}),e.jsx("div",{className:"mt-10"}),e.jsx("div",{className:"flex w-full justify-end",children:e.jsx(C,{name:"Add a new Student",className:"uppercase text-[12px] font-medium bg-blue-950 py-4 px-8 hover:bg-blue-900 cursor-pointer transition-all duration-300 ",onClick:R})}),e.jsxs("div",{className:"py-6 px-2 border rounded-md min-w-[300px] overflow-y-hidden ",children:[e.jsxs("div",{className:"text-[gray] w-[1920px] flex  gap-2 text-[12px] font-medium uppercase mb-10 px-4",children:[e.jsx("div",{className:"w-[130px] border-r",children:"Reg. Date"}),e.jsx("div",{className:"w-[100px] border-r",children:"Today's Attendance"}),e.jsx("div",{className:"w-[100px] border-r",children:"Student's Attendance Ratio"}),e.jsx("div",{className:"w-[220px] border-r",children:"Session Fee"}),e.jsx("div",{className:"w-[150px] border-r",children:"student Image"}),e.jsx("div",{className:"w-[200px] border-r",children:"student Name"}),e.jsx("div",{className:"w-[100px] border-r",children:"student Class"}),e.jsx("div",{className:"w-[150px] border-r",children:"Parent Contact"}),e.jsx("div",{className:"w-[200px] border-r",children:"Address "}),e.jsx("div",{className:"w-[200px] border-r",children:"Performance Ratio"}),e.jsx("div",{className:"w-[80px] border-r",children:"Rate"}),e.jsx("div",{className:"w-[180px] border-r",children:"View Detail"})]}),e.jsx("div",{className:" w-[1920px] overflow-hidden",children:((w=(y=n==null?void 0:n.data)==null?void 0:y.students)==null?void 0:w.length)>0?e.jsx("div",{children:(F=(_=n==null?void 0:n.data)==null?void 0:_.students)==null?void 0:F.map((a,r)=>e.jsx("div",{children:e.jsx("div",{children:e.jsxs("div",{className:`w-full flex items-center gap-2 text-[12px] font-medium  h-16 px-4 my-2  overflow-hidden ${r%2===0?"bg-slate-50":"bg-white"}`,children:[e.jsx("div",{className:"w-[130px] border-r",children:j(a==null?void 0:a.createdAt).format("ll")}),e.jsx(G,{data:a,id:a==null?void 0:a._id}),e.jsx("div",{className:"w-[100px] border-r",children:e.jsx(O,{props:a})}),e.jsxs("div",{className:"w-[220px] border-r flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("label",{children:"1st Term"}),e.jsxs("label",{htmlFor:"my_modal_6 relative ",children:[e.jsxs("label",{htmlFor:"my_modal_6",children:[e.jsx("label",{htmlFor:"my_modal_6",className:"absolute z-80 bg-transparent hover:bg-transparent border-0 btn",onClick:()=>{s(a==null?void 0:a._id)}}),e.jsx("input",{type:"checkbox",className:`
                                -z-20
                            toggle toggle-sm mt-2  ${a!=null&&a.feesPaid1st?"bg-blue-950 border-blue-950":"bg-neutral-500 border-neutral-500"}
                            `,onChange:()=>{},checked:a==null?void 0:a.feesPaid1st})]}),e.jsx("input",{type:"checkbox",id:"my_modal_6",className:"modal-toggle"}),e.jsx("div",{className:"modal",role:"dialog",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Confirm this payment"}),e.jsxs("p",{className:"py-4",children:["Are you sure you want to confirm this payment?",e.jsx("br",{})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("label",{htmlFor:"my_modal_6",className:"btn px-8 bg-green-500 text-white hover:bg-green-600 ",onClick:()=>{u(h)},children:"Yes"}),e.jsx("label",{htmlFor:"my_modal_6",className:"btn px-8 bg-red-500 text-white hover:bg-red-600 ",onClick:()=>{},children:"No"})]})]})})]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("label",{children:"2nd Term"}),e.jsxs("label",{htmlFor:"my_modal_6 relative ",children:[e.jsxs("label",{htmlFor:"my_modal_6",children:[e.jsx("label",{htmlFor:"my_modal_6",className:"absolute z-80 bg-transparent hover:bg-transparent border-0 btn",onClick:()=>{s(a==null?void 0:a._id)}}),e.jsx("input",{type:"checkbox",className:`
                                -z-20
                            toggle toggle-sm mt-2  ${a!=null&&a.feesPaid2nd?"bg-blue-950 border-blue-950":"bg-neutral-500 border-neutral-500"}
                            `,onChange:()=>{},checked:a==null?void 0:a.feesPaid2nd})]}),e.jsx("input",{type:"checkbox",id:"my_modal_6",className:"modal-toggle"}),e.jsx("div",{className:"modal",role:"dialog",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Confirm 2nd Term school-fees payment"}),e.jsxs("p",{className:"py-4",children:["Are you sure you want to confirm this payment?",e.jsx("br",{})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("label",{htmlFor:"my_modal_6",className:"btn px-8 bg-green-500 text-white hover:bg-green-600 ",onClick:()=>{V(h)},children:"Yes"}),e.jsx("label",{htmlFor:"my_modal_6",className:"btn px-8 bg-red-500 text-white hover:bg-red-600 ",onClick:()=>{},children:"No"})]})]})})]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("label",{children:"3rd Term"}),e.jsxs("label",{htmlFor:"my_modal_6 relative ",children:[e.jsxs("label",{htmlFor:"my_modal_6",children:[e.jsx("label",{htmlFor:"my_modal_6",className:"absolute z-80 bg-transparent hover:bg-transparent border-0 btn",onClick:()=>{s(a==null?void 0:a._id)}}),e.jsx("input",{type:"checkbox",className:`
                                -z-20
                            toggle toggle-sm mt-2  ${a!=null&&a.feesPaid3rd?"bg-blue-950 border-blue-950":"bg-neutral-500 border-neutral-500"}
                            `,onChange:()=>{},checked:a==null?void 0:a.feesPaid4rd})]}),e.jsx("input",{type:"checkbox",id:"my_modal_6",className:"modal-toggle"}),e.jsx("div",{className:"modal",role:"dialog",children:e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Confirm 3rd Term school-fees payment"}),e.jsxs("p",{className:"py-4",children:["Are you sure you want to confirm this payment?",e.jsx("br",{})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx("label",{htmlFor:"my_modal_6",className:"btn px-8 bg-green-500 text-white hover:bg-green-600 ",onClick:()=>{$(h)},children:"Yes"}),e.jsx("label",{htmlFor:"my_modal_6",className:"btn px-8 bg-red-500 text-white hover:bg-red-600 ",onClick:()=>{},children:"No"})]})]})})]})]})]}),e.jsx("div",{className:"w-[150px] flex justify-center border-r",children:e.jsx("img",{className:"w-14 h-14 rounded-md border object-cover",src:a!=null&&a.avtar?a==null?void 0:a.avatar:H})}),e.jsxs("div",{className:"w-[200px] border-r gap-2 font-bold",children:[a==null?void 0:a.studentFirstName," ",a==null?void 0:a.studentLastName]}),e.jsx("div",{className:"w-[100px] border-r  ",children:a==null?void 0:a.classAssigned}),e.jsx("div",{className:"w-[150px] border-r  ",children:a!=null&&a.phone?a==null?void 0:a.phone:"Not yet Added"}),e.jsx("div",{className:"w-[200px] border-r  ",children:a!=null&&a.studentAddress?a==null?void 0:a.studentAddress:"Not yet Added"}),e.jsx("div",{className:"w-[200px] border-r  ",children:a!=null&&a.totalPerformance?a==null?void 0:a.totalPerformance:"0"}),e.jsx("div",{className:"w-[80px] border-r",children:"3 of 5"}),e.jsx(M,{to:`student-details/${a==null?void 0:a._id}`,className:"w-[180px] border-r",children:e.jsx(C,{name:"View Detail",className:"py-3 w-[85%] bg-black text-white  hover:bg-neutral-800 transition-all duration-300",onClick:()=>{}})})]},a)})}))}):e.jsx("div",{children:"No student yet"})})]})]})};export{I as default};
